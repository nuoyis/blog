<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"><title>typecho主题butterfly备案号-公安备案开发 | 诺依阁的日记簿</title><meta name="author" content="诺依阁,wkkjonlykang@vip.qq.com"><meta name="copyright" content="诺依阁"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="目前我修改和开发了两个页面。各位可以自己对应自己的情况进行修改。以下是两个文件的开发function.php 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677"><meta property="og:type" content="article"><meta property="og:title" content="typecho主题butterfly备案号-公安备案开发"><meta property="og:url" content="https://blog.nuoyis.net/posts/c223.html"><meta property="og:site_name" content="诺依阁的日记簿"><meta property="og:description" content="目前我修改和开发了两个页面。各位可以自己对应自己的情况进行修改。以下是两个文件的开发function.php 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://server-api.nuoyis.net/acg/?yasuo=1?1637"><meta property="article:published_time" content="2023-06-19T08:13:13.000Z"><meta property="article:modified_time" content="2024-08-25T09:42:24.325Z"><meta property="article:author" content="诺依阁"><meta property="article:tag" content="typecho,php,blog,诺依阁,站长,系统安装,环境搭建,服务器,站长,诺依阁的日常记录,生活,技术,科技,日记,诺依阁的日记簿,博客,云服务器,白嫖,自媒体,树洞空间"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://server-api.nuoyis.net/acg/?yasuo=1?1637"><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="https://blog.nuoyis.net/posts/c223.html"><link rel="preconnect" href="https://lib.baomitu.com"><link rel="preconnect" href="//hm.baidu.com"><link rel="preconnect" href="//busuanzi.ibruce.info"><link rel="stylesheet" href="/css/index.css?v=4.12.0"><link rel="stylesheet" href="https://lib.baomitu.com/font-awesome/6.5.1/css/all.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/fancyapps-ui/5.0.32/fancybox/fancybox.min.css" media="print" onload='this.media="all"'><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle=window.adsbygoogle||[]).push({google_ad_client:"ca-pub-4015694772463475",enable_page_level_ads:"true"})</script><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?2c790c11308ab98338b82482af6a4ff1";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"top_n_per_article":1,"unescape":true,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://lib.baomitu.com/egjs-infinitegrid/4.11.0/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"typecho主题butterfly备案号-公安备案开发",isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!1,postUpdate:"2024-08-25 17:42:24"}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><link rel="stylesheet" href="https://static.nuoyis.net/libs/blog/typecho/themes/butterfly/static/css/Hanasaki.css"><meta name="generator" content="Hexo 7.3.0"><style>.github-emoji{position:relative;display:inline-block;width:1.2em;min-height:1.2em;overflow:hidden;vertical-align:top;color:transparent}.github-emoji>span{position:relative;z-index:10}.github-emoji .fancybox,.github-emoji img{margin:0!important;padding:0!important;border:none!important;outline:0!important;text-decoration:none!important;user-select:none!important;cursor:auto!important}.github-emoji img{height:1.2em!important;width:1.2em!important;position:absolute!important;left:50%!important;top:50%!important;transform:translate(-50%,-50%)!important;user-select:none!important;cursor:auto!important}.github-emoji-fallback{color:inherit}.github-emoji-fallback img{opacity:0!important}</style><link rel="alternate" href="/atom.xml" title="诺依阁的日记簿" type="application/atom+xml"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://q.qlogo.cn/headimg_dl?dst_uin=914205978&amp;spec=640&amp;img_type=jpg" onerror='onerror=null,src="/img/friend_404.gif"' alt="avatar"></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">117</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">11</div></a></div><hr class="custom-hr"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/atom.xml"><i class="fa-fw fas fa-rss"></i><span> RSS</span></a></div><div class="menus_item"><a class="site-page" href="/youlian/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image:url(https://server-api.nuoyis.net/acg/?yasuo=1?1637)"><nav id="nav"><span id="blog-info"><a href="/" title="诺依阁的日记簿"><span class="site-name">诺依阁的日记簿</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/atom.xml"><i class="fa-fw fas fa-rss"></i><span> RSS</span></a></div><div class="menus_item"><a class="site-page" href="/youlian/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">typecho主题butterfly备案号-公安备案开发</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-06-19T08:13:13.000Z" title="发表于 2023-06-19 16:13:13">2023-06-19</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-08-25T09:42:24.325Z" title="更新于 2024-08-25 17:42:24">2024-08-25</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%8A%80%E6%9C%AF%E7%B1%BB/">技术类</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" data-flag-title="typecho主题butterfly备案号-公安备案开发"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><p>目前我修改和开发了两个页面。各位可以自己对应自己的情况进行修改。<br>以下是两个文件的开发<br>function.php</p><figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br><span class="line">784</span><br><span class="line">785</span><br><span class="line">786</span><br><span class="line">787</span><br><span class="line">788</span><br><span class="line">789</span><br><span class="line">790</span><br><span class="line">791</span><br><span class="line">792</span><br><span class="line">793</span><br><span class="line">794</span><br><span class="line">795</span><br><span class="line">796</span><br><span class="line">797</span><br><span class="line">798</span><br><span class="line">799</span><br><span class="line">800</span><br><span class="line">801</span><br><span class="line">802</span><br><span class="line">803</span><br><span class="line">804</span><br><span class="line">805</span><br><span class="line">806</span><br><span class="line">807</span><br><span class="line">808</span><br><span class="line">809</span><br><span class="line">810</span><br><span class="line">811</span><br><span class="line">812</span><br><span class="line">813</span><br><span class="line">814</span><br><span class="line">815</span><br><span class="line">816</span><br><span class="line">817</span><br><span class="line">818</span><br><span class="line">819</span><br><span class="line">820</span><br><span class="line">821</span><br><span class="line">822</span><br><span class="line">823</span><br><span class="line">824</span><br><span class="line">825</span><br><span class="line">826</span><br><span class="line">827</span><br><span class="line">828</span><br><span class="line">829</span><br><span class="line">830</span><br><span class="line">831</span><br><span class="line">832</span><br><span class="line">833</span><br><span class="line">834</span><br><span class="line">835</span><br><span class="line">836</span><br><span class="line">837</span><br><span class="line">838</span><br><span class="line">839</span><br><span class="line">840</span><br><span class="line">841</span><br><span class="line">842</span><br><span class="line">843</span><br><span class="line">844</span><br><span class="line">845</span><br><span class="line">846</span><br><span class="line">847</span><br><span class="line">848</span><br><span class="line">849</span><br><span class="line">850</span><br><span class="line">851</span><br><span class="line">852</span><br><span class="line">853</span><br><span class="line">854</span><br><span class="line">855</span><br><span class="line">856</span><br><span class="line">857</span><br><span class="line">858</span><br><span class="line">859</span><br><span class="line">860</span><br><span class="line">861</span><br><span class="line">862</span><br><span class="line">863</span><br><span class="line">864</span><br><span class="line">865</span><br><span class="line">866</span><br><span class="line">867</span><br><span class="line">868</span><br><span class="line">869</span><br><span class="line">870</span><br><span class="line">871</span><br><span class="line">872</span><br><span class="line">873</span><br><span class="line">874</span><br><span class="line">875</span><br><span class="line">876</span><br><span class="line">877</span><br><span class="line">878</span><br><span class="line">879</span><br><span class="line">880</span><br><span class="line">881</span><br><span class="line">882</span><br><span class="line">883</span><br><span class="line">884</span><br><span class="line">885</span><br><span class="line">886</span><br><span class="line">887</span><br><span class="line">888</span><br><span class="line">889</span><br><span class="line">890</span><br><span class="line">891</span><br><span class="line">892</span><br><span class="line">893</span><br><span class="line">894</span><br><span class="line">895</span><br><span class="line">896</span><br><span class="line">897</span><br><span class="line">898</span><br><span class="line">899</span><br><span class="line">900</span><br><span class="line">901</span><br><span class="line">902</span><br><span class="line">903</span><br><span class="line">904</span><br><span class="line">905</span><br><span class="line">906</span><br><span class="line">907</span><br><span class="line">908</span><br><span class="line">909</span><br><span class="line">910</span><br><span class="line">911</span><br><span class="line">912</span><br><span class="line">913</span><br><span class="line">914</span><br><span class="line">915</span><br><span class="line">916</span><br><span class="line">917</span><br><span class="line">918</span><br><span class="line">919</span><br><span class="line">920</span><br><span class="line">921</span><br><span class="line">922</span><br><span class="line">923</span><br><span class="line">924</span><br><span class="line">925</span><br><span class="line">926</span><br><span class="line">927</span><br><span class="line">928</span><br><span class="line">929</span><br><span class="line">930</span><br><span class="line">931</span><br><span class="line">932</span><br><span class="line">933</span><br><span class="line">934</span><br><span class="line">935</span><br><span class="line">936</span><br><span class="line">937</span><br><span class="line">938</span><br><span class="line">939</span><br><span class="line">940</span><br><span class="line">941</span><br><span class="line">942</span><br><span class="line">943</span><br><span class="line">944</span><br><span class="line">945</span><br><span class="line">946</span><br><span class="line">947</span><br><span class="line">948</span><br><span class="line">949</span><br><span class="line">950</span><br><span class="line">951</span><br><span class="line">952</span><br><span class="line">953</span><br><span class="line">954</span><br><span class="line">955</span><br><span class="line">956</span><br><span class="line">957</span><br><span class="line">958</span><br><span class="line">959</span><br><span class="line">960</span><br><span class="line">961</span><br><span class="line">962</span><br><span class="line">963</span><br><span class="line">964</span><br><span class="line">965</span><br><span class="line">966</span><br><span class="line">967</span><br><span class="line">968</span><br><span class="line">969</span><br><span class="line">970</span><br><span class="line">971</span><br><span class="line">972</span><br><span class="line">973</span><br><span class="line">974</span><br><span class="line">975</span><br><span class="line">976</span><br><span class="line">977</span><br><span class="line">978</span><br><span class="line">979</span><br><span class="line">980</span><br><span class="line">981</span><br><span class="line">982</span><br><span class="line">983</span><br><span class="line">984</span><br><span class="line">985</span><br><span class="line">986</span><br><span class="line">987</span><br><span class="line">988</span><br><span class="line">989</span><br><span class="line">990</span><br><span class="line">991</span><br><span class="line">992</span><br><span class="line">993</span><br><span class="line">994</span><br><span class="line">995</span><br><span class="line">996</span><br><span class="line">997</span><br><span class="line">998</span><br><span class="line">999</span><br><span class="line">1000</span><br><span class="line">1001</span><br><span class="line">1002</span><br><span class="line">1003</span><br><span class="line">1004</span><br><span class="line">1005</span><br><span class="line">1006</span><br><span class="line">1007</span><br><span class="line">1008</span><br><span class="line">1009</span><br><span class="line">1010</span><br><span class="line">1011</span><br><span class="line">1012</span><br><span class="line">1013</span><br><span class="line">1014</span><br><span class="line">1015</span><br><span class="line">1016</span><br><span class="line">1017</span><br><span class="line">1018</span><br><span class="line">1019</span><br><span class="line">1020</span><br><span class="line">1021</span><br><span class="line">1022</span><br><span class="line">1023</span><br><span class="line">1024</span><br><span class="line">1025</span><br><span class="line">1026</span><br><span class="line">1027</span><br><span class="line">1028</span><br><span class="line">1029</span><br><span class="line">1030</span><br><span class="line">1031</span><br><span class="line">1032</span><br><span class="line">1033</span><br><span class="line">1034</span><br><span class="line">1035</span><br><span class="line">1036</span><br><span class="line">1037</span><br><span class="line">1038</span><br><span class="line">1039</span><br><span class="line">1040</span><br><span class="line">1041</span><br><span class="line">1042</span><br><span class="line">1043</span><br><span class="line">1044</span><br><span class="line">1045</span><br><span class="line">1046</span><br><span class="line">1047</span><br><span class="line">1048</span><br><span class="line">1049</span><br><span class="line">1050</span><br><span class="line">1051</span><br><span class="line">1052</span><br><span class="line">1053</span><br><span class="line">1054</span><br><span class="line">1055</span><br><span class="line">1056</span><br><span class="line">1057</span><br><span class="line">1058</span><br><span class="line">1059</span><br><span class="line">1060</span><br><span class="line">1061</span><br><span class="line">1062</span><br><span class="line">1063</span><br><span class="line">1064</span><br><span class="line">1065</span><br><span class="line">1066</span><br><span class="line">1067</span><br><span class="line">1068</span><br><span class="line">1069</span><br><span class="line">1070</span><br><span class="line">1071</span><br><span class="line">1072</span><br><span class="line">1073</span><br><span class="line">1074</span><br><span class="line">1075</span><br><span class="line">1076</span><br><span class="line">1077</span><br><span class="line">1078</span><br><span class="line">1079</span><br><span class="line">1080</span><br><span class="line">1081</span><br><span class="line">1082</span><br><span class="line">1083</span><br><span class="line">1084</span><br><span class="line">1085</span><br><span class="line">1086</span><br><span class="line">1087</span><br><span class="line">1088</span><br><span class="line">1089</span><br><span class="line">1090</span><br><span class="line">1091</span><br><span class="line">1092</span><br><span class="line">1093</span><br><span class="line">1094</span><br><span class="line">1095</span><br><span class="line">1096</span><br><span class="line">1097</span><br><span class="line">1098</span><br><span class="line">1099</span><br><span class="line">1100</span><br><span class="line">1101</span><br><span class="line">1102</span><br><span class="line">1103</span><br><span class="line">1104</span><br><span class="line">1105</span><br><span class="line">1106</span><br><span class="line">1107</span><br><span class="line">1108</span><br><span class="line">1109</span><br><span class="line">1110</span><br><span class="line">1111</span><br><span class="line">1112</span><br><span class="line">1113</span><br><span class="line">1114</span><br><span class="line">1115</span><br><span class="line">1116</span><br><span class="line">1117</span><br><span class="line">1118</span><br><span class="line">1119</span><br><span class="line">1120</span><br><span class="line">1121</span><br><span class="line">1122</span><br><span class="line">1123</span><br><span class="line">1124</span><br><span class="line">1125</span><br><span class="line">1126</span><br><span class="line">1127</span><br><span class="line">1128</span><br><span class="line">1129</span><br><span class="line">1130</span><br><span class="line">1131</span><br><span class="line">1132</span><br><span class="line">1133</span><br><span class="line">1134</span><br><span class="line">1135</span><br><span class="line">1136</span><br><span class="line">1137</span><br><span class="line">1138</span><br><span class="line">1139</span><br><span class="line">1140</span><br><span class="line">1141</span><br><span class="line">1142</span><br><span class="line">1143</span><br><span class="line">1144</span><br><span class="line">1145</span><br><span class="line">1146</span><br><span class="line">1147</span><br><span class="line">1148</span><br><span class="line">1149</span><br><span class="line">1150</span><br><span class="line">1151</span><br><span class="line">1152</span><br><span class="line">1153</span><br><span class="line">1154</span><br><span class="line">1155</span><br><span class="line">1156</span><br><span class="line">1157</span><br><span class="line">1158</span><br><span class="line">1159</span><br><span class="line">1160</span><br><span class="line">1161</span><br><span class="line">1162</span><br><span class="line">1163</span><br><span class="line">1164</span><br><span class="line">1165</span><br><span class="line">1166</span><br><span class="line">1167</span><br><span class="line">1168</span><br><span class="line">1169</span><br><span class="line">1170</span><br><span class="line">1171</span><br><span class="line">1172</span><br><span class="line">1173</span><br><span class="line">1174</span><br><span class="line">1175</span><br><span class="line">1176</span><br><span class="line">1177</span><br><span class="line">1178</span><br><span class="line">1179</span><br><span class="line">1180</span><br><span class="line">1181</span><br><span class="line">1182</span><br><span class="line">1183</span><br><span class="line">1184</span><br><span class="line">1185</span><br><span class="line">1186</span><br><span class="line">1187</span><br><span class="line">1188</span><br><span class="line">1189</span><br><span class="line">1190</span><br><span class="line">1191</span><br><span class="line">1192</span><br><span class="line">1193</span><br><span class="line">1194</span><br><span class="line">1195</span><br><span class="line">1196</span><br><span class="line">1197</span><br><span class="line">1198</span><br><span class="line">1199</span><br><span class="line">1200</span><br><span class="line">1201</span><br><span class="line">1202</span><br><span class="line">1203</span><br><span class="line">1204</span><br><span class="line">1205</span><br><span class="line">1206</span><br><span class="line">1207</span><br><span class="line">1208</span><br><span class="line">1209</span><br><span class="line">1210</span><br><span class="line">1211</span><br><span class="line">1212</span><br><span class="line">1213</span><br><span class="line">1214</span><br><span class="line">1215</span><br><span class="line">1216</span><br><span class="line">1217</span><br><span class="line">1218</span><br><span class="line">1219</span><br><span class="line">1220</span><br><span class="line">1221</span><br><span class="line">1222</span><br><span class="line">1223</span><br><span class="line">1224</span><br><span class="line">1225</span><br><span class="line">1226</span><br><span class="line">1227</span><br><span class="line">1228</span><br><span class="line">1229</span><br><span class="line">1230</span><br><span class="line">1231</span><br><span class="line">1232</span><br><span class="line">1233</span><br><span class="line">1234</span><br><span class="line">1235</span><br><span class="line">1236</span><br><span class="line">1237</span><br><span class="line">1238</span><br><span class="line">1239</span><br><span class="line">1240</span><br><span class="line">1241</span><br><span class="line">1242</span><br><span class="line">1243</span><br><span class="line">1244</span><br><span class="line">1245</span><br><span class="line">1246</span><br><span class="line">1247</span><br><span class="line">1248</span><br><span class="line">1249</span><br><span class="line">1250</span><br><span class="line">1251</span><br><span class="line">1252</span><br><span class="line">1253</span><br><span class="line">1254</span><br><span class="line">1255</span><br><span class="line">1256</span><br><span class="line">1257</span><br><span class="line">1258</span><br><span class="line">1259</span><br><span class="line">1260</span><br><span class="line">1261</span><br><span class="line">1262</span><br><span class="line">1263</span><br><span class="line">1264</span><br><span class="line">1265</span><br><span class="line">1266</span><br><span class="line">1267</span><br><span class="line">1268</span><br><span class="line">1269</span><br><span class="line">1270</span><br><span class="line">1271</span><br><span class="line">1272</span><br><span class="line">1273</span><br><span class="line">1274</span><br><span class="line">1275</span><br><span class="line">1276</span><br><span class="line">1277</span><br><span class="line">1278</span><br><span class="line">1279</span><br><span class="line">1280</span><br><span class="line">1281</span><br><span class="line">1282</span><br><span class="line">1283</span><br><span class="line">1284</span><br><span class="line">1285</span><br><span class="line">1286</span><br><span class="line">1287</span><br><span class="line">1288</span><br><span class="line">1289</span><br><span class="line">1290</span><br><span class="line">1291</span><br><span class="line">1292</span><br><span class="line">1293</span><br><span class="line">1294</span><br><span class="line">1295</span><br><span class="line">1296</span><br><span class="line">1297</span><br><span class="line">1298</span><br><span class="line">1299</span><br><span class="line">1300</span><br><span class="line">1301</span><br><span class="line">1302</span><br><span class="line">1303</span><br><span class="line">1304</span><br><span class="line">1305</span><br><span class="line">1306</span><br><span class="line">1307</span><br><span class="line">1308</span><br><span class="line">1309</span><br><span class="line">1310</span><br><span class="line">1311</span><br><span class="line">1312</span><br><span class="line">1313</span><br><span class="line">1314</span><br><span class="line">1315</span><br><span class="line">1316</span><br><span class="line">1317</span><br><span class="line">1318</span><br><span class="line">1319</span><br><span class="line">1320</span><br><span class="line">1321</span><br><span class="line">1322</span><br><span class="line">1323</span><br><span class="line">1324</span><br><span class="line">1325</span><br><span class="line">1326</span><br><span class="line">1327</span><br><span class="line">1328</span><br><span class="line">1329</span><br><span class="line">1330</span><br><span class="line">1331</span><br><span class="line">1332</span><br><span class="line">1333</span><br><span class="line">1334</span><br><span class="line">1335</span><br><span class="line">1336</span><br><span class="line">1337</span><br><span class="line">1338</span><br><span class="line">1339</span><br><span class="line">1340</span><br><span class="line">1341</span><br><span class="line">1342</span><br><span class="line">1343</span><br><span class="line">1344</span><br><span class="line">1345</span><br><span class="line">1346</span><br><span class="line">1347</span><br><span class="line">1348</span><br><span class="line">1349</span><br><span class="line">1350</span><br><span class="line">1351</span><br><span class="line">1352</span><br><span class="line">1353</span><br><span class="line">1354</span><br><span class="line">1355</span><br><span class="line">1356</span><br><span class="line">1357</span><br><span class="line">1358</span><br><span class="line">1359</span><br><span class="line">1360</span><br><span class="line">1361</span><br><span class="line">1362</span><br><span class="line">1363</span><br><span class="line">1364</span><br><span class="line">1365</span><br><span class="line">1366</span><br><span class="line">1367</span><br><span class="line">1368</span><br><span class="line">1369</span><br><span class="line">1370</span><br><span class="line">1371</span><br><span class="line">1372</span><br><span class="line">1373</span><br><span class="line">1374</span><br><span class="line">1375</span><br><span class="line">1376</span><br><span class="line">1377</span><br><span class="line">1378</span><br><span class="line">1379</span><br><span class="line">1380</span><br><span class="line">1381</span><br><span class="line">1382</span><br><span class="line">1383</span><br><span class="line">1384</span><br><span class="line">1385</span><br><span class="line">1386</span><br><span class="line">1387</span><br><span class="line">1388</span><br><span class="line">1389</span><br><span class="line">1390</span><br><span class="line">1391</span><br><span class="line">1392</span><br><span class="line">1393</span><br><span class="line">1394</span><br><span class="line">1395</span><br><span class="line">1396</span><br><span class="line">1397</span><br><span class="line">1398</span><br><span class="line">1399</span><br><span class="line">1400</span><br><span class="line">1401</span><br><span class="line">1402</span><br><span class="line">1403</span><br><span class="line">1404</span><br><span class="line">1405</span><br><span class="line">1406</span><br><span class="line">1407</span><br><span class="line">1408</span><br><span class="line">1409</span><br><span class="line">1410</span><br><span class="line">1411</span><br><span class="line">1412</span><br><span class="line">1413</span><br><span class="line">1414</span><br><span class="line">1415</span><br><span class="line">1416</span><br><span class="line">1417</span><br><span class="line">1418</span><br><span class="line">1419</span><br><span class="line">1420</span><br><span class="line">1421</span><br><span class="line">1422</span><br><span class="line">1423</span><br><span class="line">1424</span><br><span class="line">1425</span><br><span class="line">1426</span><br><span class="line">1427</span><br><span class="line">1428</span><br><span class="line">1429</span><br><span class="line">1430</span><br><span class="line">1431</span><br><span class="line">1432</span><br><span class="line">1433</span><br><span class="line">1434</span><br><span class="line">1435</span><br><span class="line">1436</span><br><span class="line">1437</span><br><span class="line">1438</span><br><span class="line">1439</span><br><span class="line">1440</span><br><span class="line">1441</span><br><span class="line">1442</span><br><span class="line">1443</span><br><span class="line">1444</span><br><span class="line">1445</span><br><span class="line">1446</span><br><span class="line">1447</span><br><span class="line">1448</span><br><span class="line">1449</span><br><span class="line">1450</span><br><span class="line">1451</span><br><span class="line">1452</span><br><span class="line">1453</span><br><span class="line">1454</span><br><span class="line">1455</span><br><span class="line">1456</span><br><span class="line">1457</span><br><span class="line">1458</span><br><span class="line">1459</span><br><span class="line">1460</span><br><span class="line">1461</span><br><span class="line">1462</span><br><span class="line">1463</span><br><span class="line">1464</span><br><span class="line">1465</span><br><span class="line">1466</span><br><span class="line">1467</span><br><span class="line">1468</span><br><span class="line">1469</span><br><span class="line">1470</span><br><span class="line">1471</span><br><span class="line">1472</span><br><span class="line">1473</span><br><span class="line">1474</span><br><span class="line">1475</span><br><span class="line">1476</span><br><span class="line">1477</span><br><span class="line">1478</span><br><span class="line">1479</span><br><span class="line">1480</span><br><span class="line">1481</span><br><span class="line">1482</span><br><span class="line">1483</span><br><span class="line">1484</span><br><span class="line">1485</span><br><span class="line">1486</span><br><span class="line">1487</span><br><span class="line">1488</span><br><span class="line">1489</span><br><span class="line">1490</span><br><span class="line">1491</span><br><span class="line">1492</span><br><span class="line">1493</span><br><span class="line">1494</span><br><span class="line">1495</span><br><span class="line">1496</span><br><span class="line">1497</span><br><span class="line">1498</span><br><span class="line">1499</span><br><span class="line">1500</span><br><span class="line">1501</span><br><span class="line">1502</span><br><span class="line">1503</span><br><span class="line">1504</span><br><span class="line">1505</span><br><span class="line">1506</span><br><span class="line">1507</span><br><span class="line">1508</span><br><span class="line">1509</span><br><span class="line">1510</span><br><span class="line">1511</span><br><span class="line">1512</span><br><span class="line">1513</span><br><span class="line">1514</span><br><span class="line">1515</span><br><span class="line">1516</span><br><span class="line">1517</span><br><span class="line">1518</span><br><span class="line">1519</span><br><span class="line">1520</span><br><span class="line">1521</span><br><span class="line">1522</span><br><span class="line">1523</span><br><span class="line">1524</span><br><span class="line">1525</span><br><span class="line">1526</span><br><span class="line">1527</span><br><span class="line">1528</span><br><span class="line">1529</span><br><span class="line">1530</span><br><span class="line">1531</span><br><span class="line">1532</span><br><span class="line">1533</span><br><span class="line">1534</span><br><span class="line">1535</span><br><span class="line">1536</span><br><span class="line">1537</span><br><span class="line">1538</span><br><span class="line">1539</span><br><span class="line">1540</span><br><span class="line">1541</span><br><span class="line">1542</span><br><span class="line">1543</span><br><span class="line">1544</span><br><span class="line">1545</span><br><span class="line">1546</span><br><span class="line">1547</span><br><span class="line">1548</span><br><span class="line">1549</span><br><span class="line">1550</span><br><span class="line">1551</span><br><span class="line">1552</span><br><span class="line">1553</span><br><span class="line">1554</span><br><span class="line">1555</span><br><span class="line">1556</span><br><span class="line">1557</span><br><span class="line">1558</span><br><span class="line">1559</span><br><span class="line">1560</span><br><span class="line">1561</span><br><span class="line">1562</span><br><span class="line">1563</span><br><span class="line">1564</span><br><span class="line">1565</span><br><span class="line">1566</span><br><span class="line">1567</span><br><span class="line">1568</span><br><span class="line">1569</span><br><span class="line">1570</span><br><span class="line">1571</span><br><span class="line">1572</span><br><span class="line">1573</span><br><span class="line">1574</span><br><span class="line">1575</span><br><span class="line">1576</span><br><span class="line">1577</span><br><span class="line">1578</span><br><span class="line">1579</span><br><span class="line">1580</span><br><span class="line">1581</span><br><span class="line">1582</span><br><span class="line">1583</span><br><span class="line">1584</span><br><span class="line">1585</span><br><span class="line">1586</span><br><span class="line">1587</span><br><span class="line">1588</span><br><span class="line">1589</span><br><span class="line">1590</span><br><span class="line">1591</span><br><span class="line">1592</span><br><span class="line">1593</span><br><span class="line">1594</span><br><span class="line">1595</span><br><span class="line">1596</span><br><span class="line">1597</span><br><span class="line">1598</span><br><span class="line">1599</span><br><span class="line">1600</span><br><span class="line">1601</span><br><span class="line">1602</span><br><span class="line">1603</span><br><span class="line">1604</span><br><span class="line">1605</span><br><span class="line">1606</span><br><span class="line">1607</span><br><span class="line">1608</span><br><span class="line">1609</span><br><span class="line">1610</span><br><span class="line">1611</span><br><span class="line">1612</span><br><span class="line">1613</span><br><span class="line">1614</span><br><span class="line">1615</span><br><span class="line">1616</span><br><span class="line">1617</span><br><span class="line">1618</span><br><span class="line">1619</span><br><span class="line">1620</span><br><span class="line">1621</span><br><span class="line">1622</span><br><span class="line">1623</span><br><span class="line">1624</span><br><span class="line">1625</span><br><span class="line">1626</span><br><span class="line">1627</span><br><span class="line">1628</span><br><span class="line">1629</span><br><span class="line">1630</span><br><span class="line">1631</span><br><span class="line">1632</span><br><span class="line">1633</span><br><span class="line">1634</span><br><span class="line">1635</span><br><span class="line">1636</span><br><span class="line">1637</span><br><span class="line">1638</span><br><span class="line">1639</span><br><span class="line">1640</span><br><span class="line">1641</span><br><span class="line">1642</span><br><span class="line">1643</span><br><span class="line">1644</span><br><span class="line">1645</span><br><span class="line">1646</span><br><span class="line">1647</span><br><span class="line">1648</span><br><span class="line">1649</span><br><span class="line">1650</span><br><span class="line">1651</span><br><span class="line">1652</span><br><span class="line">1653</span><br><span class="line">1654</span><br><span class="line">1655</span><br><span class="line">1656</span><br><span class="line">1657</span><br><span class="line">1658</span><br><span class="line">1659</span><br><span class="line">1660</span><br><span class="line">1661</span><br><span class="line">1662</span><br><span class="line">1663</span><br><span class="line">1664</span><br><span class="line">1665</span><br><span class="line">1666</span><br><span class="line">1667</span><br><span class="line">1668</span><br><span class="line">1669</span><br><span class="line">1670</span><br><span class="line">1671</span><br><span class="line">1672</span><br><span class="line">1673</span><br><span class="line">1674</span><br><span class="line">1675</span><br><span class="line">1676</span><br><span class="line">1677</span><br><span class="line">1678</span><br><span class="line">1679</span><br><span class="line">1680</span><br><span class="line">1681</span><br><span class="line">1682</span><br><span class="line">1683</span><br><span class="line">1684</span><br><span class="line">1685</span><br><span class="line">1686</span><br><span class="line">1687</span><br><span class="line">1688</span><br><span class="line">1689</span><br><span class="line">1690</span><br><span class="line">1691</span><br><span class="line">1692</span><br><span class="line">1693</span><br><span class="line">1694</span><br><span class="line">1695</span><br><span class="line">1696</span><br><span class="line">1697</span><br><span class="line">1698</span><br><span class="line">1699</span><br><span class="line">1700</span><br><span class="line">1701</span><br><span class="line">1702</span><br><span class="line">1703</span><br><span class="line">1704</span><br><span class="line">1705</span><br><span class="line">1706</span><br><span class="line">1707</span><br><span class="line">1708</span><br><span class="line">1709</span><br><span class="line">1710</span><br><span class="line">1711</span><br><span class="line">1712</span><br><span class="line">1713</span><br><span class="line">1714</span><br><span class="line">1715</span><br><span class="line">1716</span><br><span class="line">1717</span><br><span class="line">1718</span><br><span class="line">1719</span><br><span class="line">1720</span><br><span class="line">1721</span><br><span class="line">1722</span><br><span class="line">1723</span><br><span class="line">1724</span><br><span class="line">1725</span><br><span class="line">1726</span><br><span class="line">1727</span><br><span class="line">1728</span><br><span class="line">1729</span><br><span class="line">1730</span><br><span class="line">1731</span><br><span class="line">1732</span><br><span class="line">1733</span><br><span class="line">1734</span><br><span class="line">1735</span><br><span class="line">1736</span><br><span class="line">1737</span><br><span class="line">1738</span><br><span class="line">1739</span><br><span class="line">1740</span><br><span class="line">1741</span><br><span class="line">1742</span><br><span class="line">1743</span><br><span class="line">1744</span><br><span class="line">1745</span><br><span class="line">1746</span><br><span class="line">1747</span><br><span class="line">1748</span><br><span class="line">1749</span><br><span class="line">1750</span><br><span class="line">1751</span><br><span class="line">1752</span><br><span class="line">1753</span><br><span class="line">1754</span><br><span class="line">1755</span><br><span class="line">1756</span><br><span class="line">1757</span><br><span class="line">1758</span><br><span class="line">1759</span><br><span class="line">1760</span><br><span class="line">1761</span><br><span class="line">1762</span><br><span class="line">1763</span><br><span class="line">1764</span><br><span class="line">1765</span><br><span class="line">1766</span><br><span class="line">1767</span><br><span class="line">1768</span><br><span class="line">1769</span><br><span class="line">1770</span><br><span class="line">1771</span><br><span class="line">1772</span><br><span class="line">1773</span><br><span class="line">1774</span><br><span class="line">1775</span><br><span class="line">1776</span><br><span class="line">1777</span><br><span class="line">1778</span><br><span class="line">1779</span><br><span class="line">1780</span><br><span class="line">1781</span><br><span class="line">1782</span><br><span class="line">1783</span><br><span class="line">1784</span><br><span class="line">1785</span><br><span class="line">1786</span><br><span class="line">1787</span><br><span class="line">1788</span><br><span class="line">1789</span><br><span class="line">1790</span><br><span class="line">1791</span><br><span class="line">1792</span><br><span class="line">1793</span><br><span class="line">1794</span><br><span class="line">1795</span><br><span class="line">1796</span><br><span class="line">1797</span><br><span class="line">1798</span><br><span class="line">1799</span><br><span class="line">1800</span><br><span class="line">1801</span><br><span class="line">1802</span><br><span class="line">1803</span><br><span class="line">1804</span><br><span class="line">1805</span><br><span class="line">1806</span><br><span class="line">1807</span><br><span class="line">1808</span><br><span class="line">1809</span><br><span class="line">1810</span><br><span class="line">1811</span><br><span class="line">1812</span><br><span class="line">1813</span><br><span class="line">1814</span><br><span class="line">1815</span><br><span class="line">1816</span><br><span class="line">1817</span><br><span class="line">1818</span><br><span class="line">1819</span><br><span class="line">1820</span><br><span class="line">1821</span><br><span class="line">1822</span><br><span class="line">1823</span><br><span class="line">1824</span><br><span class="line">1825</span><br><span class="line">1826</span><br><span class="line">1827</span><br><span class="line">1828</span><br><span class="line">1829</span><br><span class="line">1830</span><br><span class="line">1831</span><br><span class="line">1832</span><br><span class="line">1833</span><br><span class="line">1834</span><br><span class="line">1835</span><br><span class="line">1836</span><br><span class="line">1837</span><br><span class="line">1838</span><br><span class="line">1839</span><br><span class="line">1840</span><br><span class="line">1841</span><br><span class="line">1842</span><br><span class="line">1843</span><br><span class="line">1844</span><br><span class="line">1845</span><br><span class="line">1846</span><br><span class="line">1847</span><br><span class="line">1848</span><br><span class="line">1849</span><br><span class="line">1850</span><br><span class="line">1851</span><br><span class="line">1852</span><br><span class="line">1853</span><br><span class="line">1854</span><br><span class="line">1855</span><br><span class="line">1856</span><br><span class="line">1857</span><br><span class="line">1858</span><br><span class="line">1859</span><br><span class="line">1860</span><br><span class="line">1861</span><br><span class="line">1862</span><br><span class="line">1863</span><br><span class="line">1864</span><br><span class="line">1865</span><br><span class="line">1866</span><br><span class="line">1867</span><br><span class="line">1868</span><br><span class="line">1869</span><br><span class="line">1870</span><br><span class="line">1871</span><br><span class="line">1872</span><br><span class="line">1873</span><br><span class="line">1874</span><br><span class="line">1875</span><br><span class="line">1876</span><br><span class="line">1877</span><br><span class="line">1878</span><br><span class="line">1879</span><br><span class="line">1880</span><br><span class="line">1881</span><br><span class="line">1882</span><br><span class="line">1883</span><br><span class="line">1884</span><br><span class="line">1885</span><br><span class="line">1886</span><br><span class="line">1887</span><br><span class="line">1888</span><br><span class="line">1889</span><br><span class="line">1890</span><br><span class="line">1891</span><br><span class="line">1892</span><br><span class="line">1893</span><br><span class="line">1894</span><br><span class="line">1895</span><br><span class="line">1896</span><br><span class="line">1897</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">if</span> (!<span class="title function_ invoke__">defined</span>(<span class="string">'__TYPECHO_ROOT_DIR__'</span>)) <span class="keyword">exit</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">themeConfig</span>(<span class="params"><span class="variable">$form</span></span>) </span>{</span><br><span class="line">    <span class="meta">?&gt;</span></span><br><span class="line">    &lt;link rel=<span class="string">"stylesheet"</span> href=<span class="string">"&lt;?php Helper::options()-&gt;themeUrl('css/themedash.css?v1.5.3'); ?&gt;"</span>&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span>='<span class="title">set_toc</span>' &gt;</span></span><br><span class="line"><span class="class">    &lt;<span class="title">div</span> <span class="title">class</span>='<span class="title">mtoc</span>'&gt;</span></span><br><span class="line"><span class="class">    &lt;<span class="title">a</span> <span class="title">href</span>='#<span class="title">themeBackup</span>'&gt;主题备份与还原&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;<span class="title">a</span> <span class="title">href</span>='#<span class="title">cids</span>'&gt;文章置顶及公共部分&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;<span class="title">a</span> <span class="title">href</span>='#<span class="title">pjax</span>'&gt;<span class="title">pjax</span>设置&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;<span class="title">a</span> <span class="title">href</span>='#<span class="title">friends</span>'&gt;友情链接设置&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;<span class="title">a</span> <span class="title">href</span>='#<span class="title">reward</span>'&gt;打赏功能&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;<span class="title">a</span> <span class="title">href</span>='#<span class="title">aside</span>'&gt;侧边栏显示设置&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;<span class="title">a</span> <span class="title">href</span>='#<span class="title">beautifyBlock</span>'&gt;美化选项&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;<span class="title">a</span> <span class="title">href</span>='#<span class="title">ShowLive2D</span>'&gt;<span class="title">Live2D</span>设置&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;<span class="title">a</span> <span class="title">href</span>='#<span class="title">otherCustom</span>'&gt;其他自定义内容&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;<span class="title">a</span> <span class="title">href</span>='#<span class="title">CustomColor</span>'&gt;自定义颜色&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;<span class="title">a</span> <span class="title">href</span>='#<span class="title">baidustatistics</span>'&gt;百度统计与谷歌广告&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;<span class="title">a</span> <span class="title">href</span>='#<span class="title">gxbeian</span>'&gt;备案填写&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;<span class="title">a</span> <span class="title">href</span>='#<span class="title">NULL</span>' <span class="title">id</span>='<span class="title">point</span>'&gt;返回上次保存设置时的锚点&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;/<span class="title">div</span>&gt;&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;<span class="title">form</span> <span class="title">class</span>="<span class="title">protected</span>" <span class="title">action</span>="?<span class="title">butterflybf</span>" <span class="title">method</span>="<span class="title">post</span>" <span class="title">id</span>="<span class="title">themeBackup</span>"&gt;</span></span><br><span class="line"><span class="class">        &lt;<span class="title">input</span> <span class="title">type</span>="<span class="title">submit</span>" <span class="title">name</span>="<span class="title">type</span>" <span class="title">class</span>="<span class="title">btn</span> <span class="title">btn</span>-<span class="title">s</span>" <span class="title">value</span>="备份主题数据" /&gt;&amp;<span class="title">nbsp</span>;&amp;<span class="title">nbsp</span>;&lt;<span class="title">input</span> <span class="title">type</span>="<span class="title">submit</span>" <span class="title">name</span>="<span class="title">type</span>" <span class="title">class</span>="<span class="title">btn</span> <span class="title">btn</span>-<span class="title">s</span>" <span class="title">value</span>="还原主题数据" /&gt;&amp;<span class="title">nbsp</span>;&amp;<span class="title">nbsp</span>;&lt;<span class="title">input</span> <span class="title">type</span>="<span class="title">submit</span>" <span class="title">name</span>="<span class="title">type</span>" <span class="title">class</span>="<span class="title">btn</span> <span class="title">btn</span>-<span class="title">s</span>" <span class="title">value</span>="删除备份数据" /&gt;&lt;/<span class="title">form</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;<span class="title">script</span> <span class="title">src</span>='<span class="title">https</span>://<span class="title">cdn</span>.<span class="title">staticfile</span>.<span class="title">org</span>/<span class="title">jquery</span>/1.10.2/<span class="title">jquery</span>.<span class="title">min</span>.<span class="title">js</span>'&gt;&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;<span class="title">script</span> <span class="title">src</span>="&lt;?<span class="title">php</span> <span class="title">Helper</span>::<span class="title">options</span>()-&gt;<span class="title">themeUrl</span>('<span class="title">js</span>/<span class="title">themecustom</span>.<span class="title">js</span>?<span class="title">v1</span>.5.3'); ?&gt;"&gt;&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;<span class="title">script</span> <span class="title">src</span>='<span class="title">https</span>://<span class="title">gcore</span>.<span class="title">jsdelivr</span>.<span class="title">net</span>/<span class="title">gh</span>/<span class="title">wehaox</span>/<span class="title">CDN</span>@<span class="title">main</span>/<span class="title">postdomai</span>.<span class="title">js</span>'&gt;&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;?<span class="title">php</span></span></span><br><span class="line"><span class="class">    $<span class="title">sticky_cids</span> = <span class="title">new</span> <span class="title">Typecho_Widget_Helper_Form_Element_Text</span>('<span class="title">sticky_cids</span>', <span class="title">NULL</span>, <span class="title">NULL</span>,'置顶文章的 <span class="title">cid</span>', '&lt;<span class="title">div</span> <span class="title">style</span>="<span class="title">font</span>-<span class="title">family</span>:<span class="title">arial</span>; <span class="title">background</span>:#<span class="title">E8EFD1</span>; <span class="title">padding</span>:8<span class="title">px</span>"&gt;按照排序输入, 请以半角逗号或空格分隔 <span class="title">cid</span>&lt;/<span class="title">div</span>&gt;');</span></span><br><span class="line"><span class="class">    $<span class="title">sticky_cids</span>-&gt;<span class="title">setAttribute</span>('<span class="title">id</span>', '<span class="title">cids</span>');</span></span><br><span class="line"><span class="class">    $<span class="title">form</span>-&gt;<span class="title">addInput</span>($<span class="title">sticky_cids</span>);</span></span><br><span class="line"><span class="class">    </span></span><br><span class="line"><span class="class">    $<span class="title">slide_cids</span> = <span class="title">new</span> <span class="title">Typecho_Widget_Helper_Form_Element_Text</span>('<span class="title">slide_cids</span>', <span class="title">NULL</span>, <span class="title">NULL</span>,'主页轮播图文章的 <span class="title">cid</span>', '填入自动开启，填入方式同上，&lt;<span class="title">b</span> <span class="title">style</span>="<span class="title">color</span>:<span class="title">red</span>"&gt;注意：填入错误<span class="title">cid</span>会导致页面出错&lt;/<span class="title">b</span>&gt;');</span></span><br><span class="line"><span class="class">    $<span class="title">form</span>-&gt;<span class="title">addInput</span>($<span class="title">slide_cids</span>);    </span></span><br><span class="line"><span class="class">    </span></span><br><span class="line"><span class="class">    $<span class="title">StaticFile</span> = <span class="title">new</span> <span class="title">Typecho_Widget_Helper_Form_Element_Select</span>('<span class="title">StaticFile</span>',</span></span><br><span class="line"><span class="class">        <span class="title">array</span>(</span></span><br><span class="line"><span class="class">            '<span class="title">CDN</span>' =&gt; '<span class="title">CDN</span>加载(默认)',</span></span><br><span class="line"><span class="class">            '<span class="title">local</span>' =&gt; '本地加载',</span></span><br><span class="line"><span class="class">        ),</span></span><br><span class="line"><span class="class">        '<span class="title">CDN</span>',</span></span><br><span class="line"><span class="class">        '博客静态资源加载方式',</span></span><br><span class="line"><span class="class">        '介绍：无网络服务器或者<span class="title">CDN</span>炸了可开启此项&lt;<span class="title">br</span>&gt;</span></span><br><span class="line"><span class="class">         将博客静态资源，如<span class="title">js</span>、<span class="title">css</span>、图片从服务器加载(会稍微增加服务器流量消耗)&lt;<span class="title">br</span>&gt;</span></span><br><span class="line"><span class="class">         注意：你需要额外&lt;<span class="title">a</span> <span class="title">href</span>="<span class="title">https</span>://<span class="title">github</span>.<span class="title">com</span>/<span class="title">wehaox</span>/<span class="title">Typecho</span>-<span class="title">Butterfly</span>/<span class="title">releases</span>"&gt;下载&lt;/<span class="title">a</span>&gt;对应版本的静态资源放进主题根目录直接解压即可&lt;<span class="title">br</span>&gt;</span></span><br><span class="line"><span class="class">         此文件与下方的自定义<span class="title">CDN</span>文件通用'</span></span><br><span class="line"><span class="class">    );</span></span><br><span class="line"><span class="class">    $<span class="title">form</span>-&gt;<span class="title">addInput</span>($<span class="title">StaticFile</span>-&gt;<span class="title">multiMode</span>());</span></span><br><span class="line"><span class="class">    </span></span><br><span class="line"><span class="class">    </span></span><br><span class="line"><span class="class">    $<span class="title">CDNURL</span> = <span class="title">new</span> <span class="title">Typecho_Widget_Helper_Form_Element_Text</span>('<span class="title">CDNURL</span>',<span class="title">NULL</span>,<span class="title">NULL</span>,</span></span><br><span class="line"><span class="class">    '自定义<span class="title">CDNURL</span>(由@<span class="title">origami</span>-<span class="title">tech</span>提供)',</span></span><br><span class="line"><span class="class">    '需要选择博客静态资源加载方式为<span class="title">CDN</span>加载 此项才会生效 且&lt;<span class="title">b</span>&gt;本地加载&gt;自定义<span class="title">CDNURL</span>&gt;<span class="title">jsdelivr</span>源&lt;/<span class="title">b</span>&gt;&lt;<span class="title">br</span>&gt;</span></span><br><span class="line"><span class="class">    注意：你需要额外&lt;<span class="title">a</span> <span class="title">href</span>="<span class="title">https</span>://<span class="title">github</span>.<span class="title">com</span>/<span class="title">wehaox</span>/<span class="title">Typecho</span>-<span class="title">Butterfly</span>/<span class="title">releases</span>"&gt;下载&lt;/<span class="title">a</span>&gt;静态资源放<span class="title">CDN</span>解压&lt;<span class="title">br</span>&gt;</span></span><br><span class="line"><span class="class">    链接填写规则：填写<span class="title">static</span>文件夹的父文件夹 无需最后的/ 例如 <span class="title">https</span>://<span class="title">pub</span>-<span class="title">gcdn</span>.<span class="title">starsdust</span>.<span class="title">cn</span>/<span class="title">libs</span>/<span class="title">butterfly</span> '</span></span><br><span class="line"><span class="class">    );</span></span><br><span class="line"><span class="class">    $<span class="title">form</span>-&gt;<span class="title">addInput</span>($<span class="title">CDNURL</span>);</span></span><br><span class="line"><span class="class">    </span></span><br><span class="line"><span class="class">    $<span class="title">jsdelivrLink</span> = <span class="title">new</span> <span class="title">Typecho_Widget_Helper_Form_Element_Select</span>('<span class="title">jsdelivrLink</span>',</span></span><br><span class="line"><span class="class">        <span class="title">array</span>(</span></span><br><span class="line"><span class="class">            '<span class="title">cdn</span>.<span class="title">jsdelivr</span>.<span class="title">net</span>' =&gt; '官方默认源',</span></span><br><span class="line"><span class="class">            '<span class="title">gcore</span>.<span class="title">jsdelivr</span>.<span class="title">net</span>' =&gt; '<span class="title">gcore</span>源',</span></span><br><span class="line"><span class="class">            '<span class="title">fastly</span>.<span class="title">jsdelivr</span>.<span class="title">net</span>' =&gt; '<span class="title">fastly</span>源',</span></span><br><span class="line"><span class="class">            '<span class="title">raw</span>.<span class="title">fastgit</span>.<span class="title">org</span>' =&gt; '<span class="title">fastgit</span>源',</span></span><br><span class="line"><span class="class">        ),</span></span><br><span class="line"><span class="class">        '<span class="title">gcore</span>.<span class="title">jsdelivr</span>.<span class="title">net</span>',</span></span><br><span class="line"><span class="class">        '<span class="title">jsdelivr</span>提供的<span class="title">cdn</span>源切换(默认采用<span class="title">gcore</span>源)',</span></span><br><span class="line"><span class="class">        '需要开启上方的<span class="title">CDN</span>加载'</span></span><br><span class="line"><span class="class">    );</span></span><br><span class="line"><span class="class">    $<span class="title">form</span>-&gt;<span class="title">addInput</span>($<span class="title">jsdelivrLink</span>-&gt;<span class="title">multiMode</span>());</span></span><br><span class="line"><span class="class">    </span></span><br><span class="line"><span class="class">    $<span class="title">NewTabLink</span> = <span class="title">new</span> <span class="title">Typecho_Widget_Helper_Form_Element_Select</span>('<span class="title">NewTabLink</span>',</span></span><br><span class="line"><span class="class">        <span class="title">array</span>(</span></span><br><span class="line"><span class="class">            '<span class="title">on</span>' =&gt; '开启（默认）',</span></span><br><span class="line"><span class="class">            '<span class="title">off</span>' =&gt; '关闭',</span></span><br><span class="line"><span class="class">        ),</span></span><br><span class="line"><span class="class">        '<span class="title">on</span>',</span></span><br><span class="line"><span class="class">        '是否开启新标签打开外部链接',</span></span><br><span class="line"><span class="class">        '介绍：非站内链接在新标签打开'</span></span><br><span class="line"><span class="class">    );</span></span><br><span class="line"><span class="class">    $<span class="title">form</span>-&gt;<span class="title">addInput</span>($<span class="title">NewTabLink</span>-&gt;<span class="title">multiMode</span>());</span></span><br><span class="line"><span class="class">    </span></span><br><span class="line"><span class="class">    $<span class="title">showFramework</span> = <span class="title">new</span> <span class="title">Typecho_Widget_Helper_Form_Element_Select</span>('<span class="title">showFramework</span>',</span></span><br><span class="line"><span class="class">        <span class="title">array</span>(</span></span><br><span class="line"><span class="class">            '<span class="title">on</span>' =&gt; '开启（默认）',</span></span><br><span class="line"><span class="class">            '<span class="title">off</span>' =&gt; '关闭',</span></span><br><span class="line"><span class="class">        ),</span></span><br><span class="line"><span class="class">        '<span class="title">on</span>',</span></span><br><span class="line"><span class="class">        '是否显示底部博客框架和主题',</span></span><br><span class="line"><span class="class">        '介绍：如果你是小白自行修改主题名会导致侵权提示，你可以在这里关闭同时希望你可以&lt;<span class="title">b</span>&gt;尊重本主题&lt;/<span class="title">b</span>&gt;'</span></span><br><span class="line"><span class="class">    );</span></span><br><span class="line"><span class="class">    $<span class="title">form</span>-&gt;<span class="title">addInput</span>($<span class="title">showFramework</span>-&gt;<span class="title">multiMode</span>());</span></span><br><span class="line"><span class="class">    </span></span><br><span class="line"><span class="class">    $<span class="title">Defend</span> = <span class="title">new</span> <span class="title">Typecho_Widget_Helper_Form_Element_Select</span>(</span></span><br><span class="line"><span class="class">        '<span class="title">Defend</span>',</span></span><br><span class="line"><span class="class">        <span class="title">array</span>('<span class="title">off</span>' =&gt; '关闭（默认）', '<span class="title">on</span>' =&gt; '开启'),</span></span><br><span class="line"><span class="class">        '<span class="title">off</span>',</span></span><br><span class="line"><span class="class">        '是否开启网站维护或密码访问',</span></span><br><span class="line"><span class="class">        '介绍： 下方密码留空则显示网站维护否则显示输入密码访问，登录用户不受限制'</span></span><br><span class="line"><span class="class">    );</span></span><br><span class="line"><span class="class">    $<span class="title">form</span>-&gt;<span class="title">addInput</span>($<span class="title">Defend</span>-&gt;<span class="title">multiMode</span>());</span></span><br><span class="line"><span class="class">    </span></span><br><span class="line"><span class="class">    $<span class="title">ThemePassword</span> = <span class="title">new</span> <span class="title">Typecho_Widget_Helper_Form_Element_Text</span>('<span class="title">ThemePassword</span>', <span class="title">NULL</span>,<span class="title">NULL</span>, <span class="title">_t</span>('全站密码访问(非必填)'), <span class="title">_t</span>('输入访问网站的密码，&lt;<span class="title">b</span>&gt;需要在上方开启网站维护或密码访问&lt;/<span class="title">b</span>&gt;'));</span></span><br><span class="line"><span class="class">    $<span class="title">form</span>-&gt;<span class="title">addInput</span>($<span class="title">ThemePassword</span>);</span></span><br><span class="line"><span class="class">    </span></span><br><span class="line"><span class="class">     $<span class="title">NoQQ</span> = <span class="title">new</span> <span class="title">Typecho_Widget_Helper_Form_Element_Select</span>(</span></span><br><span class="line"><span class="class">        '<span class="title">NoQQ</span>',</span></span><br><span class="line"><span class="class">        <span class="title">array</span>('<span class="title">off</span>' =&gt; '关闭（默认）', '<span class="title">on</span>' =&gt; '开启'),</span></span><br><span class="line"><span class="class">        '<span class="title">off</span>',</span></span><br><span class="line"><span class="class">        '是否开启网站禁止手机<span class="title">QQ</span>访问',</span></span><br><span class="line"><span class="class">        '介绍：烦人的<span class="title">QQ</span>'</span></span><br><span class="line"><span class="class">    );</span></span><br><span class="line"><span class="class">    $<span class="title">form</span>-&gt;<span class="title">addInput</span>($<span class="title">NoQQ</span>-&gt;<span class="title">multiMode</span>());</span></span><br><span class="line"><span class="class">    </span></span><br><span class="line"><span class="class">    $<span class="title">SiteLogo</span> = <span class="title">new</span> <span class="title">Typecho_Widget_Helper_Form_Element_Text</span>('<span class="title">SiteLogo</span>', <span class="title">NULL</span>, <span class="title">NULL</span>, <span class="title">_t</span>('站点名称设置为图片<span class="title">logo</span>(非必填)'), <span class="title">_t</span>('当设置此项时站点名称将不会在导航栏左上角显示,使用<span class="title">png</span>格式'));</span></span><br><span class="line"><span class="class">    $<span class="title">form</span>-&gt;<span class="title">addInput</span>($<span class="title">SiteLogo</span>);    </span></span><br><span class="line"><span class="class">    </span></span><br><span class="line"><span class="class">    $<span class="title">Sitefavicon</span> = <span class="title">new</span> <span class="title">Typecho_Widget_Helper_Form_Element_Text</span>('<span class="title">Sitefavicon</span>', <span class="title">NULL</span>, <span class="title">NULL</span>, <span class="title">_t</span>('网站图标'), <span class="title">_t</span>('网站图标，使用<span class="title">png</span>格式，大小建议不超过64<span class="title">x64</span>'));</span></span><br><span class="line"><span class="class">    $<span class="title">form</span>-&gt;<span class="title">addInput</span>($<span class="title">Sitefavicon</span>);</span></span><br><span class="line"><span class="class">    </span></span><br><span class="line"><span class="class">    $<span class="title">logoUrl</span> = <span class="title">new</span> <span class="title">Typecho_Widget_Helper_Form_Element_Text</span>('<span class="title">logoUrl</span>', <span class="title">NULL</span>,<span class="title">_t</span>('#<span class="title">null</span>'), <span class="title">_t</span>('作者头像'), <span class="title">_t</span>('在这里填入图片地址，它会显示在右侧栏的作者头像'));</span></span><br><span class="line"><span class="class">    $<span class="title">form</span>-&gt;<span class="title">addInput</span>($<span class="title">logoUrl</span>);</span></span><br><span class="line"><span class="class">    </span></span><br><span class="line"><span class="class">    $<span class="title">author_description</span> = <span class="title">new</span> <span class="title">Typecho_Widget_Helper_Form_Element_Text</span>('<span class="title">author_description</span>', <span class="title">NULL</span>, <span class="title">_t</span>('作者描述'), <span class="title">_t</span>('作者描述'), <span class="title">_t</span>('在这里填入站点描述，它会显示在右侧栏的作者信息'));</span></span><br><span class="line"><span class="class">    $<span class="title">form</span>-&gt;<span class="title">addInput</span>($<span class="title">author_description</span>);</span></span><br><span class="line"><span class="class">    </span></span><br><span class="line"><span class="class">    $<span class="title">author_site_description</span> = <span class="title">new</span> <span class="title">Typecho_Widget_Helper_Form_Element_Text</span>('<span class="title">author_site_description</span>', <span class="title">NULL</span>,<span class="title">_t</span>('个人网站'), <span class="title">_t</span>('作者链接描述'), <span class="title">_t</span>('作者链接描述'));</span></span><br><span class="line"><span class="class">    $<span class="title">form</span>-&gt;<span class="title">addInput</span>($<span class="title">author_site_description</span>);</span></span><br><span class="line"><span class="class">    </span></span><br><span class="line"><span class="class">    $<span class="title">author_site</span> = <span class="title">new</span> <span class="title">Typecho_Widget_Helper_Form_Element_Text</span>('<span class="title">author_site</span>', <span class="title">NULL</span>, <span class="title">_t</span>('#<span class="title">null</span>'), <span class="title">_t</span>('作者链接'), <span class="title">_t</span>('在这里填入作者链接，它会显示在右侧栏的作者信息的个人网站上'));</span></span><br><span class="line"><span class="class">    $<span class="title">form</span>-&gt;<span class="title">addInput</span>($<span class="title">author_site</span>);</span></span><br><span class="line"><span class="class">    </span></span><br><span class="line"><span class="class">    $<span class="title">author_bottom</span> = <span class="title">new</span> <span class="title">Typecho_Widget_Helper_Form_Element_Textarea</span>('<span class="title">author_bottom</span>', <span class="title">NULL</span>, <span class="title">_t</span>(''), <span class="title">_t</span>('侧栏作者信息最底部内容（非必填）'), <span class="title">_t</span>('这里填入<span class="title">html</span>代码,不会勿填'));</span></span><br><span class="line"><span class="class">    $<span class="title">form</span>-&gt;<span class="title">addInput</span>($<span class="title">author_bottom</span>);</span></span><br><span class="line"><span class="class">    </span></span><br><span class="line"><span class="class">    $<span class="title">announcement</span> = <span class="title">new</span> <span class="title">Typecho_Widget_Helper_Form_Element_Textarea</span>('<span class="title">announcement</span>', <span class="title">NULL</span>, <span class="title">_t</span>('这里是公告&lt;<span class="title">br</span>&gt;'), <span class="title">_t</span>('公告'), <span class="title">_t</span>('在这里填入公告，它会显示在右侧栏的公告上,采用<span class="title">html</span>写法'));</span></span><br><span class="line"><span class="class">    $<span class="title">form</span>-&gt;<span class="title">addInput</span>($<span class="title">announcement</span>);</span></span><br><span class="line"><span class="class">    </span></span><br><span class="line"><span class="class">    $<span class="title">AD</span> = <span class="title">new</span> <span class="title">Typecho_Widget_Helper_Form_Element_Textarea</span>('<span class="title">AD</span>', <span class="title">NULL</span>, <span class="title">NULL</span>, <span class="title">_t</span>('广告(由@<span class="title">yzl3014</span>提供)'), <span class="title">_t</span>('在这里填入广告，填入后自动显示在侧栏中公告栏的下方，支持<span class="title">html</span>'));</span></span><br><span class="line"><span class="class">    $<span class="title">form</span>-&gt;<span class="title">addInput</span>($<span class="title">AD</span>);</span></span><br><span class="line"><span class="class">    </span></span><br><span class="line"><span class="class">    $<span class="title">headerimg</span> = <span class="title">new</span> <span class="title">Typecho_Widget_Helper_Form_Element_Text</span>('<span class="title">headerimg</span>', <span class="title">NULL</span>,<span class="title">_t</span>('<span class="title">https</span>://<span class="title">s2</span>.<span class="title">loli</span>.<span class="title">net</span>/2023/01/18/<span class="title">bIJTVaR3MLPzcZ7</span>.<span class="title">jpg</span>'), <span class="title">_t</span>('主页顶图(<span class="title">banner</span> <span class="title">image</span>)'), <span class="title">_t</span>('填入主页头图链接'));</span></span><br><span class="line"><span class="class">    $<span class="title">form</span>-&gt;<span class="title">addInput</span>($<span class="title">headerimg</span>);</span></span><br><span class="line"><span class="class">    </span></span><br><span class="line"><span class="class">    $<span class="title">buildtime</span> = <span class="title">new</span> <span class="title">Typecho_Widget_Helper_Form_Element_Text</span>('<span class="title">buildtime</span>', <span class="title">NULL</span>,<span class="title">_t</span>('2021/04/05'), <span class="title">_t</span>('建站时间'), <span class="title">_t</span>('按照输入框内格式填写'));</span></span><br><span class="line"><span class="class">    $<span class="title">form</span>-&gt;<span class="title">addInput</span>($<span class="title">buildtime</span>);</span></span><br><span class="line"><span class="class">    </span></span><br><span class="line"><span class="class">    $<span class="title">outoftime</span> = <span class="title">new</span> <span class="title">Typecho_Widget_Helper_Form_Element_Text</span>('<span class="title">outoftime</span>', <span class="title">NULL</span>,<span class="title">_t</span>('15'), <span class="title">_t</span>('文章过时提醒'), <span class="title">_t</span>('设置文章过时提醒最大天数，默认15天，可在文章管理单独设置是否显示过期提醒'));</span></span><br><span class="line"><span class="class">    $<span class="title">form</span>-&gt;<span class="title">addInput</span>($<span class="title">outoftime</span>);</span></span><br><span class="line"><span class="class">    </span></span><br><span class="line"><span class="class">    $<span class="title">archivelink</span> = <span class="title">new</span> <span class="title">Typecho_Widget_Helper_Form_Element_Text</span>('<span class="title">archivelink</span>', <span class="title">NULL</span>,<span class="title">_t</span>('#<span class="title">null</span>'), <span class="title">_t</span>('侧栏文章(归档)链接'), <span class="title">_t</span>('需在独立页面创建并手动填入链接'));</span></span><br><span class="line"><span class="class">    $<span class="title">form</span>-&gt;<span class="title">addInput</span>($<span class="title">archivelink</span>);</span></span><br><span class="line"><span class="class">    </span></span><br><span class="line"><span class="class">    $<span class="title">tagslink</span> = <span class="title">new</span> <span class="title">Typecho_Widget_Helper_Form_Element_Text</span>('<span class="title">tagslink</span>', <span class="title">NULL</span>,<span class="title">_t</span>('#<span class="title">null</span>'), <span class="title">_t</span>('侧栏标签链接'), <span class="title">_t</span>('需在独立页面创建并手动填入链接'));</span></span><br><span class="line"><span class="class">    $<span class="title">form</span>-&gt;<span class="title">addInput</span>($<span class="title">tagslink</span>);</span></span><br><span class="line"><span class="class">    </span></span><br><span class="line"><span class="class">    $<span class="title">categorylink</span> = <span class="title">new</span> <span class="title">Typecho_Widget_Helper_Form_Element_Text</span>('<span class="title">categorylink</span>', <span class="title">NULL</span>,<span class="title">_t</span>('#<span class="title">null</span>'), <span class="title">_t</span>('侧栏分类链接'), <span class="title">_t</span>('需在独立页面创建并手动填入链接'));</span></span><br><span class="line"><span class="class">    $<span class="title">form</span>-&gt;<span class="title">addInput</span>($<span class="title">categorylink</span>);</span></span><br><span class="line"><span class="class">    </span></span><br><span class="line"><span class="class">    </span></span><br><span class="line"><span class="class">    $<span class="title">CloseComments</span> = <span class="title">new</span> <span class="title">Typecho_Widget_Helper_Form_Element_Select</span>('<span class="title">CloseComments</span>',</span></span><br><span class="line"><span class="class">    <span class="title">array</span>(</span></span><br><span class="line"><span class="class">        '<span class="title">off</span>' =&gt; '关闭（默认）',</span></span><br><span class="line"><span class="class">        "<span class="title">on</span>" =&gt; '开启'</span></span><br><span class="line"><span class="class">        ),</span></span><br><span class="line"><span class="class">        '<span class="title">off</span>',</span></span><br><span class="line"><span class="class">        '全站关闭评论',</span></span><br><span class="line"><span class="class">        '介绍：开启后所有文章不能评论'</span></span><br><span class="line"><span class="class">    );</span></span><br><span class="line"><span class="class">    $<span class="title">form</span>-&gt;<span class="title">addInput</span>($<span class="title">CloseComments</span>-&gt;<span class="title">multiMode</span>());    </span></span><br><span class="line"><span class="class">    </span></span><br><span class="line"><span class="class">    $<span class="title">EnableCommentsLogin</span> = <span class="title">new</span> <span class="title">Typecho_Widget_Helper_Form_Element_Select</span>('<span class="title">EnableCommentsLogin</span>',</span></span><br><span class="line"><span class="class">    <span class="title">array</span>(</span></span><br><span class="line"><span class="class">        '<span class="title">off</span>' =&gt; '关闭（默认）',</span></span><br><span class="line"><span class="class">        "<span class="title">on</span>" =&gt; '开启'</span></span><br><span class="line"><span class="class">        ),</span></span><br><span class="line"><span class="class">        '<span class="title">off</span>',</span></span><br><span class="line"><span class="class">        '开启用户评论区登录',</span></span><br><span class="line"><span class="class">        '介绍：开启后在评论区会显示登录按钮</span></span><br><span class="line"><span class="class">        '</span></span><br><span class="line"><span class="class">    );</span></span><br><span class="line"><span class="class">    $<span class="title">form</span>-&gt;<span class="title">addInput</span>($<span class="title">EnableCommentsLogin</span>-&gt;<span class="title">multiMode</span>());</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">    $<span class="title">ShowRelatedPosts</span> = <span class="title">new</span> <span class="title">Typecho_Widget_Helper_Form_Element_Select</span>('<span class="title">ShowRelatedPosts</span>',</span></span><br><span class="line"><span class="class">        <span class="title">array</span>(</span></span><br><span class="line"><span class="class">            '<span class="title">off</span>' =&gt; '关闭（默认）',</span></span><br><span class="line"><span class="class">            '<span class="title">on</span>' =&gt; '开启',</span></span><br><span class="line"><span class="class">        ),</span></span><br><span class="line"><span class="class">        '<span class="title">off</span>',</span></span><br><span class="line"><span class="class">        '是否显示文章内相关推荐',</span></span><br><span class="line"><span class="class">        '介绍：开启后文章结束后会显示相关的推荐文章(根据文章标签推荐，不一定每篇文章都会显示)'</span></span><br><span class="line"><span class="class">    );</span></span><br><span class="line"><span class="class">    $<span class="title">form</span>-&gt;<span class="title">addInput</span>($<span class="title">ShowRelatedPosts</span>-&gt;<span class="title">multiMode</span>());</span></span><br><span class="line"><span class="class">    </span></span><br><span class="line"><span class="class">    $<span class="title">RelatedPostsNum</span> = <span class="title">new</span> <span class="title">Typecho_Widget_Helper_Form_Element_Select</span>('<span class="title">RelatedPostsNum</span>',</span></span><br><span class="line"><span class="class">        <span class="title">array</span>(</span></span><br><span class="line"><span class="class">            '3' =&gt; '3篇（默认）',</span></span><br><span class="line"><span class="class">            '6' =&gt; '6篇',</span></span><br><span class="line"><span class="class">        ),</span></span><br><span class="line"><span class="class">        '3',</span></span><br><span class="line"><span class="class">        '相关推荐显示数量',</span></span><br><span class="line"><span class="class">        '介绍：最多显示3篇或者6篇相关推荐文章'</span></span><br><span class="line"><span class="class">    );</span></span><br><span class="line"><span class="class">    $<span class="title">form</span>-&gt;<span class="title">addInput</span>($<span class="title">RelatedPostsNum</span>-&gt;<span class="title">multiMode</span>());</span></span><br><span class="line"><span class="class">    </span></span><br><span class="line"><span class="class">    $<span class="title">DefaultEncoding</span> = <span class="title">new</span> <span class="title">Typecho_Widget_Helper_Form_Element_Select</span>('<span class="title">DefaultEncoding</span>',</span></span><br><span class="line"><span class="class">        <span class="title">array</span>(</span></span><br><span class="line"><span class="class">            '2' =&gt; '简体（默认）',</span></span><br><span class="line"><span class="class">            '1' =&gt; '繁体',</span></span><br><span class="line"><span class="class">        ),</span></span><br><span class="line"><span class="class">        '2',</span></span><br><span class="line"><span class="class">        '博客默认字体',</span></span><br><span class="line"><span class="class">        '介绍：如果你使用繁体写文章请选择繁体'</span></span><br><span class="line"><span class="class">    );</span></span><br><span class="line"><span class="class">    $<span class="title">form</span>-&gt;<span class="title">addInput</span>($<span class="title">DefaultEncoding</span>-&gt;<span class="title">multiMode</span>());</span></span><br><span class="line"><span class="class">    </span></span><br><span class="line"><span class="class">    $<span class="title">GravatarSelect</span> = <span class="title">new</span> <span class="title">Typecho_Widget_Helper_Form_Element_Select</span>('<span class="title">GravatarSelect</span>',</span></span><br><span class="line"><span class="class">    <span class="title">array</span>(</span></span><br><span class="line"><span class="class">        "<span class="title">https</span>://<span class="title">gravatar</span>.<span class="title">loli</span>.<span class="title">net</span>/<span class="title">avatar</span>/" =&gt; '<span class="title">loli</span>（默认）',</span></span><br><span class="line"><span class="class">        '<span class="title">https</span>://<span class="title">gravatar</span>.<span class="title">helingqi</span>.<span class="title">com</span>/<span class="title">wavatar</span>/' =&gt; '禾令奇',</span></span><br><span class="line"><span class="class">        "<span class="title">https</span>://<span class="title">sdn</span>.<span class="title">geekzu</span>.<span class="title">org</span>/<span class="title">avatar</span>/" =&gt; '极客族',</span></span><br><span class="line"><span class="class">        "<span class="title">https</span>://<span class="title">cdn</span>.<span class="title">sep</span>.<span class="title">cc</span>/<span class="title">avatar</span>/" =&gt; '九月的风',</span></span><br><span class="line"><span class="class">        "<span class="title">https</span>://<span class="title">gravatar</span>.<span class="title">com</span>/<span class="title">avatar</span>/" =&gt; '官方源(被墙)',</span></span><br><span class="line"><span class="class">        "<span class="title">https</span>://<span class="title">cravatar</span>.<span class="title">cn</span>/<span class="title">avatar</span>/" =&gt; '中国官方源(推荐)',</span></span><br><span class="line"><span class="class">        ),</span></span><br><span class="line"><span class="class">        '<span class="title">loli</span>',</span></span><br><span class="line"><span class="class">        '<span class="title">gravatar</span>源选择',</span></span><br><span class="line"><span class="class">        '介绍：评论区头像<span class="title">gravatar</span>源'</span></span><br><span class="line"><span class="class">    );</span></span><br><span class="line"><span class="class">    $<span class="title">GravatarSelect</span>-&gt;<span class="title">setAttribute</span>('<span class="title">id</span>', '<span class="title">gravatarlist</span>');</span></span><br><span class="line"><span class="class">    $<span class="title">form</span>-&gt;<span class="title">addInput</span>($<span class="title">GravatarSelect</span>-&gt;<span class="title">multiMode</span>());</span></span><br><span class="line"><span class="class">    </span></span><br><span class="line"><span class="class">    $<span class="title">baidustatistics</span> = <span class="title">new</span> <span class="title">Typecho_Widget_Helper_Form_Element_Text</span>('<span class="title">baidustatistics</span>', <span class="title">NULL</span>,<span class="title">_t</span>(''), <span class="title">_t</span>('百度统计'), <span class="title">_t</span>('仅需要<span class="title">https</span>://<span class="title">hm</span>.<span class="title">baidu</span>.<span class="title">com</span>/<span class="title">hm</span>.<span class="title">js</span>?<span class="title">xxxxxxxxxxxxxxxxxx</span>部分即可'));</span></span><br><span class="line"><span class="class">    $<span class="title">baidustatistics</span>-&gt;<span class="title">setAttribute</span>('<span class="title">id</span>', '<span class="title">baidustatistics</span>');</span></span><br><span class="line"><span class="class">    $<span class="title">form</span>-&gt;<span class="title">addInput</span>($<span class="title">baidustatistics</span>);</span></span><br><span class="line"><span class="class">    </span></span><br><span class="line"><span class="class">    $<span class="title">googleadsense</span> = <span class="title">new</span> <span class="title">Typecho_Widget_Helper_Form_Element_Text</span>('<span class="title">googleadsense</span>', <span class="title">NULL</span>,<span class="title">_t</span>(''), <span class="title">_t</span>('谷歌广告'), <span class="title">_t</span>('仅需要<span class="title">https</span>://<span class="title">pagead2</span>.<span class="title">googlesyndication</span>.<span class="title">com</span>/<span class="title">pagead</span>/<span class="title">js</span>/<span class="title">adsbygoogle</span>.<span class="title">js</span>?<span class="title">xxxxxxxxx</span>部分即可'));</span></span><br><span class="line"><span class="class">    $<span class="title">form</span>-&gt;<span class="title">addInput</span>($<span class="title">googleadsense</span>);</span></span><br><span class="line"><span class="class">    </span></span><br><span class="line"><span class="class">    $<span class="title">gxbeian</span> = <span class="title">new</span> <span class="title">Typecho_Widget_Helper_Form_Element_Text</span>('<span class="title">gxbeian</span>', <span class="title">NULL</span>,<span class="title">_t</span>(''), <span class="title">_t</span>('工信部备案'), <span class="title">_t</span>('仅填写备案号即可,除广东省地区其他地区必须带-(数字),如果还不懂请点击&lt;<span class="title">a</span> <span class="title">href</span>="<span class="title">https</span>://<span class="title">help</span>.<span class="title">aliyun</span>.<span class="title">com</span>/<span class="title">document_detail</span>/137270.<span class="title">htm</span>"&gt;这里&lt;/<span class="title">a</span>&gt;'));</span></span><br><span class="line"><span class="class">    $<span class="title">gxbeian</span>-&gt;<span class="title">setAttribute</span>('<span class="title">id</span>', '<span class="title">gxbeian</span>');</span></span><br><span class="line"><span class="class">    $<span class="title">form</span>-&gt;<span class="title">addInput</span>($<span class="title">gxbeian</span>);</span></span><br><span class="line"><span class="class">    </span></span><br><span class="line"><span class="class">    $<span class="title">gabeian</span> = <span class="title">new</span> <span class="title">Typecho_Widget_Helper_Form_Element_Text</span>('<span class="title">gabeian</span>', <span class="title">NULL</span>,<span class="title">_t</span>(''), <span class="title">_t</span>('公安备案'), <span class="title">_t</span>('仅填写备案号即可不懂请点击&lt;<span class="title">a</span> <span class="title">href</span>="<span class="title">http</span>://<span class="title">wap</span>.<span class="title">qianfanyun</span>.<span class="title">com</span>/<span class="title">help</span>/1397"&gt;这里&lt;/<span class="title">a</span>&gt;'));</span></span><br><span class="line"><span class="class">    $<span class="title">form</span>-&gt;<span class="title">addInput</span>($<span class="title">gabeian</span>);</span></span><br><span class="line"><span class="class">    </span></span><br><span class="line"><span class="class">    $<span class="title">moebeian</span> = <span class="title">new</span> <span class="title">Typecho_Widget_Helper_Form_Element_Text</span>('<span class="title">moebeian</span>', <span class="title">NULL</span>,<span class="title">_t</span>(''), <span class="title">_t</span>('萌国备案'), <span class="title">_t</span>('娱乐使用，申请点击&lt;<span class="title">a</span> <span class="title">href</span>="<span class="title">https</span>://<span class="title">icp</span>.<span class="title">gov</span>.<span class="title">moe</span>/"&gt;这里&lt;/<span class="title">a</span>&gt;'));</span></span><br><span class="line"><span class="class">    $<span class="title">form</span>-&gt;<span class="title">addInput</span>($<span class="title">moebeian</span>);</span></span><br><span class="line"><span class="class">    </span></span><br><span class="line"><span class="class">    $<span class="title">EnablePjax</span> = <span class="title">new</span> <span class="title">Typecho_Widget_Helper_Form_Element_Select</span>('<span class="title">EnablePjax</span>',</span></span><br><span class="line"><span class="class">    <span class="title">array</span>(</span></span><br><span class="line"><span class="class">        '<span class="title">off</span>' =&gt; '关闭（默认）',</span></span><br><span class="line"><span class="class">        "<span class="title">on</span>" =&gt; '开启'</span></span><br><span class="line"><span class="class">        ),</span></span><br><span class="line"><span class="class">        '<span class="title">off</span>',</span></span><br><span class="line"><span class="class">        '开启<span class="title">PJAX</span>',</span></span><br><span class="line"><span class="class">        '介绍：页面无刷新加载,有效提高页面加载速度&lt;<span class="title">br</span>&gt;</span></span><br><span class="line"><span class="class">         请先查看&lt;<span class="title">a</span> <span class="title">href</span>="<span class="title">https</span>://<span class="title">blog</span>.<span class="title">wehaox</span>.<span class="title">com</span>/<span class="title">archives</span>/<span class="title">typecho</span>-<span class="title">butterfly</span>.<span class="title">html</span>#<span class="title">cl</span>-13"&gt;使用文档&lt;/<span class="title">a</span>&gt;'</span></span><br><span class="line"><span class="class">    );</span></span><br><span class="line"><span class="class">    $<span class="title">EnablePjax</span>-&gt;<span class="title">setAttribute</span>('<span class="title">id</span>', '<span class="title">pjax</span>');    </span></span><br><span class="line"><span class="class">    $<span class="title">form</span>-&gt;<span class="title">addInput</span>($<span class="title">EnablePjax</span>-&gt;<span class="title">multiMode</span>());</span></span><br><span class="line"><span class="class">    </span></span><br><span class="line"><span class="class">    $<span class="title">PjaxCallBack</span> = <span class="title">new</span> <span class="title">Typecho_Widget_Helper_Form_Element_Textarea</span>('<span class="title">PjaxCallBack</span>',<span class="title">NULL</span>,<span class="title">NULL</span>,</span></span><br><span class="line"><span class="class">        '<span class="title">Pjax</span>回调函数（非必填）',</span></span><br><span class="line"><span class="class">        '用于解决开启<span class="title">pjax</span>导致<span class="title">js</span>丢失问题'</span></span><br><span class="line"><span class="class">    );</span></span><br><span class="line"><span class="class">    $<span class="title">form</span>-&gt;<span class="title">addInput</span>($<span class="title">PjaxCallBack</span>);</span></span><br><span class="line"><span class="class">    </span></span><br><span class="line"><span class="class">    /* 友链设置 */</span></span><br><span class="line"><span class="class">    $<span class="title">friendset</span> = <span class="title">new</span> <span class="title">Typecho_Widget_Helper_Form_Element_Select</span>('<span class="title">friendset</span>',</span></span><br><span class="line"><span class="class">        <span class="title">array</span>(</span></span><br><span class="line"><span class="class">            '1' =&gt; '插件模式',</span></span><br><span class="line"><span class="class">            '2' =&gt; '主题模式',</span></span><br><span class="line"><span class="class">        ),</span></span><br><span class="line"><span class="class">        '2',</span></span><br><span class="line"><span class="class">        '是否使用<span class="title">Link</span>插件进行友链(需点击&lt;<span class="title">a</span> <span class="title">href</span>="<span class="title">https</span>://<span class="title">github</span>.<span class="title">com</span>/<span class="title">JoyNop</span>/<span class="title">Typecho</span>-<span class="title">Links</span>"&gt;这里&lt;/<span class="title">a</span>&gt;下载)',</span></span><br><span class="line"><span class="class">        '介绍：新手和手残党极其友好,默认从主题读取防止报错'</span></span><br><span class="line"><span class="class">    );</span></span><br><span class="line"><span class="class">    $<span class="title">friendset</span>-&gt;<span class="title">setAttribute</span>('<span class="title">id</span>', '<span class="title">friendset</span>');</span></span><br><span class="line"><span class="class">    $<span class="title">form</span>-&gt;<span class="title">addInput</span>($<span class="title">friendset</span>);</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">    $<span class="title">Friends</span> = <span class="title">new</span> <span class="title">Typecho_Widget_Helper_Form_Element_Textarea</span>('<span class="title">Friends</span>',<span class="title">NULL</span>,<span class="title">NULL</span>,</span></span><br><span class="line"><span class="class">        '友情链接（非必填）',</span></span><br><span class="line"><span class="class">        '介绍：用于填写友情链接 &lt;<span class="title">br</span> /&gt;</span></span><br><span class="line"><span class="class">         注意：需在独立页面创建友链，该项才会生效 &lt;<span class="title">br</span> /&gt;</span></span><br><span class="line"><span class="class">         格式：博客名称 || 博客地址 || 博客头像 || 博客简介 &lt;<span class="title">br</span> /&gt;</span></span><br><span class="line"><span class="class">         其他：一行一个，一行代表一个友链'</span></span><br><span class="line"><span class="class">    );</span></span><br><span class="line"><span class="class">    $<span class="title">Friends</span>-&gt;<span class="title">setAttribute</span>('<span class="title">id</span>', '<span class="title">friends</span>');</span></span><br><span class="line"><span class="class">    $<span class="title">form</span>-&gt;<span class="title">addInput</span>($<span class="title">Friends</span>);</span></span><br><span class="line"><span class="class">    </span></span><br><span class="line"><span class="class">    $<span class="title">LazyLoad</span> = <span class="title">new</span> <span class="title">Typecho_Widget_Helper_Form_Element_Text</span>('<span class="title">LazyLoad</span>',</span></span><br><span class="line"><span class="class">        <span class="title">NULL</span>,</span></span><br><span class="line"><span class="class">        <span class="title">NULL</span>,</span></span><br><span class="line"><span class="class">        '全局懒加载图（非必填）',</span></span><br><span class="line"><span class="class">        '介绍：用于修改懒加载图片 格式：<span class="title">base64</span> 或者 图片<span class="title">url</span>'</span></span><br><span class="line"><span class="class">    );</span></span><br><span class="line"><span class="class">    $<span class="title">form</span>-&gt;<span class="title">addInput</span>($<span class="title">LazyLoad</span>);</span></span><br><span class="line"><span class="class">    </span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">    $<span class="title">ShowGlobalReward</span> = <span class="title">new</span> <span class="title">Typecho_Widget_Helper_Form_Element_Select</span>('<span class="title">ShowGlobalReward</span>',</span></span><br><span class="line"><span class="class">        <span class="title">array</span>(</span></span><br><span class="line"><span class="class">            '<span class="title">off</span>' =&gt; '关闭（默认）',</span></span><br><span class="line"><span class="class">            '<span class="title">show</span>' =&gt; '开启打赏',</span></span><br><span class="line"><span class="class">        ),</span></span><br><span class="line"><span class="class">        '<span class="title">off</span>',</span></span><br><span class="line"><span class="class">        '是否开启全局文章打赏',</span></span><br><span class="line"><span class="class">        '介绍：开启此功能所有文章将显示打赏'</span></span><br><span class="line"><span class="class">    );</span></span><br><span class="line"><span class="class">    $<span class="title">ShowGlobalReward</span>-&gt;<span class="title">setAttribute</span>('<span class="title">id</span>', '<span class="title">reward</span>');</span></span><br><span class="line"><span class="class">    $<span class="title">form</span>-&gt;<span class="title">addInput</span>($<span class="title">ShowGlobalReward</span>-&gt;<span class="title">multiMode</span>());</span></span><br><span class="line"><span class="class">    </span></span><br><span class="line"><span class="class">    /* 打赏设置 */</span></span><br><span class="line"><span class="class">    $<span class="title">RewardInfo</span> = <span class="title">new</span> <span class="title">Typecho_Widget_Helper_Form_Element_Textarea</span>('<span class="title">RewardInfo</span>',<span class="title">NULL</span>,<span class="title">_t</span>('微信 || <span class="title">https</span>://<span class="title">cdn</span>.<span class="title">jsdelivr</span>.<span class="title">net</span>/<span class="title">gh</span>/<span class="title">wehaox</span>/<span class="title">CDN</span>@<span class="title">main</span>/<span class="title">reward</span>/<span class="title">wechat</span>.<span class="title">jpg</span></span></span><br><span class="line"><span class="class">支付宝 || <span class="title">https</span>://<span class="title">cdn</span>.<span class="title">jsdelivr</span>.<span class="title">net</span>/<span class="title">gh</span>/<span class="title">wehaox</span>/<span class="title">CDN</span>@<span class="title">main</span>/<span class="title">reward</span>/<span class="title">alipay</span>.<span class="title">jpg</span>'),</span></span><br><span class="line"><span class="class">        '打赏信息（非必填）',</span></span><br><span class="line"><span class="class">        '注意：需在开启打赏功能，该项才会显示 &lt;<span class="title">br</span> /&gt;</span></span><br><span class="line"><span class="class">         格式：打赏名称 || 图片地址 &lt;<span class="title">br</span> /&gt;一行一个'</span></span><br><span class="line"><span class="class">    );</span></span><br><span class="line"><span class="class">    $<span class="title">form</span>-&gt;<span class="title">addInput</span>($<span class="title">RewardInfo</span>);</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">    $<span class="title">sidebarBlock</span> = <span class="title">new</span> <span class="title">Typecho_Widget_Helper_Form_Element_Checkbox</span>('<span class="title">sidebarBlock</span>', </span></span><br><span class="line"><span class="class">    <span class="title">array</span>(</span></span><br><span class="line"><span class="class">    '<span class="title">ShowAuthorInfo</span>' =&gt; <span class="title">_t</span>('显示作者信息'),</span></span><br><span class="line"><span class="class">    '<span class="title">ShowAnnounce</span>' =&gt; <span class="title">_t</span>('显示公告'),</span></span><br><span class="line"><span class="class">    '<span class="title">ShowRecentPosts</span>' =&gt; <span class="title">_t</span>('显示最新文章'),</span></span><br><span class="line"><span class="class">    '<span class="title">ShowRecentComments</span>' =&gt; <span class="title">_t</span>('显示最近回复'),</span></span><br><span class="line"><span class="class">    '<span class="title">ShowCategory</span>' =&gt; <span class="title">_t</span>('显示分类'),</span></span><br><span class="line"><span class="class">    '<span class="title">ShowTag</span>' =&gt; <span class="title">_t</span>('显示标签'),</span></span><br><span class="line"><span class="class">    '<span class="title">ShowArchive</span>' =&gt; <span class="title">_t</span>('显示归档'),</span></span><br><span class="line"><span class="class">    '<span class="title">ShowWebinfo</span>' =&gt; <span class="title">_t</span>('显示网站资讯'),</span></span><br><span class="line"><span class="class">    '<span class="title">ShowOther</span>' =&gt; <span class="title">_t</span>('显示其它杂项'),</span></span><br><span class="line"><span class="class">    '<span class="title">ShowMobileSide</span>' =&gt; <span class="title">_t</span>('手机端显示侧栏'),</span></span><br><span class="line"><span class="class">    '<span class="title">ShowWeiboHot</span>' =&gt; <span class="title">_t</span>('显示微博热搜')</span></span><br><span class="line"><span class="class">    ),</span></span><br><span class="line"><span class="class">    <span class="title">array</span>('<span class="title">ShowAuthorInfo</span>','<span class="title">ShowAnnounce</span>','<span class="title">ShowRecentPosts</span>', '<span class="title">ShowRecentComments</span>', '<span class="title">ShowCategory</span>','<span class="title">ShowTag</span>', '<span class="title">ShowArchive</span>', '<span class="title">ShowWebinfo</span>', '<span class="title">ShowOther</span>','<span class="title">ShowMobileSide</span>'), <span class="title">_t</span>('侧边栏显示'));</span></span><br><span class="line"><span class="class">    $<span class="title">sidebarBlock</span>-&gt;<span class="title">setAttribute</span>('<span class="title">id</span>', '<span class="title">aside</span>');</span></span><br><span class="line"><span class="class">    $<span class="title">form</span>-&gt;<span class="title">addInput</span>($<span class="title">sidebarBlock</span>-&gt;<span class="title">multiMode</span>());</span></span><br><span class="line"><span class="class">    // 在线人数显示</span></span><br><span class="line"><span class="class">    $<span class="title">ShowOnlinePeople</span> = <span class="title">new</span> <span class="title">Typecho_Widget_Helper_Form_Element_Select</span>('<span class="title">ShowOnlinePeople</span>',</span></span><br><span class="line"><span class="class">        <span class="title">array</span>(</span></span><br><span class="line"><span class="class">            '<span class="title">on</span>' =&gt; '开启',</span></span><br><span class="line"><span class="class">            '<span class="title">off</span>' =&gt; '关闭（默认）',</span></span><br><span class="line"><span class="class">        ),</span></span><br><span class="line"><span class="class">        '<span class="title">off</span>',</span></span><br><span class="line"><span class="class">        '是否显示在线人数',</span></span><br><span class="line"><span class="class">        '介绍：侧栏网站咨询模块在线人数统计,防止某些虚拟主机无法开启导致500错误'</span></span><br><span class="line"><span class="class">    );</span></span><br><span class="line"><span class="class">    $<span class="title">form</span>-&gt;<span class="title">addInput</span>($<span class="title">ShowOnlinePeople</span>-&gt;<span class="title">multiMode</span>());</span></span><br><span class="line"><span class="class">    </span></span><br><span class="line"><span class="class">    $<span class="title">sidderArchiveNum</span> = <span class="title">new</span> <span class="title">Typecho_Widget_Helper_Form_Element_Text</span>('<span class="title">sidderArchiveNum</span>', <span class="title">NULL</span>, <span class="title">_t</span>('5'),  <span class="title">_t</span>('侧栏归档显示行数'),<span class="title">_t</span>('默认为5'));</span></span><br><span class="line"><span class="class">    $<span class="title">form</span>-&gt;<span class="title">addInput</span>($<span class="title">sidderArchiveNum</span>);</span></span><br><span class="line"><span class="class">    </span></span><br><span class="line"><span class="class">    // 文章侧边栏设置</span></span><br><span class="line"><span class="class">    $<span class="title">PostSidebarBlock</span> = <span class="title">new</span> <span class="title">Typecho_Widget_Helper_Form_Element_Checkbox</span>('<span class="title">PostSidebarBlock</span>', </span></span><br><span class="line"><span class="class">    <span class="title">array</span>(</span></span><br><span class="line"><span class="class">    '<span class="title">ShowAuthorInfo</span>' =&gt; <span class="title">_t</span>('显示作者信息'),</span></span><br><span class="line"><span class="class">    '<span class="title">ShowAnnounce</span>' =&gt; <span class="title">_t</span>('显示公告'),</span></span><br><span class="line"><span class="class">    '<span class="title">ShowRecentPosts</span>' =&gt; <span class="title">_t</span>('显示最新文章'),</span></span><br><span class="line"><span class="class">    '<span class="title">ShowWebinfo</span>' =&gt; <span class="title">_t</span>('显示网站咨询'),</span></span><br><span class="line"><span class="class">    '<span class="title">ShowOther</span>' =&gt; <span class="title">_t</span>('显示其它杂项'),</span></span><br><span class="line"><span class="class">    '<span class="title">ShowWeiboHot</span>' =&gt; <span class="title">_t</span>('显示微博热搜')</span></span><br><span class="line"><span class="class">    ),</span></span><br><span class="line"><span class="class">    <span class="title">array</span>('<span class="title">ShowAuthorInfo</span>','<span class="title">ShowAnnounce</span>','<span class="title">ShowRecentPosts</span>', '<span class="title">ShowWebinfo</span>', '<span class="title">ShowOther</span>'), <span class="title">_t</span>('文章侧边栏显示'),<span class="title">_t</span>('说明:单独设置文章内侧栏'));</span></span><br><span class="line"><span class="class">    $<span class="title">form</span>-&gt;<span class="title">addInput</span>($<span class="title">PostSidebarBlock</span>-&gt;<span class="title">multiMode</span>());</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">// 美化选项</span></span><br><span class="line"><span class="class">    $<span class="title">beautifyBlock</span> = <span class="title">new</span> <span class="title">Typecho_Widget_Helper_Form_Element_Checkbox</span>('<span class="title">beautifyBlock</span>', </span></span><br><span class="line"><span class="class">    <span class="title">array</span>(</span></span><br><span class="line"><span class="class">    '<span class="title">ShowBeautifyChange</span>' =&gt; <span class="title">_t</span>('是否开启美化(基于<span class="title">butterfly</span>小康的魔改)'),</span></span><br><span class="line"><span class="class">    '<span class="title">ShowColorTags</span>' =&gt; <span class="title">_t</span>('是否开启彩色标签云'),</span></span><br><span class="line"><span class="class">    '<span class="title">ShowTopimg</span>' =&gt; <span class="title">_t</span>('是否显示主页顶图'),</span></span><br><span class="line"><span class="class">    '<span class="title">PostShowTopimg</span>' =&gt; <span class="title">_t</span>('是否显示文章示顶图'),</span></span><br><span class="line"><span class="class">    '<span class="title">PageShowTopimg</span>' =&gt; <span class="title">_t</span>('是否显示独立页面顶图'),</span></span><br><span class="line"><span class="class">    '<span class="title">showLineNumber</span>' =&gt; <span class="title">_t</span>('是否显示代码块行号'),</span></span><br><span class="line"><span class="class">    '<span class="title">showSnackbar</span>' =&gt; <span class="title">_t</span>('是否显示主题以及简繁切换弹窗'),</span></span><br><span class="line"><span class="class">    '<span class="title">showLazyloadBlur</span>' =&gt; <span class="title">_t</span>('是否开启懒加载模糊效果'),</span></span><br><span class="line"><span class="class">    '<span class="title">showButterflyClock</span>' =&gt; <span class="title">_t</span>('是否开启侧栏显示时钟(需要在下方填写和风和高德<span class="title">key</span>)'),</span></span><br><span class="line"><span class="class">    ),</span></span><br><span class="line"><span class="class">    <span class="title">array</span>('<span class="title">ShowTopimg</span>','<span class="title">PostShowTopimg</span>','<span class="title">PageShowTopimg</span>','<span class="title">showLineNumber</span>','<span class="title">showSnackbar</span>','<span class="title">showLazyloadBlur</span>'), <span class="title">_t</span>('美化选项'));</span></span><br><span class="line"><span class="class">    $<span class="title">beautifyBlock</span>-&gt;<span class="title">setAttribute</span>('<span class="title">id</span>', '<span class="title">beautifyBlock</span>');</span></span><br><span class="line"><span class="class">    $<span class="title">form</span>-&gt;<span class="title">addInput</span>($<span class="title">beautifyBlock</span>-&gt;<span class="title">multiMode</span>());</span></span><br><span class="line"><span class="class">    </span></span><br><span class="line"><span class="class">    // 封面位置</span></span><br><span class="line"><span class="class">    $<span class="title">coverPosition</span> = <span class="title">new</span> <span class="title">Typecho_Widget_Helper_Form_Element_Select</span>('<span class="title">coverPosition</span>',</span></span><br><span class="line"><span class="class">        <span class="title">array</span>(</span></span><br><span class="line"><span class="class">            '<span class="title">left</span>' =&gt; '靠左',</span></span><br><span class="line"><span class="class">            '<span class="title">cross</span>' =&gt; '交叉(默认)',</span></span><br><span class="line"><span class="class">            '<span class="title">right</span>' =&gt; '靠右',</span></span><br><span class="line"><span class="class">        ),</span></span><br><span class="line"><span class="class">        '<span class="title">cross</span>',</span></span><br><span class="line"><span class="class">        '主页文章列表封面显示位置',</span></span><br><span class="line"><span class="class">        '个人还是还是觉得交叉好看'</span></span><br><span class="line"><span class="class">    );</span></span><br><span class="line"><span class="class">    $<span class="title">form</span>-&gt;<span class="title">addInput</span>($<span class="title">coverPosition</span>-&gt;<span class="title">multiMode</span>());    </span></span><br><span class="line"><span class="class">    </span></span><br><span class="line"><span class="class">    $<span class="title">qweather_key</span> = <span class="title">new</span> <span class="title">Typecho_Widget_Helper_Form_Element_Text</span>('<span class="title">qweather_key</span>', <span class="title">NULL</span>, <span class="title">null</span>,  <span class="title">_t</span>('时钟和风天气<span class="title">key</span>'),<span class="title">_t</span>('&lt;<span class="title">a</span> <span class="title">href</span>="<span class="title">https</span>://<span class="title">github</span>.<span class="title">com</span>/<span class="title">anzhiyu</span>-<span class="title">c</span>/<span class="title">hexo</span>-<span class="title">butterfly</span>-<span class="title">clock</span>-<span class="title">anzhiyu</span>/#安装"&gt;按照教程获取<span class="title">key</span>&lt;/<span class="title">a</span>&gt;'));</span></span><br><span class="line"><span class="class">    $<span class="title">gaud_map_key</span> = <span class="title">new</span> <span class="title">Typecho_Widget_Helper_Form_Element_Text</span>('<span class="title">gaud_map_key</span>', <span class="title">NULL</span>, <span class="title">null</span>,  <span class="title">_t</span>('时钟高得地图<span class="title">web</span>服务<span class="title">key</span>'), <span class="title">_t</span>('侧栏显示时钟用到的<span class="title">key</span>，同上'));</span></span><br><span class="line"><span class="class">	$<span class="title">form</span>-&gt;<span class="title">addInput</span>($<span class="title">qweather_key</span>);</span></span><br><span class="line"><span class="class">	$<span class="title">form</span>-&gt;<span class="title">addInput</span>($<span class="title">gaud_map_key</span>);</span></span><br><span class="line"><span class="class">    </span></span><br><span class="line"><span class="class">    $<span class="title">ShowLive2D</span> = <span class="title">new</span> <span class="title">Typecho_Widget_Helper_Form_Element_Select</span>('<span class="title">ShowLive2D</span>',</span></span><br><span class="line"><span class="class">    <span class="title">array</span>(</span></span><br><span class="line"><span class="class">        '<span class="title">off</span>' =&gt; '关闭（默认）',</span></span><br><span class="line"><span class="class">        "<span class="title">on</span>" =&gt; '开启（<span class="title">GitHub</span>默认）'</span></span><br><span class="line"><span class="class">        ),</span></span><br><span class="line"><span class="class">        '<span class="title">off</span>',</span></span><br><span class="line"><span class="class">        '开启<span class="title">Live2D</span>人物模型（仅通过<span class="title">GitHub</span>默认样式且不会在手机显示）',</span></span><br><span class="line"><span class="class">        '介绍：开启后会在右下角显示一个小人，该功能采用远程调用不会消耗性能'</span></span><br><span class="line"><span class="class">    );</span></span><br><span class="line"><span class="class">    $<span class="title">ShowLive2D</span>-&gt;<span class="title">setAttribute</span>('<span class="title">id</span>', '<span class="title">ShowLive2D</span>');</span></span><br><span class="line"><span class="class">    $<span class="title">form</span>-&gt;<span class="title">addInput</span>($<span class="title">ShowLive2D</span>-&gt;<span class="title">multiMode</span>());</span></span><br><span class="line"><span class="class">    </span></span><br><span class="line"><span class="class">    // 弹窗提示</span></span><br><span class="line"><span class="class">    $<span class="title">SnackbarPosition</span> = <span class="title">new</span> <span class="title">Typecho_Widget_Helper_Form_Element_Select</span>('<span class="title">SnackbarPosition</span>',</span></span><br><span class="line"><span class="class">        <span class="title">array</span>(</span></span><br><span class="line"><span class="class">            '<span class="title">top</span>-<span class="title">left</span>' =&gt; '左上(默认)',</span></span><br><span class="line"><span class="class">            '<span class="title">top</span>-<span class="title">center</span>' =&gt; '上中',</span></span><br><span class="line"><span class="class">            '<span class="title">top</span>-<span class="title">right</span>' =&gt; '右上',</span></span><br><span class="line"><span class="class">            '<span class="title">bottom</span>-<span class="title">left</span>' =&gt; '左下',</span></span><br><span class="line"><span class="class">            '<span class="title">bottom</span>-<span class="title">center</span>' =&gt; '下中',</span></span><br><span class="line"><span class="class">            '<span class="title">bottom</span>-<span class="title">right</span>' =&gt; '右下',</span></span><br><span class="line"><span class="class">        ),</span></span><br><span class="line"><span class="class">        '<span class="title">top</span>-<span class="title">left</span>',</span></span><br><span class="line"><span class="class">        '主题以及简繁切换弹窗位置',</span></span><br><span class="line"><span class="class">        '选择其中一个,需要开启是否显示主题以及简繁切换弹窗 '</span></span><br><span class="line"><span class="class">    );</span></span><br><span class="line"><span class="class">    $<span class="title">form</span>-&gt;<span class="title">addInput</span>($<span class="title">SnackbarPosition</span>-&gt;<span class="title">multiMode</span>());</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">    $<span class="title">CursorEffects</span> = <span class="title">new</span> <span class="title">Typecho_Widget_Helper_Form_Element_Select</span>('<span class="title">CursorEffects</span>',</span></span><br><span class="line"><span class="class">        <span class="title">array</span>(</span></span><br><span class="line"><span class="class">            '<span class="title">off</span>' =&gt; '关闭（默认）',</span></span><br><span class="line"><span class="class">            '<span class="title">heart</span>' =&gt; '鼠标点击效果:爱心',</span></span><br><span class="line"><span class="class">            '<span class="title">fireworks</span>' =&gt; '烟火效果',</span></span><br><span class="line"><span class="class">        ),</span></span><br><span class="line"><span class="class">        '<span class="title">off</span>',</span></span><br><span class="line"><span class="class">        '选择鼠标点击特效',</span></span><br><span class="line"><span class="class">        '介绍：用于切换鼠标点击特效 '</span></span><br><span class="line"><span class="class">    );</span></span><br><span class="line"><span class="class">    $<span class="title">form</span>-&gt;<span class="title">addInput</span>($<span class="title">CursorEffects</span>-&gt;<span class="title">multiMode</span>());</span></span><br><span class="line"><span class="class">     // 自定义<span class="title">subtitle</span></span></span><br><span class="line"><span class="class">    $<span class="title">CustomSubtitle</span> = <span class="title">new</span> <span class="title">Typecho_Widget_Helper_Form_Element_Text</span>(</span></span><br><span class="line"><span class="class">        '<span class="title">CustomSubtitle</span>',</span></span><br><span class="line"><span class="class">        <span class="title">NULL</span>,</span></span><br><span class="line"><span class="class">        <span class="title">NULL</span>,</span></span><br><span class="line"><span class="class">        '自定义主页副标题/<span class="title">subtitle</span>（非必填）',</span></span><br><span class="line"><span class="class">        '介绍：不填则使用默认的一言<span class="title">api</span>。'</span></span><br><span class="line"><span class="class">    );</span></span><br><span class="line"><span class="class">    $<span class="title">form</span>-&gt;<span class="title">addInput</span>($<span class="title">CustomSubtitle</span>);</span></span><br><span class="line"><span class="class">    </span></span><br><span class="line"><span class="class">    $<span class="title">SubtitleLoop</span> = <span class="title">new</span> <span class="title">Typecho_Widget_Helper_Form_Element_Select</span>('<span class="title">SubtitleLoop</span>',</span></span><br><span class="line"><span class="class">    <span class="title">array</span>(</span></span><br><span class="line"><span class="class">        '<span class="title">true</span>' =&gt; '开启循环打字（默认）',</span></span><br><span class="line"><span class="class">        "<span class="title">false</span>" =&gt; '关闭循环打字'</span></span><br><span class="line"><span class="class">        ),</span></span><br><span class="line"><span class="class">        '<span class="title">true</span>',</span></span><br><span class="line"><span class="class">        '副标题循环打字',</span></span><br><span class="line"><span class="class">        '介绍：开启后主页副标题循环打字'</span></span><br><span class="line"><span class="class">    );</span></span><br><span class="line"><span class="class">    $<span class="title">form</span>-&gt;<span class="title">addInput</span>($<span class="title">SubtitleLoop</span>-&gt;<span class="title">multiMode</span>());</span></span><br><span class="line"><span class="class">    </span></span><br><span class="line"><span class="class">    </span></span><br><span class="line"><span class="class">    $<span class="title">EnableAutoHeaderLink</span> = <span class="title">new</span> <span class="title">Typecho_Widget_Helper_Form_Element_Select</span>('<span class="title">EnableAutoHeaderLink</span>',</span></span><br><span class="line"><span class="class">    <span class="title">array</span>(</span></span><br><span class="line"><span class="class">        '<span class="title">on</span>' =&gt; '开启（默认）',</span></span><br><span class="line"><span class="class">        "<span class="title">off</span>" =&gt; '关闭'</span></span><br><span class="line"><span class="class">        ),</span></span><br><span class="line"><span class="class">        '<span class="title">on</span>',</span></span><br><span class="line"><span class="class">        '自动生成导航栏独立页面链接',</span></span><br><span class="line"><span class="class">        '介绍：如果你要自定义导航栏链接部分,你可以选择关闭此项'</span></span><br><span class="line"><span class="class">    );</span></span><br><span class="line"><span class="class">    $<span class="title">form</span>-&gt;<span class="title">addInput</span>($<span class="title">EnableAutoHeaderLink</span>-&gt;<span class="title">multiMode</span>());    </span></span><br><span class="line"><span class="class">    </span></span><br><span class="line"><span class="class">     // 自定义导航栏链接</span></span><br><span class="line"><span class="class">    $<span class="title">CustomHeaderLink</span> = <span class="title">new</span> <span class="title">Typecho_Widget_Helper_Form_Element_Textarea</span>(</span></span><br><span class="line"><span class="class">        '<span class="title">CustomHeaderLink</span>',</span></span><br><span class="line"><span class="class">        <span class="title">NULL</span>,</span></span><br><span class="line"><span class="class">        <span class="title">NULL</span>,</span></span><br><span class="line"><span class="class">        '自定义导航栏链接',</span></span><br><span class="line"><span class="class">        '介绍：目前使用<span class="title">html</span>写法 &lt;<span class="title">b</span> <span class="title">style</span>="<span class="title">color</span>:<span class="title">red</span>"&gt;完全自定义链接记得关闭上方选项&lt;/<span class="title">b</span>&gt;'</span></span><br><span class="line"><span class="class">    );</span></span><br><span class="line"><span class="class">    $<span class="title">CustomHeaderLink</span>-&gt;<span class="title">setAttribute</span>('<span class="title">id</span>', '<span class="title">otherCustom</span>');</span></span><br><span class="line"><span class="class">    $<span class="title">form</span>-&gt;<span class="title">addInput</span>($<span class="title">CustomHeaderLink</span>);        </span></span><br><span class="line"><span class="class">    </span></span><br><span class="line"><span class="class">    // 自定义认证用户</span></span><br><span class="line"><span class="class">    $<span class="title">CustomAuthenticated</span> = <span class="title">new</span> <span class="title">Typecho_Widget_Helper_Form_Element_Textarea</span>(</span></span><br><span class="line"><span class="class">        '<span class="title">CustomAuthenticated</span>',</span></span><br><span class="line"><span class="class">        <span class="title">NULL</span>,</span></span><br><span class="line"><span class="class">        <span class="title">NULL</span>,</span></span><br><span class="line"><span class="class">        '自定义认证用户',</span></span><br><span class="line"><span class="class">        '介绍：评论区认证用户专属头衔&lt;<span class="title">br</span>&gt;</span></span><br><span class="line"><span class="class">         格式：邮箱||认证头衔 如:&lt;<span class="title">br</span>&gt; <span class="title">xxx</span>@<span class="title">xxx</span>.<span class="title">com</span>||<span class="title">xxx</span>认证&lt;<span class="title">br</span>&gt;</span></span><br><span class="line"><span class="class">        (一行一个)'</span></span><br><span class="line"><span class="class">    );</span></span><br><span class="line"><span class="class">    $<span class="title">form</span>-&gt;<span class="title">addInput</span>($<span class="title">CustomAuthenticated</span>);</span></span><br><span class="line"><span class="class">    </span></span><br><span class="line"><span class="class">     // 自定义<span class="title">css</span>和<span class="title">js</span></span></span><br><span class="line"><span class="class">    $<span class="title">CustomCSS</span> = <span class="title">new</span> <span class="title">Typecho_Widget_Helper_Form_Element_Textarea</span>(</span></span><br><span class="line"><span class="class">        '<span class="title">CustomCSS</span>',</span></span><br><span class="line"><span class="class">        <span class="title">NULL</span>,</span></span><br><span class="line"><span class="class">        <span class="title">NULL</span>,</span></span><br><span class="line"><span class="class">        '自定义<span class="title">CSS</span>样式（非必填）',</span></span><br><span class="line"><span class="class">        '介绍：请填写自定义<span class="title">CSS</span>内容，填写时无需填写<span class="title">style</span>标签。'</span></span><br><span class="line"><span class="class">    );</span></span><br><span class="line"><span class="class">    $<span class="title">form</span>-&gt;<span class="title">addInput</span>($<span class="title">CustomCSS</span>);</span></span><br><span class="line"><span class="class">    </span></span><br><span class="line"><span class="class">    $<span class="title">CustomScript</span> = <span class="title">new</span> <span class="title">Typecho_Widget_Helper_Form_Element_Textarea</span>(</span></span><br><span class="line"><span class="class">        '<span class="title">CustomScript</span>',</span></span><br><span class="line"><span class="class">        <span class="title">NULL</span>,</span></span><br><span class="line"><span class="class">        <span class="title">NULL</span>,</span></span><br><span class="line"><span class="class">        '自定义<span class="title">JS</span>代码（非必填，请看下方介绍）',</span></span><br><span class="line"><span class="class">        '介绍：请填写自定义<span class="title">JS</span>内容，填写时无需填写<span class="title">script</span>标签。&lt;<span class="title">br</span> /&gt;</span></span><br><span class="line"><span class="class">         非专业人士请勿填写！'</span></span><br><span class="line"><span class="class">    );</span></span><br><span class="line"><span class="class">    $<span class="title">form</span>-&gt;<span class="title">addInput</span>($<span class="title">CustomScript</span>);</span></span><br><span class="line"><span class="class">    </span></span><br><span class="line"><span class="class">    $<span class="title">CustomHead</span> = <span class="title">new</span> <span class="title">Typecho_Widget_Helper_Form_Element_Textarea</span>(</span></span><br><span class="line"><span class="class">        '<span class="title">CustomHead</span>',</span></span><br><span class="line"><span class="class">        <span class="title">NULL</span>,</span></span><br><span class="line"><span class="class">        <span class="title">NULL</span>,</span></span><br><span class="line"><span class="class">        '自定义<span class="title">head</span>标签内位置内容',</span></span><br><span class="line"><span class="class">        '介绍：填写如<span class="title">cdn</span>的&amp;<span class="title">lt</span>;<span class="title">link</span>&amp;<span class="title">gt</span>;标签、百度统计代码等等'</span></span><br><span class="line"><span class="class">    );</span></span><br><span class="line"><span class="class">    $<span class="title">form</span>-&gt;<span class="title">addInput</span>($<span class="title">CustomHead</span>);</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">    $<span class="title">CustomBodyEnd</span> = <span class="title">new</span> <span class="title">Typecho_Widget_Helper_Form_Element_Textarea</span>(</span></span><br><span class="line"><span class="class">        '<span class="title">CustomBodyEnd</span>',</span></span><br><span class="line"><span class="class">        <span class="title">NULL</span>,</span></span><br><span class="line"><span class="class">        <span class="title">NULL</span>,</span></span><br><span class="line"><span class="class">        '自定义<span class="title">body</span>标签末尾位置内容',</span></span><br><span class="line"><span class="class">        '介绍：填写如<span class="title">cdn</span>的&amp;<span class="title">lt</span>;<span class="title">script</span>&amp;<span class="title">gt</span>;&amp;<span class="title">lt</span>;/<span class="title">script</span>&amp;<span class="title">gt</span>;标签等等'</span></span><br><span class="line"><span class="class">    );</span></span><br><span class="line"><span class="class">    $<span class="title">form</span>-&gt;<span class="title">addInput</span>($<span class="title">CustomBodyEnd</span>);</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">    $<span class="title">Customfooter</span> = <span class="title">new</span> <span class="title">Typecho_Widget_Helper_Form_Element_Textarea</span>(</span></span><br><span class="line"><span class="class">        '<span class="title">Customfooter</span>',</span></span><br><span class="line"><span class="class">        <span class="title">NULL</span>,</span></span><br><span class="line"><span class="class">        <span class="title">NULL</span>,</span></span><br><span class="line"><span class="class">        '自定义<span class="title">Footer</span>内容',</span></span><br><span class="line"><span class="class">        '介绍：网页底部的信息，如备案号等等(可使用<span class="title">html</span>)'</span></span><br><span class="line"><span class="class">    );</span></span><br><span class="line"><span class="class">    $<span class="title">form</span>-&gt;<span class="title">addInput</span>($<span class="title">Customfooter</span>);</span></span><br><span class="line"><span class="class">    </span></span><br><span class="line"><span class="class">    //自定义颜色    </span></span><br><span class="line"><span class="class">    $<span class="title">EnableCustomColor</span> = <span class="title">new</span> <span class="title">Typecho_Widget_Helper_Form_Element_Select</span>('<span class="title">EnableCustomColor</span>',</span></span><br><span class="line"><span class="class">    <span class="title">array</span>(</span></span><br><span class="line"><span class="class">        "<span class="title">false</span>" =&gt; '关闭（默认）',</span></span><br><span class="line"><span class="class">        '<span class="title">true</span>' =&gt; '开启'</span></span><br><span class="line"><span class="class">        ),</span></span><br><span class="line"><span class="class">        '<span class="title">false</span>',</span></span><br><span class="line"><span class="class">        '开启主题自定义颜色(实验性功能)',</span></span><br><span class="line"><span class="class">        '介绍：需要开启此选项下面的自定义颜色才能生效，且下面关于颜色的必填'</span></span><br><span class="line"><span class="class">    );</span></span><br><span class="line"><span class="class">    $<span class="title">EnableCustomColor</span>-&gt;<span class="title">setAttribute</span>('<span class="title">id</span>', '<span class="title">CustomColor</span>');    </span></span><br><span class="line"><span class="class">    $<span class="title">form</span>-&gt;<span class="title">addInput</span>($<span class="title">EnableCustomColor</span>-&gt;<span class="title">multiMode</span>());</span></span><br><span class="line"><span class="class"> </span></span><br><span class="line"><span class="class">    $<span class="title">CustomColorMain</span> = <span class="title">new</span> <span class="title">Typecho_Widget_Helper_Form_Element_Text</span>(</span></span><br><span class="line"><span class="class">        '<span class="title">CustomColorMain</span>',</span></span><br><span class="line"><span class="class">        <span class="title">NULL</span>,</span></span><br><span class="line"><span class="class">        <span class="title">_t</span>('#49<span class="title">b1f5</span>'),</span></span><br><span class="line"><span class="class">        '自定主题主要颜色',</span></span><br><span class="line"><span class="class">        '介绍：使用<span class="title">hex</span>格式或者颜色英文，如#<span class="title">fff</span>、<span class="title">white</span>'</span></span><br><span class="line"><span class="class">    );</span></span><br><span class="line"><span class="class">    $<span class="title">form</span>-&gt;<span class="title">addInput</span>($<span class="title">CustomColorMain</span>);</span></span><br><span class="line"><span class="class">    </span></span><br><span class="line"><span class="class">    $<span class="title">CustomColorButtonBG</span> = <span class="title">new</span> <span class="title">Typecho_Widget_Helper_Form_Element_Text</span>(</span></span><br><span class="line"><span class="class">        '<span class="title">CustomColorButtonBG</span>',</span></span><br><span class="line"><span class="class">        <span class="title">NULL</span>,</span></span><br><span class="line"><span class="class">        <span class="title">_t</span>('#49<span class="title">b1f5</span>'),</span></span><br><span class="line"><span class="class">        '自定按钮颜色',</span></span><br><span class="line"><span class="class">        '介绍：同上'</span></span><br><span class="line"><span class="class">    );</span></span><br><span class="line"><span class="class">    $<span class="title">form</span>-&gt;<span class="title">addInput</span>($<span class="title">CustomColorButtonBG</span>);        </span></span><br><span class="line"><span class="class">    </span></span><br><span class="line"><span class="class">    $<span class="title">CustomColorButtonHover</span> = <span class="title">new</span> <span class="title">Typecho_Widget_Helper_Form_Element_Text</span>(</span></span><br><span class="line"><span class="class">        '<span class="title">CustomColorButtonHover</span>',</span></span><br><span class="line"><span class="class">        <span class="title">NULL</span>,</span></span><br><span class="line"><span class="class">        <span class="title">_t</span>('#<span class="title">ff7242</span>'),</span></span><br><span class="line"><span class="class">        '自定按钮悬停色',</span></span><br><span class="line"><span class="class">        '介绍：同上'</span></span><br><span class="line"><span class="class">    );</span></span><br><span class="line"><span class="class">    $<span class="title">form</span>-&gt;<span class="title">addInput</span>($<span class="title">CustomColorButtonHover</span>);</span></span><br><span class="line"><span class="class">    </span></span><br><span class="line"><span class="class">    $<span class="title">CustomColorSelection</span> = <span class="title">new</span> <span class="title">Typecho_Widget_Helper_Form_Element_Text</span>(</span></span><br><span class="line"><span class="class">        '<span class="title">CustomColorSelection</span>',</span></span><br><span class="line"><span class="class">        <span class="title">NULL</span>,</span></span><br><span class="line"><span class="class">        <span class="title">_t</span>('#00<span class="title">c4b6</span>'),</span></span><br><span class="line"><span class="class">        '自定文本选择色',</span></span><br><span class="line"><span class="class">        '介绍：同上'</span></span><br><span class="line"><span class="class">    );</span></span><br><span class="line"><span class="class">    $<span class="title">form</span>-&gt;<span class="title">addInput</span>($<span class="title">CustomColorSelection</span>);    </span></span><br><span class="line"><span class="class">    //自定义颜色<span class="title">end</span></span></span><br><span class="line"><span class="class">    </span></span><br><span class="line"><span class="class">    $<span class="title">siteKey</span> = <span class="title">new</span> <span class="title">Typecho_Widget_Helper_Form_Element_Text</span>('<span class="title">siteKey</span>', </span></span><br><span class="line"><span class="class">    <span class="title">NULL</span>, </span></span><br><span class="line"><span class="class">    <span class="title">null</span>,</span></span><br><span class="line"><span class="class">    '评论区谷歌验证码 &lt;<span class="title">br</span>&gt; <span class="title">Site</span> <span class="title">Key</span> <span class="title">for</span> <span class="title">reCAPTCHAv2</span>:',</span></span><br><span class="line"><span class="class">    '&lt;<span class="title">a</span> <span class="title">href</span>="<span class="title">https</span>://<span class="title">www</span>.<span class="title">google</span>.<span class="title">com</span>/<span class="title">recaptcha</span>/<span class="title">admin</span>/<span class="title">create</span>"&gt;点击获取密钥&lt;/<span class="title">a</span>&gt;'</span></span><br><span class="line"><span class="class">    );</span></span><br><span class="line"><span class="class">    </span></span><br><span class="line"><span class="class">    $<span class="title">secretKey</span> = <span class="title">new</span> <span class="title">Typecho_Widget_Helper_Form_Element_Text</span>('<span class="title">secretKey</span>', <span class="title">NULL</span>, <span class="title">null</span>, <span class="title">_t</span>('<span class="title">Serect</span> <span class="title">Key</span> <span class="title">for</span> <span class="title">reCAPTCHAv2</span>:'), <span class="title">_t</span>('填写两处密钥评论区自动开启谷歌验证码'));</span></span><br><span class="line"><span class="class">	$<span class="title">form</span>-&gt;<span class="title">addInput</span>($<span class="title">siteKey</span>);</span></span><br><span class="line"><span class="class">	$<span class="title">form</span>-&gt;<span class="title">addInput</span>($<span class="title">secretKey</span>);</span></span><br><span class="line"><span class="class">	</span></span><br><span class="line"><span class="class">	</span></span><br><span class="line"><span class="class">    $<span class="title">hcaptchaSecretKey</span> = <span class="title">new</span> <span class="title">Typecho_Widget_Helper_Form_Element_Text</span>('<span class="title">hcaptchaSecretKey</span>', </span></span><br><span class="line"><span class="class">    <span class="title">NULL</span>, </span></span><br><span class="line"><span class="class">    <span class="title">null</span>,</span></span><br><span class="line"><span class="class">    '&lt;<span class="title">hr</span>&gt; 评论区<span class="title">hcaptch</span>人机验证 &lt;<span class="title">br</span>&gt; 密钥(<span class="title">sietkey</span>)- 使用它作为 <span class="title">secret</span> 来检查用户令牌:',</span></span><br><span class="line"><span class="class">    '&lt;<span class="title">a</span> <span class="title">href</span>="<span class="title">https</span>://<span class="title">dashboard</span>.<span class="title">hcaptcha</span>.<span class="title">com</span>/<span class="title">welcome</span>"&gt;点击获取密钥&lt;/<span class="title">a</span>&gt;'</span></span><br><span class="line"><span class="class">    );</span></span><br><span class="line"><span class="class">    </span></span><br><span class="line"><span class="class">    $<span class="title">hcaptchaAPIKey</span> = <span class="title">new</span> <span class="title">Typecho_Widget_Helper_Form_Element_Text</span>('<span class="title">hcaptchaAPIKey</span>', <span class="title">NULL</span>, <span class="title">null</span>, <span class="title">_t</span>('<span class="title">API</span> 密钥:'), <span class="title">_t</span>('填写两处密钥评论区自动开启<span class="title">hcaptch</span>人机验证'));</span></span><br><span class="line"><span class="class">    </span></span><br><span class="line"><span class="class">    $<span class="title">form</span>-&gt;<span class="title">addInput</span>($<span class="title">hcaptchaSecretKey</span>);</span></span><br><span class="line"><span class="class">	$<span class="title">form</span>-&gt;<span class="title">addInput</span>($<span class="title">hcaptchaAPIKey</span>);</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">	</span></span><br><span class="line"><span class="class">    </span></span><br><span class="line"><span class="class">    </span></span><br><span class="line"><span class="class">$<span class="title">db</span> = <span class="title">Typecho_Db</span>::<span class="title">get</span>();</span></span><br><span class="line"><span class="class">$<span class="title">sjdq</span>=$<span class="title">db</span>-&gt;<span class="title">fetchRow</span>($<span class="title">db</span>-&gt;<span class="title">select</span>()-&gt;<span class="title">from</span> ('<span class="title">table</span>.<span class="title">options</span>')-&gt;<span class="title">where</span> ('<span class="title">name</span> = ?', '<span class="title">theme</span>:<span class="title">butterfly</span>'));</span></span><br><span class="line"><span class="class">$<span class="title">ysj</span> = $<span class="title">sjdq</span>['<span class="title">value</span>'];</span></span><br><span class="line"><span class="class"><span class="title">if</span>(<span class="title">isset</span>($<span class="title">_POST</span>['<span class="title">type</span>']))</span></span><br><span class="line"><span class="class"></span>{ </span><br><span class="line"><span class="keyword">if</span>(<span class="variable">$_POST</span>[<span class="string">"type"</span>]==<span class="string">"备份主题数据"</span>){</span><br><span class="line"><span class="keyword">if</span>(<span class="variable">$db</span>-&gt;<span class="title function_ invoke__">fetchRow</span>(<span class="variable">$db</span>-&gt;<span class="title function_ invoke__">select</span>()-&gt;<span class="keyword">from</span> (<span class="string">'table.options'</span>)-&gt;<span class="title function_ invoke__">where</span> (<span class="string">'name = ?'</span>, <span class="string">'theme:butterflybf'</span>))){</span><br><span class="line"><span class="variable">$update</span> = <span class="variable">$db</span>-&gt;<span class="title function_ invoke__">update</span>(<span class="string">'table.options'</span>)-&gt;<span class="title function_ invoke__">rows</span>(<span class="keyword">array</span>(<span class="string">'value'</span>=&gt;<span class="variable">$ysj</span>))-&gt;<span class="title function_ invoke__">where</span>(<span class="string">'name = ?'</span>, <span class="string">'theme:butterflybf'</span>);</span><br><span class="line"><span class="variable">$updateRows</span>= <span class="variable">$db</span>-&gt;<span class="title function_ invoke__">query</span>(<span class="variable">$update</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">'&lt;div class="tongzhi"&gt;备份已更新，请等待自动刷新！如果等不到请点击'</span>;</span><br><span class="line"><span class="meta">?&gt;</span>    </span><br><span class="line">&lt;a href=<span class="string">"&lt;?php Helper::options()-&gt;adminUrl('options-theme.php'); ?&gt;"</span>&gt;这里&lt;/a&gt;&lt;/div&gt;</span><br><span class="line">&lt;script language=<span class="string">"JavaScript"</span>&gt;window.<span class="title function_ invoke__">setTimeout</span>(<span class="string">"location=\'&lt;?php Helper::options()-&gt;adminUrl('options-theme.php'); ?&gt;\'"</span>, <span class="number">2500</span>);&lt;/script&gt;</span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">}<span class="keyword">else</span>{</span><br><span class="line"><span class="keyword">if</span>(<span class="variable">$ysj</span>){</span><br><span class="line">     <span class="variable">$insert</span> = <span class="variable">$db</span>-&gt;<span class="title function_ invoke__">insert</span>(<span class="string">'table.options'</span>)-&gt;<span class="title function_ invoke__">rows</span>(<span class="keyword">array</span>(<span class="string">'name'</span> =&gt; <span class="string">'theme:butterflybf'</span>,<span class="string">'user'</span> =&gt; <span class="string">'0'</span>,<span class="string">'value'</span> =&gt; <span class="variable">$ysj</span>));</span><br><span class="line">     <span class="variable">$insertId</span> = <span class="variable">$db</span>-&gt;<span class="title function_ invoke__">query</span>(<span class="variable">$insert</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">'&lt;div class="tongzhi"&gt;备份完成，请等待自动刷新！如果等不到请点击'</span>;</span><br><span class="line"><span class="meta">?&gt;</span>    </span><br><span class="line">&lt;a href=<span class="string">"&lt;?php Helper::options()-&gt;adminUrl('options-theme.php'); ?&gt;"</span>&gt;这里&lt;/a&gt;&lt;/div&gt;</span><br><span class="line">&lt;script language=<span class="string">"JavaScript"</span>&gt;window.<span class="title function_ invoke__">setTimeout</span>(<span class="string">"location=\'&lt;?php Helper::options()-&gt;adminUrl('options-theme.php'); ?&gt;\'"</span>, <span class="number">2500</span>);&lt;/script&gt;</span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">}</span><br><span class="line">}</span><br><span class="line">        }</span><br><span class="line"><span class="keyword">if</span>(<span class="variable">$_POST</span>[<span class="string">"type"</span>]==<span class="string">"还原主题数据"</span>){</span><br><span class="line"><span class="keyword">if</span>(<span class="variable">$db</span>-&gt;<span class="title function_ invoke__">fetchRow</span>(<span class="variable">$db</span>-&gt;<span class="title function_ invoke__">select</span>()-&gt;<span class="keyword">from</span> (<span class="string">'table.options'</span>)-&gt;<span class="title function_ invoke__">where</span> (<span class="string">'name = ?'</span>, <span class="string">'theme:butterflybf'</span>))){</span><br><span class="line"><span class="variable">$sjdub</span>=<span class="variable">$db</span>-&gt;<span class="title function_ invoke__">fetchRow</span>(<span class="variable">$db</span>-&gt;<span class="title function_ invoke__">select</span>()-&gt;<span class="keyword">from</span> (<span class="string">'table.options'</span>)-&gt;<span class="title function_ invoke__">where</span> (<span class="string">'name = ?'</span>, <span class="string">'theme:butterflybf'</span>));</span><br><span class="line"><span class="variable">$bsj</span> = <span class="variable">$sjdub</span>[<span class="string">'value'</span>];</span><br><span class="line"><span class="variable">$update</span> = <span class="variable">$db</span>-&gt;<span class="title function_ invoke__">update</span>(<span class="string">'table.options'</span>)-&gt;<span class="title function_ invoke__">rows</span>(<span class="keyword">array</span>(<span class="string">'value'</span>=&gt;<span class="variable">$bsj</span>))-&gt;<span class="title function_ invoke__">where</span>(<span class="string">'name = ?'</span>, <span class="string">'theme:butterfly'</span>);</span><br><span class="line"><span class="variable">$updateRows</span>= <span class="variable">$db</span>-&gt;<span class="title function_ invoke__">query</span>(<span class="variable">$update</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">'&lt;div class="tongzhi"&gt;检测到主题备份数据，恢复完成，请等待自动刷新！如果等不到请点击'</span>;</span><br><span class="line"><span class="meta">?&gt;</span>    </span><br><span class="line">&lt;a href=<span class="string">"&lt;?php Helper::options()-&gt;adminUrl('options-theme.php'); ?&gt;"</span>&gt;这里&lt;/a&gt;&lt;/div&gt;</span><br><span class="line">&lt;script language=<span class="string">"JavaScript"</span>&gt;window.<span class="title function_ invoke__">setTimeout</span>(<span class="string">"location=\'&lt;?php Helper::options()-&gt;adminUrl('options-theme.php'); ?&gt;\'"</span>, <span class="number">2000</span>);&lt;/script&gt;</span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">}<span class="keyword">else</span>{</span><br><span class="line"><span class="keyword">echo</span> <span class="string">'&lt;div class="tongzhi"&gt;没有主题备份数据，恢复不了哦！&lt;/div&gt;'</span>;</span><br><span class="line">}</span><br><span class="line">}</span><br><span class="line"><span class="keyword">if</span>(<span class="variable">$_POST</span>[<span class="string">"type"</span>]==<span class="string">"删除备份数据"</span>){</span><br><span class="line"><span class="keyword">if</span>(<span class="variable">$db</span>-&gt;<span class="title function_ invoke__">fetchRow</span>(<span class="variable">$db</span>-&gt;<span class="title function_ invoke__">select</span>()-&gt;<span class="keyword">from</span> (<span class="string">'table.options'</span>)-&gt;<span class="title function_ invoke__">where</span> (<span class="string">'name = ?'</span>, <span class="string">'theme:butterflybf'</span>))){</span><br><span class="line"><span class="variable">$delete</span> = <span class="variable">$db</span>-&gt;<span class="title function_ invoke__">delete</span>(<span class="string">'table.options'</span>)-&gt;<span class="title function_ invoke__">where</span> (<span class="string">'name = ?'</span>, <span class="string">'theme:butterflybf'</span>);</span><br><span class="line"><span class="variable">$deletedRows</span> = <span class="variable">$db</span>-&gt;<span class="title function_ invoke__">query</span>(<span class="variable">$delete</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">'&lt;div class="tongzhi"&gt;删除成功，请等待自动刷新，如果等不到请点击'</span>;</span><br><span class="line"><span class="meta">?&gt;</span>    </span><br><span class="line">&lt;a href=<span class="string">"&lt;?php Helper::options()-&gt;adminUrl('options-theme.php'); ?&gt;"</span>&gt;这里&lt;/a&gt;&lt;/div&gt;</span><br><span class="line">&lt;script language=<span class="string">"JavaScript"</span>&gt;window.<span class="title function_ invoke__">setTimeout</span>(<span class="string">"location=\'&lt;?php Helper::options()-&gt;adminUrl('options-theme.php'); ?&gt;\'"</span>, <span class="number">2500</span>);&lt;/script&gt;</span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">}<span class="keyword">else</span>{</span><br><span class="line"><span class="keyword">echo</span> <span class="string">'&lt;div class="tongzhi"&gt;不用删了！备份不存在！！！&lt;/div&gt;'</span>;</span><br><span class="line">}</span><br><span class="line">}</span><br><span class="line">    }</span><br><span class="line"><span class="comment">// 结束</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">themeFields</span>(<span class="params"><span class="variable">$layout</span></span>)</span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="variable">$thumb</span> = <span class="keyword">new</span> <span class="title class_">Typecho_Widget_Helper_Form_Element_Text</span>(</span><br><span class="line">        <span class="string">'thumb'</span>,</span><br><span class="line">        <span class="literal">NULL</span>,</span><br><span class="line">        <span class="literal">NULL</span>,</span><br><span class="line">        <span class="string">'自定义文章缩略图'</span>,</span><br><span class="line">        <span class="string">'填写时：将会显示填写的文章缩略图 &lt;br&gt;不填写时采用默认图片'</span></span><br><span class="line">    );</span><br><span class="line">    <span class="variable">$layout</span>-&gt;<span class="title function_ invoke__">addItem</span>(<span class="variable">$thumb</span>);</span><br><span class="line"></span><br><span class="line">    <span class="variable">$desc</span> = <span class="keyword">new</span> <span class="title class_">Typecho_Widget_Helper_Form_Element_Text</span>(</span><br><span class="line">        <span class="string">'desc'</span>,</span><br><span class="line">        <span class="literal">NULL</span>,</span><br><span class="line">        <span class="literal">NULL</span>,</span><br><span class="line">        <span class="string">'SEO描述'</span>,</span><br><span class="line">        <span class="string">'用于填写文章或独立页面的SEO描述，如果不填写则没有'</span></span><br><span class="line">    );</span><br><span class="line">    <span class="variable">$layout</span>-&gt;<span class="title function_ invoke__">addItem</span>(<span class="variable">$desc</span>);</span><br><span class="line"></span><br><span class="line">    <span class="variable">$keywords</span> = <span class="keyword">new</span> <span class="title class_">Typecho_Widget_Helper_Form_Element_Text</span>(</span><br><span class="line">        <span class="string">'keywords'</span>,</span><br><span class="line">        <span class="literal">NULL</span>,</span><br><span class="line">        <span class="literal">NULL</span>,</span><br><span class="line">        <span class="string">'SEO关键词'</span>,</span><br><span class="line">        <span class="string">'用于填写文章或独立页面的SEO关键词，如果不填写则没有'</span></span><br><span class="line">    );</span><br><span class="line">    <span class="variable">$layout</span>-&gt;<span class="title function_ invoke__">addItem</span>(<span class="variable">$keywords</span>);</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="variable">$showTimeWarning</span> = <span class="keyword">new</span> <span class="title class_">Typecho_Widget_Helper_Form_Element_Select</span>(</span><br><span class="line">        <span class="string">'showTimeWarning'</span>,</span><br><span class="line">        <span class="keyword">array</span>(</span><br><span class="line">            <span class="string">'on'</span> =&gt; <span class="string">'开启（默认）'</span>,</span><br><span class="line">            <span class="string">'off'</span> =&gt; <span class="string">'关闭'</span></span><br><span class="line">        ),</span><br><span class="line">        <span class="string">'on'</span>,</span><br><span class="line">        <span class="string">'是否开启当前页面的文章过期警告'</span>,</span><br><span class="line">        <span class="string">'用于单独设置当前文章的过期警告 &lt;br /&gt; &lt;b&gt;仅在文章内作用,独立页面无需改动&lt;/b&gt; &lt;br /&gt;'</span></span><br><span class="line">    );</span><br><span class="line">    <span class="variable">$layout</span>-&gt;<span class="title function_ invoke__">addItem</span>(<span class="variable">$showTimeWarning</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="variable">$ShowReward</span> = <span class="keyword">new</span> <span class="title class_">Typecho_Widget_Helper_Form_Element_Select</span>(<span class="string">'ShowReward'</span>,</span><br><span class="line">        <span class="keyword">array</span>(</span><br><span class="line">            <span class="string">'off'</span> =&gt; <span class="string">'关闭（默认）'</span>,</span><br><span class="line">            <span class="string">'show'</span> =&gt; <span class="string">'开启打赏'</span>,</span><br><span class="line">        ),</span><br><span class="line">        <span class="string">'off'</span>,</span><br><span class="line">        <span class="string">'是否开启文章打赏'</span>,</span><br><span class="line">        <span class="string">'介绍：开启此功能需要在主题设置中添加二维码图片'</span></span><br><span class="line">    );</span><br><span class="line">    <span class="variable">$layout</span>-&gt;<span class="title function_ invoke__">addItem</span>(<span class="variable">$ShowReward</span>);</span><br><span class="line">    <span class="variable">$ShowToc</span> = <span class="keyword">new</span> <span class="title class_">Typecho_Widget_Helper_Form_Element_Select</span>(<span class="string">'ShowToc'</span>,</span><br><span class="line">        <span class="keyword">array</span>(</span><br><span class="line">            <span class="string">'show'</span> =&gt; <span class="string">'开启（默认）'</span>,</span><br><span class="line">            <span class="string">'off'</span> =&gt; <span class="string">'关闭'</span>,</span><br><span class="line">        ),</span><br><span class="line">        <span class="string">'show'</span>,</span><br><span class="line">        <span class="string">'是否显示文章目录'</span>,</span><br><span class="line">        <span class="string">'介绍：或许有的文章不需要目录功能,默认是开启的,一般不需要设置'</span></span><br><span class="line">    );</span><br><span class="line">    <span class="variable">$layout</span>-&gt;<span class="title function_ invoke__">addItem</span>(<span class="variable">$ShowToc</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="variable">$CopyRight</span> = <span class="keyword">new</span> <span class="title class_">Typecho_Widget_Helper_Form_Element_Select</span>(<span class="string">'CopyRight'</span>,</span><br><span class="line">        <span class="keyword">array</span>(</span><br><span class="line">            <span class="string">'on'</span> =&gt; <span class="string">' CC BY-NC-SA 4.0（默认）'</span>,</span><br><span class="line">            <span class="string">'off'</span> =&gt; <span class="string">'禁止转载'</span>,</span><br><span class="line">        ),</span><br><span class="line">        <span class="string">'on'</span>,</span><br><span class="line">        <span class="string">'文章版权说明'</span>,</span><br><span class="line">        <span class="string">'介绍：默认为CC BY-NC-SA 4.0'</span></span><br><span class="line">    );</span><br><span class="line">    <span class="variable">$layout</span>-&gt;<span class="title function_ invoke__">addItem</span>(<span class="variable">$CopyRight</span>);    </span><br><span class="line">    </span><br><span class="line">}</span><br><span class="line"><span class="comment">// 新文章缩略图</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">get_ArticleThumbnail</span>(<span class="params"><span class="variable">$widget</span></span>)</span>{</span><br><span class="line">  <span class="comment">// 当文章无图片时的随机缩略图</span></span><br><span class="line"><span class="comment">//   $rand = mt_rand(1, 26); // 随机 1-9 张缩略图</span></span><br><span class="line"><span class="comment">//   // 缩略图加速</span></span><br><span class="line"><span class="comment">//   $rand_url;</span></span><br><span class="line"><span class="comment">//   if(!empty(Helper::options()-&gt;articleImgSpeed)){</span></span><br><span class="line"><span class="comment">//     $rand_url = Helper::options()-&gt;articleImgSpeed;</span></span><br><span class="line"><span class="comment">//   }else {</span></span><br><span class="line"><span class="comment">//     $rand_url = $widget-&gt;widget('Widget_Options')-&gt;themeUrl . '/images/articles/';</span></span><br><span class="line"><span class="comment">//   }</span></span><br><span class="line"><span class="comment">//   $random =  $rand_url . $rand . '.jpg'; // 随机缩略图路径</span></span><br><span class="line"><span class="comment">//   $random =  'https://static01.imgkr.com/temp/517e5d14c312427dbf93304563869279.png';</span></span><br><span class="line"><span class="comment">//   $attach = $widget-&gt;attachments(1)-&gt;attachment;</span></span><br><span class="line">  <span class="variable">$random</span> =  <span class="string">'/usr/themes/butterfly/img/DefualtThumbnail.jpg'</span>;</span><br><span class="line">  <span class="variable">$pattern</span> = <span class="string">'/\&lt;img.*?src\=\"(.*?)\"[^&gt;]*&gt;/i'</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//如果有自定义缩略图</span></span><br><span class="line">  <span class="keyword">if</span>(<span class="variable">$widget</span>-&gt;fields-&gt;thumb) {</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$widget</span>-&gt;fields-&gt;thumb;</span><br><span class="line">  }<span class="keyword">else</span> <span class="keyword">if</span> (<span class="title function_ invoke__">preg_match_all</span>(<span class="variable">$pattern</span>, <span class="variable">$widget</span>-&gt;content, <span class="variable">$thumbUrl</span>) &amp;&amp; <span class="title function_ invoke__">strlen</span>(<span class="variable">$thumbUrl</span>[<span class="number">1</span>][<span class="number">0</span>]) &gt; <span class="number">7</span>) {</span><br><span class="line">      <span class="keyword">return</span> <span class="variable">$thumbUrl</span>[<span class="number">1</span>][<span class="number">0</span>];</span><br><span class="line">  }<span class="keyword">else</span> {</span><br><span class="line">      <span class="keyword">return</span> <span class="variable">$random</span>;</span><br><span class="line">  }</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 主页文章缩略图</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">GetRandomThumbnail</span>(<span class="params"><span class="variable">$widget</span></span>)</span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="comment">// $random = 'https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg';</span></span><br><span class="line">    <span class="variable">$random</span> = <span class="string">'/usr/themes/butterfly/img/DefualtThumbnail.jpg'</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="title class_">Helper</span>::<span class="title function_ invoke__">options</span>()-&gt;futureRandom) {</span><br><span class="line">        <span class="variable">$moszu</span> = <span class="title function_ invoke__">explode</span>(<span class="string">"\r\n"</span>, <span class="title class_">Helper</span>::<span class="title function_ invoke__">options</span>()-&gt;futureRandom);</span><br><span class="line">        <span class="variable">$random</span> = <span class="variable">$moszu</span>[<span class="title function_ invoke__">array_rand</span>(<span class="variable">$moszu</span>, <span class="number">1</span>)] . <span class="string">"?futureRandom="</span> . <span class="title function_ invoke__">mt_rand</span>(<span class="number">0</span>, <span class="number">1000000</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="variable">$pattern</span> = <span class="string">'/\&lt;img.*?src\=\"(.*?)\"[^&gt;]*&gt;/i'</span>;</span><br><span class="line">    <span class="variable">$patternMD</span> = <span class="string">'/\!\[.*?\]\((http(s)?:\/\/.*?(jpg|jpeg|gif|png|webp))/i'</span>;</span><br><span class="line">    <span class="variable">$patternMDfoot</span> = <span class="string">'/\[.*?\]:\s*(http(s)?:\/\/.*?(jpg|jpeg|gif|png|webp))/i'</span>;</span><br><span class="line">    <span class="variable">$t</span> = <span class="title function_ invoke__">preg_match_all</span>(<span class="variable">$pattern</span>, <span class="variable">$widget</span>-&gt;content, <span class="variable">$thumbUrl</span>);</span><br><span class="line">    <span class="variable">$img</span> = <span class="variable">$random</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$widget</span>-&gt;fields-&gt;thumb) {</span><br><span class="line">        <span class="variable">$img</span> = <span class="variable">$widget</span>-&gt;fields-&gt;thumb;</span><br><span class="line">    } <span class="keyword">elseif</span> (<span class="variable">$t</span>) {</span><br><span class="line">        <span class="variable">$img</span> = <span class="variable">$thumbUrl</span>[<span class="number">1</span>][<span class="number">0</span>];</span><br><span class="line">    } <span class="keyword">elseif</span> (<span class="title function_ invoke__">preg_match_all</span>(<span class="variable">$patternMD</span>, <span class="variable">$widget</span>-&gt;content, <span class="variable">$thumbUrl</span>)) {</span><br><span class="line">        <span class="variable">$img</span> = <span class="variable">$thumbUrl</span>[<span class="number">1</span>][<span class="number">0</span>];</span><br><span class="line">    } <span class="keyword">elseif</span> (<span class="title function_ invoke__">preg_match_all</span>(<span class="variable">$patternMDfoot</span>, <span class="variable">$widget</span>-&gt;content, <span class="variable">$thumbUrl</span>)) {</span><br><span class="line">        <span class="variable">$img</span> = <span class="variable">$thumbUrl</span>[<span class="number">1</span>][<span class="number">0</span>];</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$img</span>;</span><br><span class="line">}</span><br><span class="line"><span class="comment">// 文章封面缩略图</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">GetRandomThumbnailPost</span>(<span class="params"><span class="variable">$widget</span></span>)</span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$widget</span>-&gt;fields-&gt;thumb&amp;&amp;<span class="variable">$widget</span>-&gt;fields-&gt;thumb!=<span class="string">" "</span>) {</span><br><span class="line">        <span class="variable">$img</span> = <span class="variable">$widget</span>-&gt;fields-&gt;thumb;</span><br><span class="line">    }<span class="keyword">else</span>{</span><br><span class="line">        <span class="variable">$img</span> = <span class="string">"https://api.nuoyis.com/yu-api/acg?yasuo=1"</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$img</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// 文章字数统计</span></span><br><span class="line"><span class="function"><span class="keyword">function</span>  <span class="title">art_count</span> (<span class="params"><span class="variable">$cid</span></span>)</span>{</span><br><span class="line"><span class="variable">$db</span>=<span class="title class_">Typecho_Db</span>::<span class="variable constant_">get</span> ();</span><br><span class="line"><span class="variable">$rs</span>=<span class="variable">$db</span>-&gt;<span class="title function_ invoke__">fetchRow</span> (<span class="variable">$db</span>-&gt;<span class="title function_ invoke__">select</span> (<span class="string">'table.contents.text'</span>)-&gt;<span class="keyword">from</span> (<span class="string">'table.contents'</span>)-&gt;<span class="title function_ invoke__">where</span> (<span class="string">'table.contents.cid=?'</span>,<span class="variable">$cid</span>)-&gt;<span class="title function_ invoke__">order</span> (<span class="string">'table.contents.cid'</span>,<span class="title class_">Typecho_Db</span>::<span class="variable constant_">SORT_ASC</span>)-&gt;<span class="title function_ invoke__">limit</span> (<span class="number">1</span>));</span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">mb_strlen</span>(<span class="variable">$rs</span>[<span class="string">'text'</span>], <span class="string">'UTF-8'</span>);</span><br><span class="line">}</span><br><span class="line"><span class="comment">// 文章字数统计2</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">charactersNum</span>(<span class="params"><span class="variable">$archive</span></span>) </span>{</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_ invoke__">mb_strlen</span>(<span class="variable">$archive</span>-&gt;text,<span class="string">'UTF-8'</span>);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// 全站字数统计</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">allOfCharacters</span>(<span class="params"></span>) </span>{</span><br><span class="line">        <span class="variable">$showPrivate</span> = <span class="number">0</span>;</span><br><span class="line">        <span class="variable">$chars</span> = <span class="number">0</span>;</span><br><span class="line">        <span class="variable">$db</span> = <span class="title class_">Typecho_Db</span>::<span class="title function_ invoke__">get</span>();</span><br><span class="line">        <span class="keyword">if</span>(<span class="variable">$showPrivate</span> == <span class="number">0</span>){</span><br><span class="line">            <span class="variable">$select</span> = <span class="variable">$db</span> -&gt;<span class="title function_ invoke__">select</span>(<span class="string">'text'</span>)-&gt;<span class="keyword">from</span>(<span class="string">'table.contents'</span>)-&gt;<span class="title function_ invoke__">where</span>(<span class="string">'table.contents.status = ?'</span>,<span class="string">'publish'</span>);</span><br><span class="line">        }<span class="keyword">else</span> {</span><br><span class="line">            <span class="variable">$select</span> = <span class="variable">$db</span> -&gt;<span class="title function_ invoke__">select</span>(<span class="string">'text'</span>)-&gt;<span class="keyword">from</span>(<span class="string">'table.contents'</span>);</span><br><span class="line">        }</span><br><span class="line">        <span class="variable">$rows</span> = <span class="variable">$db</span>-&gt;<span class="title function_ invoke__">fetchAll</span>(<span class="variable">$select</span>);</span><br><span class="line">        <span class="keyword">foreach</span> (<span class="variable">$rows</span> <span class="keyword">as</span> <span class="variable">$row</span>){</span><br><span class="line">        <span class="variable">$chars</span> += <span class="title function_ invoke__">mb_strlen</span>(<span class="variable">$row</span>[<span class="string">'text'</span>], <span class="string">'UTF-8'</span>);</span><br><span class="line">        }</span><br><span class="line">        <span class="variable">$unit</span> = <span class="string">''</span>;</span><br><span class="line">        <span class="keyword">if</span>(<span class="variable">$chars</span> &gt;= <span class="number">10000</span>) {</span><br><span class="line">            <span class="variable">$chars</span> /= <span class="number">10000</span>;</span><br><span class="line">            <span class="variable">$unit</span> = <span class="string">'W'</span>;</span><br><span class="line">        }<span class="keyword">else</span> <span class="keyword">if</span>(<span class="variable">$chars</span> &gt;= <span class="number">1000</span>) {</span><br><span class="line">            <span class="variable">$chars</span> /= <span class="number">1000</span>;</span><br><span class="line">            <span class="variable">$unit</span> = <span class="string">'K'</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="variable">$out</span> = <span class="title function_ invoke__">sprintf</span>(<span class="string">'%.2lf %s'</span>,<span class="variable">$chars</span>, <span class="variable">$unit</span>);</span><br><span class="line">        <span class="keyword">echo</span> <span class="variable">$out</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">thumb</span>(<span class="params"><span class="variable">$cid</span></span>) </span>{</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">empty</span>(<span class="variable">$imgurl</span>)) {</span><br><span class="line"><span class="variable">$rand_num</span> = <span class="number">10</span>; <span class="comment">//随机图片数量，根据图片目录中图片实际数量设置</span></span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$rand_num</span> == <span class="number">0</span>) {</span><br><span class="line"><span class="variable">$imgurl</span> = <span class="string">"img/0.jpg"</span>;</span><br><span class="line"><span class="comment">//如果$rand_num = 0,则显示默认图片，须命名为"0.jpg"，注意是绝对地址</span></span><br><span class="line">    }<span class="keyword">else</span>{</span><br><span class="line"><span class="variable">$imgurl</span> = <span class="string">"img/"</span>.<span class="title function_ invoke__">rand</span>(<span class="number">1</span>,<span class="variable">$rand_num</span>).<span class="string">".jpg"</span>;</span><br><span class="line"><span class="comment">//随机图片，须按"1.jpg","2.jpg","3.jpg"...的顺序命名，注意是绝对地址</span></span><br><span class="line">}</span><br><span class="line">}</span><br><span class="line"> <span class="variable">$db</span> = <span class="title class_">Typecho_Db</span>::<span class="title function_ invoke__">get</span>();</span><br><span class="line"> <span class="variable">$rs</span> = <span class="variable">$db</span>-&gt;<span class="title function_ invoke__">fetchRow</span>(<span class="variable">$db</span>-&gt;<span class="title function_ invoke__">select</span>(<span class="string">'table.contents.text'</span>)</span><br><span class="line">    -&gt;<span class="keyword">from</span>(<span class="string">'table.contents'</span>)</span><br><span class="line">    -&gt;<span class="title function_ invoke__">where</span>(<span class="string">'table.contents.type = ?'</span>, <span class="string">'attachment'</span>)</span><br><span class="line">    -&gt;<span class="title function_ invoke__">where</span>(<span class="string">'table.contents.parent= ?'</span>, <span class="variable">$cid</span>)</span><br><span class="line">    -&gt;<span class="title function_ invoke__">order</span>(<span class="string">'table.contents.cid'</span>, <span class="title class_">Typecho_Db</span>::<span class="variable constant_">SORT_ASC</span>)</span><br><span class="line">    -&gt;<span class="title function_ invoke__">limit</span>(<span class="number">1</span>));</span><br><span class="line"><span class="variable">$img</span> = <span class="title function_ invoke__">unserialize</span>(<span class="variable">$rs</span>[<span class="string">'text'</span>]);</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">empty</span>(<span class="variable">$img</span>)){</span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$imgurl</span>;</span><br><span class="line">}</span><br><span class="line"><span class="keyword">else</span>{</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">'你的博客地址'</span>.<span class="variable">$img</span>[<span class="string">'path'</span>];</span><br><span class="line">}</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 评论时间</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">timesince</span>(<span class="params"><span class="variable">$older_date</span>,<span class="variable">$comment_date</span> = <span class="literal">false</span></span>) </span>{</span><br><span class="line"><span class="variable">$chunks</span> = <span class="keyword">array</span>(</span><br><span class="line"><span class="keyword">array</span>(<span class="number">86400</span> , <span class="string">'天'</span>),</span><br><span class="line"><span class="keyword">array</span>(<span class="number">3600</span> , <span class="string">'小时'</span>),</span><br><span class="line"><span class="keyword">array</span>(<span class="number">60</span> , <span class="string">'分'</span>),</span><br><span class="line"><span class="keyword">array</span>(<span class="number">1</span> , <span class="string">'秒'</span>),</span><br><span class="line">);</span><br><span class="line"><span class="variable">$newer_date</span> = <span class="title function_ invoke__">time</span>();</span><br><span class="line"><span class="variable">$since</span> = <span class="title function_ invoke__">abs</span>(<span class="variable">$newer_date</span> - <span class="variable">$older_date</span>);</span><br><span class="line"><span class="keyword">if</span>(<span class="variable">$since</span> &lt; <span class="number">2592000</span>){</span><br><span class="line"><span class="keyword">for</span> (<span class="variable">$i</span> = <span class="number">0</span>, <span class="variable">$j</span> = <span class="title function_ invoke__">count</span>(<span class="variable">$chunks</span>); <span class="variable">$i</span> &lt; <span class="variable">$j</span>; <span class="variable">$i</span>++){</span><br><span class="line"><span class="variable">$seconds</span> = <span class="variable">$chunks</span>[<span class="variable">$i</span>][<span class="number">0</span>];</span><br><span class="line"><span class="variable">$name</span> = <span class="variable">$chunks</span>[<span class="variable">$i</span>][<span class="number">1</span>];</span><br><span class="line"><span class="keyword">if</span> ((<span class="variable">$count</span> = <span class="title function_ invoke__">floor</span>(<span class="variable">$since</span> / <span class="variable">$seconds</span>)) != <span class="number">0</span>) <span class="keyword">break</span>;</span><br><span class="line">}</span><br><span class="line"><span class="variable">$output</span> = <span class="variable">$count</span>.<span class="variable">$name</span>.<span class="string">'前'</span>;</span><br><span class="line">}<span class="keyword">else</span>{</span><br><span class="line"><span class="variable">$output</span> = !<span class="variable">$comment_date</span> ? (<span class="title function_ invoke__">date</span>(<span class="string">'Y-m-j G:i'</span>, <span class="variable">$older_date</span>)) : (<span class="title function_ invoke__">date</span>(<span class="string">'Y-m-j'</span>, <span class="variable">$older_date</span>));</span><br><span class="line">}</span><br><span class="line"><span class="keyword">return</span> <span class="variable">$output</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 文章内获取第一张图做封面</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getPostImg</span>(<span class="params"><span class="variable">$archive</span></span>) </span>{</span><br><span class="line">    <span class="variable">$img</span> = <span class="keyword">array</span>();</span><br><span class="line">    <span class="comment">//  匹配 img 的 src 的正则表达式</span></span><br><span class="line">    <span class="title function_ invoke__">preg_match_all</span>(<span class="string">"/&lt;img.*?src=\"(.*?)\".*?\/?&gt;/i"</span>, <span class="variable">$archive</span>-&gt;content, <span class="variable">$img</span>);</span><br><span class="line">    <span class="comment">//  判断是否匹配到图片</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_ invoke__">count</span>(<span class="variable">$img</span>) &gt; <span class="number">0</span> &amp;&amp; <span class="title function_ invoke__">count</span>(<span class="variable">$img</span>[<span class="number">0</span>]) &gt; <span class="number">0</span>) {</span><br><span class="line">        <span class="comment">//  返回图片</span></span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$img</span>[<span class="number">1</span>][<span class="number">0</span>];</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        <span class="comment">//  如果没有匹配到就返回 none</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'none'</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createCatalog</span>(<span class="params"><span class="variable">$obj</span></span>) </span>{    <span class="comment">//为文章标题添加锚点</span></span><br><span class="line">    <span class="keyword">global</span> <span class="variable">$catalog</span>;</span><br><span class="line">    <span class="keyword">global</span> <span class="variable">$catalog_count</span>;</span><br><span class="line">    <span class="variable">$catalog</span> = <span class="keyword">array</span>();</span><br><span class="line">    <span class="variable">$catalog_count</span> = <span class="number">0</span>;</span><br><span class="line">    <span class="variable">$obj</span> = <span class="title function_ invoke__">preg_replace_callback</span>(<span class="string">'/&lt;h([1-6])(.*?)&gt;(.*?)&lt;\/h\1&gt;/i'</span>, function(<span class="variable">$obj</span>) {</span><br><span class="line">        <span class="keyword">global</span> <span class="variable">$catalog</span>;</span><br><span class="line">        <span class="keyword">global</span> <span class="variable">$catalog_count</span>;</span><br><span class="line">        <span class="variable">$catalog_count</span> ++;</span><br><span class="line">        <span class="variable">$catalog</span>[] = <span class="keyword">array</span>(<span class="string">'text'</span> =&gt; <span class="title function_ invoke__">trim</span>(<span class="title function_ invoke__">strip_tags</span>(<span class="variable">$obj</span>[<span class="number">3</span>])), <span class="string">'depth'</span> =&gt; <span class="variable">$obj</span>[<span class="number">1</span>], <span class="string">'count'</span> =&gt; <span class="variable">$catalog_count</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'&lt;h'</span>.<span class="variable">$obj</span>[<span class="number">1</span>].<span class="variable">$obj</span>[<span class="number">2</span>].<span class="string">' id="cl-'</span>.<span class="variable">$catalog_count</span>.<span class="string">'"&gt;&lt;a class="markdownIt-Anchor" href="#cl-'</span>.<span class="variable">$catalog_count</span>.<span class="string">'"&gt;&lt;/a&gt;'</span>.<span class="variable">$obj</span>[<span class="number">3</span>].<span class="string">'&lt;/h'</span>.<span class="variable">$obj</span>[<span class="number">1</span>].<span class="string">'&gt;'</span>;</span><br><span class="line">    }, <span class="variable">$obj</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$obj</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 目录树</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getCatalog</span>(<span class="params"></span>) </span>{    <span class="comment">//输出文章目录容器</span></span><br><span class="line">    <span class="keyword">global</span> <span class="variable">$catalog</span>;</span><br><span class="line">    <span class="variable">$index</span> = <span class="string">''</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$catalog</span>) {</span><br><span class="line">        <span class="variable">$prev_depth</span> = <span class="string">''</span>;</span><br><span class="line">        <span class="variable">$to_depth</span> = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">foreach</span>(<span class="variable">$catalog</span> <span class="keyword">as</span> <span class="variable">$catalog_item</span>) {</span><br><span class="line">            <span class="variable">$catalog_depth</span> = <span class="variable">$catalog_item</span>[<span class="string">'depth'</span>];</span><br><span class="line">            <span class="keyword">if</span> (<span class="variable">$prev_depth</span>) {</span><br><span class="line">                <span class="keyword">if</span> (<span class="variable">$catalog_depth</span> == <span class="variable">$prev_depth</span>) {</span><br><span class="line">                    <span class="variable">$index</span> .= <span class="string">'&lt;/li &gt;'</span>.<span class="string">"\n"</span>;</span><br><span class="line">                } <span class="keyword">elseif</span> (<span class="variable">$catalog_depth</span> &gt; <span class="variable">$prev_depth</span>) {</span><br><span class="line">                    <span class="variable">$to_depth</span>++;</span><br><span class="line">                    <span class="variable">$index</span> .= <span class="string">'&lt;ol class="toc-child"&gt;'</span>.<span class="string">"\n"</span>;</span><br><span class="line">                } <span class="keyword">else</span> {</span><br><span class="line">                    <span class="variable">$to_depth2</span> = (<span class="variable">$to_depth</span> &gt; (<span class="variable">$prev_depth</span> - <span class="variable">$catalog_depth</span>)) ? (<span class="variable">$prev_depth</span> - <span class="variable">$catalog_depth</span>) : <span class="variable">$to_depth</span>;</span><br><span class="line">                    <span class="keyword">if</span> (<span class="variable">$to_depth2</span>) {</span><br><span class="line">                        <span class="keyword">for</span> (<span class="variable">$i</span>=<span class="number">0</span>; <span class="variable">$i</span>&lt;<span class="variable">$to_depth2</span>; <span class="variable">$i</span>++) {</span><br><span class="line">                            <span class="variable">$index</span> .= <span class="string">'&lt;/li&gt;'</span>.<span class="string">"\n"</span>.<span class="string">'&lt;/ol&gt;'</span>.<span class="string">"\n"</span>;</span><br><span class="line">                            <span class="variable">$to_depth</span>--;</span><br><span class="line">                        }</span><br><span class="line">                    }</span><br><span class="line">                    <span class="variable">$index</span> .= <span class="string">'&lt;/li&gt;'</span>;</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">            <span class="variable">$index</span> .= <span class="string">'&lt;li class="toc-item"&gt;</span></span><br><span class="line"><span class="string">            &lt;a class="toc-link" href="#cl-'</span>.<span class="variable">$catalog_item</span>[<span class="string">'count'</span>].<span class="string">'"&gt;</span></span><br><span class="line"><span class="string">            &lt;span class="toc-number"&gt;&lt;/span&gt;</span></span><br><span class="line"><span class="string">            &lt;span class="toc-text"&gt;'</span>.<span class="variable">$catalog_item</span>[<span class="string">'text'</span>].<span class="string">'&lt;/span&gt;</span></span><br><span class="line"><span class="string">            &lt;/a&gt;'</span>;</span><br><span class="line">            <span class="variable">$prev_depth</span> = <span class="variable">$catalog_item</span>[<span class="string">'depth'</span>];</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">for</span> (<span class="variable">$i</span>=<span class="number">0</span>; <span class="variable">$i</span>&lt;=<span class="variable">$to_depth</span>; <span class="variable">$i</span>++) {</span><br><span class="line">            <span class="variable">$index</span> .= <span class="string">'&lt;/li&gt;'</span>.<span class="string">"\n"</span>;</span><br><span class="line">        }</span><br><span class="line">    <span class="comment">// $index = '&lt;div &gt;'."\n".'&lt;div &gt;'."\n"."\n".$index.'&lt;/div&gt;'."\n".'&lt;/div&gt;'."\n";</span></span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$index</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 获取懒加载图片 */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">GetLazyLoad</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">if</span> (<span class="title class_">Helper</span>::<span class="title function_ invoke__">options</span>()-&gt;LazyLoad) {</span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">Helper</span>::<span class="title function_ invoke__">options</span>()-&gt;LazyLoad;</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">       <span class="keyword">return</span> <span class="string">"data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs="</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 格式化标签 */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ParseCode</span>(<span class="params"><span class="variable">$text</span></span>)</span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="variable">$text</span> = <span class="title function_ invoke__">Short_Tabs</span>(<span class="variable">$text</span>);</span><br><span class="line">    <span class="variable">$text</span> = <span class="title function_ invoke__">Note_Fsm</span>(<span class="variable">$text</span>);</span><br><span class="line">    <span class="variable">$text</span> = <span class="title function_ invoke__">Note_Ico</span>(<span class="variable">$text</span>);</span><br><span class="line">    <span class="variable">$text</span> = <span class="title function_ invoke__">Hide_Lnline</span>(<span class="variable">$text</span>);</span><br><span class="line">    <span class="variable">$text</span> = <span class="title function_ invoke__">Hide_Block</span>(<span class="variable">$text</span>);</span><br><span class="line">    <span class="variable">$text</span> = <span class="title function_ invoke__">Hide_Toggle</span>(<span class="variable">$text</span>);</span><br><span class="line">    <span class="variable">$text</span> = <span class="title function_ invoke__">Button</span>(<span class="variable">$text</span>);</span><br><span class="line">    <span class="variable">$text</span> = <span class="title function_ invoke__">Cheak_Box</span>(<span class="variable">$text</span>);</span><br><span class="line">    <span class="variable">$text</span> = <span class="title function_ invoke__">inline_Tag</span>(<span class="variable">$text</span>);</span><br><span class="line">    <span class="variable">$text</span> = <span class="title function_ invoke__">Bf_Radio</span>(<span class="variable">$text</span>);</span><br><span class="line">    <span class="variable">$text</span> = <span class="title function_ invoke__">Bf_Mark</span>(<span class="variable">$text</span>);</span><br><span class="line">    <span class="variable">$text</span> = <span class="title function_ invoke__">Font</span>(<span class="variable">$text</span>);</span><br><span class="line">    <span class="variable">$text</span> = <span class="title function_ invoke__">ArtPlayer</span>(<span class="variable">$text</span>);    </span><br><span class="line">    <span class="variable">$text</span> = <span class="title function_ invoke__">PostImage</span>(<span class="variable">$text</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$text</span>;</span><br><span class="line">}</span><br><span class="line"><span class="comment">// 标签外挂-Tabs</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Short_Tabs</span>(<span class="params"><span class="variable">$text</span></span>)</span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="variable">$text</span> = <span class="title function_ invoke__">preg_replace_callback</span>(<span class="string">'/&lt;p&gt;\[tabs\](.*?)\[\/tabs\]&lt;\/p&gt;/ism'</span>, function (<span class="variable">$text</span>) {</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'[tabs]'</span> . <span class="variable">$text</span>[<span class="number">1</span>] . <span class="string">'[/tabs]'</span>;</span><br><span class="line">    }, <span class="variable">$text</span>);</span><br><span class="line">    <span class="variable">$text</span> = <span class="title function_ invoke__">preg_replace_callback</span>(<span class="string">'/\[tabs\](.*?)\[\/tabs\]/ism'</span>, function (<span class="variable">$text</span>) {</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_ invoke__">preg_replace</span>(<span class="string">'~&lt;br.*?&gt;~'</span>, <span class="string">''</span>, <span class="variable">$text</span>[<span class="number">0</span>]);</span><br><span class="line">    }, <span class="variable">$text</span>);</span><br><span class="line">    <span class="variable">$text</span> = <span class="title function_ invoke__">preg_replace_callback</span>(<span class="string">'/\[tabs\](.*?)\[\/tabs\]/ism'</span>, function (<span class="variable">$text</span>) {</span><br><span class="line">        <span class="variable">$tabname</span> = <span class="string">''</span>;</span><br><span class="line">        <span class="title function_ invoke__">preg_match_all</span>(<span class="string">'/label=\"(.*?)\"\]/i'</span>, <span class="variable">$text</span>[<span class="number">1</span>], <span class="variable">$tabnamearr</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="variable">$i</span> = <span class="number">0</span>; <span class="variable">$i</span> &lt; <span class="title function_ invoke__">count</span>(<span class="variable">$tabnamearr</span>[<span class="number">1</span>]); <span class="variable">$i</span>++) {</span><br><span class="line">            <span class="keyword">if</span> (<span class="variable">$i</span> === <span class="number">0</span>) {</span><br><span class="line">                <span class="variable">$tabname</span> .= <span class="string">'&lt;li class="tab active"&gt;&lt;button type="button" data-href="'</span> . <span class="variable">$i</span> . <span class="string">'"&gt;'</span> . <span class="variable">$tabnamearr</span>[<span class="number">1</span>][<span class="variable">$i</span>] . <span class="string">'&lt;/button&gt;&lt;/li&gt;'</span>;</span><br><span class="line">            } <span class="keyword">else</span> {</span><br><span class="line">                <span class="variable">$tabname</span> .= <span class="string">'&lt;li class="tab"  data-href="'</span> . <span class="variable">$i</span> . <span class="string">'"&gt;&lt;button type="button" data-href="'</span> . <span class="variable">$i</span> . <span class="string">'"&gt;'</span> . <span class="variable">$tabnamearr</span>[<span class="number">1</span>][<span class="variable">$i</span>] . <span class="string">'&lt;/button&gt;&lt;/li&gt;'</span>;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="variable">$tabcon</span> = <span class="string">''</span>;</span><br><span class="line">        <span class="title function_ invoke__">preg_match_all</span>(<span class="string">'/"\](.*?)\[\//i'</span>, <span class="variable">$text</span>[<span class="number">1</span>], <span class="variable">$tabconarr</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="variable">$i</span> = <span class="number">0</span>; <span class="variable">$i</span> &lt; <span class="title function_ invoke__">count</span>(<span class="variable">$tabconarr</span>[<span class="number">1</span>]); <span class="variable">$i</span>++) {</span><br><span class="line">            <span class="keyword">if</span> (<span class="variable">$i</span> === <span class="number">0</span>) {</span><br><span class="line">                <span class="variable">$tabcon</span> .= <span class="string">'&lt;div class="tab-item-content active" id="'</span> . <span class="variable">$i</span> . <span class="string">'"&gt;'</span> . <span class="variable">$tabconarr</span>[<span class="number">1</span>][<span class="variable">$i</span>] . <span class="string">' &lt;button type="button" class="tab-to-top" aria-label="scroll to top"&gt;&lt;i class="fas fa-arrow-up"&gt;&lt;/i&gt;&lt;/button&gt;&lt;/div&gt;'</span>;</span><br><span class="line">            } <span class="keyword">else</span> {</span><br><span class="line">                <span class="variable">$tabcon</span> .= <span class="string">'&lt;div class="tab-item-content" id="'</span> . <span class="variable">$i</span> . <span class="string">'"&gt;'</span> . <span class="variable">$tabconarr</span>[<span class="number">1</span>][<span class="variable">$i</span>] . <span class="string">'&lt;button type="button" class="tab-to-top" aria-label="scroll to top"&gt;&lt;i class="fas fa-arrow-up"&gt;&lt;/i&gt;&lt;/button&gt;&lt;/div&gt;'</span>;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'</span></span><br><span class="line"><span class="string">        &lt;div class="tabs" id="tags"&gt;&lt;ul class="nav-tabs"&gt;'</span> . <span class="variable">$tabname</span> . <span class="string">'&lt;/ul&gt;&lt;div class="tab-contents"&gt;'</span> . <span class="variable">$tabcon</span> . <span class="string">'&lt;/div&gt;&lt;/div&gt;'</span>;</span><br><span class="line">    }, <span class="variable">$text</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$text</span>;</span><br><span class="line">}</span><br><span class="line"><span class="comment">// 标签外挂-btn</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Button</span>(<span class="params"><span class="variable">$text</span></span>)</span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="variable">$text</span> = <span class="title function_ invoke__">preg_replace_callback</span>(<span class="string">'/\[btn href=\"(.*?)\" type=\"(.*?)\".*?\ ico=\"(.*?)\"](.*?)\[\/btn\]/ism'</span>, function (<span class="variable">$text</span>) {</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'&lt;a href="'</span> . <span class="variable">$text</span>[<span class="number">1</span>] . <span class="string">'" class="btn-beautify button--animated '</span> . <span class="variable">$text</span>[<span class="number">2</span>] . <span class="string">'"&gt;</span></span><br><span class="line"><span class="string">        &lt;i class=" '</span> . <span class="variable">$text</span>[<span class="number">3</span>] . <span class="string">'"&gt;&lt;/i&gt;&lt;span&gt;'</span> . <span class="variable">$text</span>[<span class="number">4</span>] . <span class="string">'&lt;/span&gt;&lt;/a&gt;'</span>;</span><br><span class="line">    }, <span class="variable">$text</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$text</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// 标签外挂-note</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Note_Fsm</span>(<span class="params"><span class="variable">$text</span></span>)</span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="variable">$text</span> = <span class="title function_ invoke__">preg_replace_callback</span>(<span class="string">'/\[note type=\"(.*?)\".*?\](.*?)\[\/note\]/ism'</span>, function (<span class="variable">$text</span>) {</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'&lt;div class="note '</span> . <span class="variable">$text</span>[<span class="number">1</span>] . <span class="string">'"&gt; &lt;p&gt;'</span> . <span class="variable">$text</span>[<span class="number">2</span>] . <span class="string">'&lt;/p&gt;&lt;/div&gt;'</span>;</span><br><span class="line">    }, <span class="variable">$text</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$text</span>;</span><br><span class="line">}</span><br><span class="line"><span class="comment">// 标签外挂-note_ico</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Note_Ico</span>(<span class="params"><span class="variable">$text</span></span>)</span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="variable">$text</span> = <span class="title function_ invoke__">preg_replace_callback</span>(<span class="string">'/\[note-ico type=\"(.*?)\".*?\ ico=\"(.*?)\"](.*?)\[\/note-ico\]/ism'</span>, function (<span class="variable">$text</span>) {</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'&lt;div class="note '</span> . <span class="variable">$text</span>[<span class="number">1</span>] . <span class="string">'"&gt;&lt;i class="'</span> . <span class="variable">$text</span>[<span class="number">2</span>] . <span class="string">'"&gt;&lt;/i&gt;&lt;p&gt;'</span> . <span class="variable">$text</span>[<span class="number">3</span>] . <span class="string">'&lt;/p&gt;&lt;/div&gt;'</span>;</span><br><span class="line">    }, <span class="variable">$text</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$text</span>;</span><br><span class="line">}</span><br><span class="line"><span class="comment">// hide-inline</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Hide_Lnline</span>(<span class="params"><span class="variable">$text</span></span>)</span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="variable">$text</span> = <span class="title function_ invoke__">preg_replace_callback</span>(<span class="string">'/\[hide-inline name=\"(.*?)\".*?\](.*?)\[\/hide-inline\]/ism'</span>, function (<span class="variable">$text</span>) {</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'&lt;span class="hide-inline"&gt;&lt;button type="button" class="hide-button button--animated"&gt;'</span> . <span class="variable">$text</span>[<span class="number">1</span>] . <span class="string">'&lt;/button&gt;&lt;span class="hide-content"&gt;'</span> . <span class="variable">$text</span>[<span class="number">2</span>] . <span class="string">'&lt;/span&gt;&lt;/span&gt;'</span>;</span><br><span class="line">    }, <span class="variable">$text</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$text</span>;</span><br><span class="line">}</span><br><span class="line"><span class="comment">// hide-block</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Hide_Block</span>(<span class="params"><span class="variable">$text</span></span>)</span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="variable">$text</span> = <span class="title function_ invoke__">preg_replace_callback</span>(<span class="string">'/\[hide-block name=\"(.*?)\".*?\](.*?)\[\/hide-block\]/ism'</span>, function (<span class="variable">$text</span>) {</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'&lt;div class="hide-block"&gt;&lt;button type="button" class="hide-button button--animated"&gt;'</span> . <span class="variable">$text</span>[<span class="number">1</span>] . <span class="string">'&lt;/button&gt;&lt;div class="hide-content"&gt;'</span> . <span class="variable">$text</span>[<span class="number">2</span>] . <span class="string">'&lt;/div&gt;&lt;/div&gt;'</span>;</span><br><span class="line">    }, <span class="variable">$text</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$text</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// hide-toggle</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Hide_Toggle</span>(<span class="params"><span class="variable">$text</span></span>)</span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="variable">$text</span> = <span class="title function_ invoke__">preg_replace_callback</span>(<span class="string">'/\[hide-toggle name=\"(.*?)\".*?\](.*?)\[\/hide-toggle\]/ism'</span>, function (<span class="variable">$text</span>) {</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'&lt;details class="toggle"&gt;&lt;summary class="toggle-button"&gt;'</span> . <span class="variable">$text</span>[<span class="number">1</span>] . <span class="string">'&lt;/summary&gt;&lt;div class="toggle-content"&gt;'</span> . <span class="variable">$text</span>[<span class="number">2</span>] . <span class="string">'&lt;/div&gt;&lt;/details&gt;'</span>;</span><br><span class="line">    }, <span class="variable">$text</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$text</span>;</span><br><span class="line">}</span><br><span class="line"><span class="comment">// 复选框</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Cheak_Box</span>(<span class="params"><span class="variable">$text</span></span>)</span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="variable">$text</span> = <span class="title function_ invoke__">preg_replace_callback</span>(<span class="string">'/\[cb type=\"(.*?)\".*?\ checked=\"(.*?)"\](.*?)\[\/cb\]/ism'</span>, function (<span class="variable">$text</span>) {</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'&lt;div class="checkbox '</span>. <span class="variable">$text</span>[<span class="number">1</span>] .<span class="string">' checked"&gt;&lt;input type="checkbox" '</span>. <span class="variable">$text</span>[<span class="number">2</span>] .<span class="string">'&gt;'</span>. <span class="variable">$text</span>[<span class="number">3</span>] .<span class="string">'&lt;/div&gt;'</span>;</span><br><span class="line">    }, <span class="variable">$text</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$text</span>;</span><br><span class="line">}</span><br><span class="line"><span class="comment">// 行内标签</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">inline_Tag</span>(<span class="params"><span class="variable">$text</span></span>)</span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="variable">$text</span> = <span class="title function_ invoke__">preg_replace_callback</span>(<span class="string">'/\[in-tag color=\"(.*?)\"](.*?)\[\/in-tag\]/ism'</span>, function (<span class="variable">$text</span>) {</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'&lt;span class="inline-tag '</span>. <span class="variable">$text</span>[<span class="number">1</span>] .<span class="string">'"&gt;'</span>. <span class="variable">$text</span>[<span class="number">2</span>] .<span class="string">'&lt;/span&gt;'</span>;</span><br><span class="line">    }, <span class="variable">$text</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$text</span>;</span><br><span class="line">}</span><br><span class="line"><span class="comment">// 单选框-radio</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Bf_Radio</span>(<span class="params"><span class="variable">$text</span></span>)</span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="variable">$text</span> = <span class="title function_ invoke__">preg_replace_callback</span>(<span class="string">'/\[radio color=\"(.*?)\".*?\ checked=\"(.*?)"\](.*?)\[\/radio\]/ism'</span>, function (<span class="variable">$text</span>) {</span><br><span class="line">       <span class="keyword">return</span> <span class="string">'&lt;div class="checkbox '</span>. <span class="variable">$text</span>[<span class="number">1</span>] .<span class="string">' checked"&gt;&lt;input type="radio" '</span>. <span class="variable">$text</span>[<span class="number">2</span>] .<span class="string">'&gt;'</span>. <span class="variable">$text</span>[<span class="number">3</span>] .<span class="string">'&lt;/div&gt;'</span>;</span><br><span class="line">    }, <span class="variable">$text</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$text</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Bf_Mark</span>(<span class="params"><span class="variable">$text</span></span>)</span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="variable">$text</span> = <span class="title function_ invoke__">preg_replace_callback</span>(<span class="string">'/\[label color=\"(.*?)\".*?\](.*?)\[\/label\]/ism'</span>, function (<span class="variable">$text</span>) {</span><br><span class="line">       <span class="keyword">return</span> <span class="string">'&lt;mark class="hl-label '</span>. <span class="variable">$text</span>[<span class="number">1</span>] .<span class="string">'"&gt;'</span>. <span class="variable">$text</span>[<span class="number">2</span>] .<span class="string">'&lt;/mark&gt;'</span>;</span><br><span class="line">    }, <span class="variable">$text</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$text</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Font</span>(<span class="params"><span class="variable">$text</span></span>)</span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="variable">$text</span> = <span class="title function_ invoke__">preg_replace_callback</span>(<span class="string">'/\[font size=\"(.*?)"\ color=\"(.*?)"\](.*?)\[\/font\]/ism'</span>, function (<span class="variable">$text</span>) {</span><br><span class="line">       <span class="keyword">return</span> <span class="string">'&lt;font style="font-size: '</span>. <span class="variable">$text</span>[<span class="number">1</span>] .<span class="string">'px;color:'</span>. <span class="variable">$text</span>[<span class="number">2</span>] .<span class="string">'"&gt;'</span>. <span class="variable">$text</span>[<span class="number">3</span>] .<span class="string">'&lt;/font&gt;'</span>;</span><br><span class="line">    }, <span class="variable">$text</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$text</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ArtPlayer</span>(<span class="params"><span class="variable">$text</span></span>)</span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="variable">$text</span> = <span class="title function_ invoke__">preg_replace_callback</span>(<span class="string">'/\[video title=\"(.*?)"\ url=\"(.*?)"\ container=\"(.*?)"\ subtitle=\"(.*?)"\ poster=\"(.*?)"\](.*?)\[\/video\]/ism'</span>, function (<span class="variable">$text</span>) {</span><br><span class="line">            <span class="variable">$t</span> = <span class="title function_ invoke__">explode</span>(<span class="string">"&lt;br&gt;"</span>, <span class="variable">$text</span>[<span class="number">6</span>]);</span><br><span class="line">            <span class="keyword">for</span>(<span class="variable">$i</span>=<span class="number">0</span>;<span class="variable">$i</span>&lt;<span class="title function_ invoke__">count</span>(<span class="variable">$t</span>);<span class="variable">$i</span>++){</span><br><span class="line">	        <span class="variable">$a</span>[] =  <span class="title function_ invoke__">explode</span>(<span class="string">"|"</span>, <span class="variable">$t</span>[<span class="variable">$i</span>]);</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">for</span>(<span class="variable">$i</span>=<span class="number">0</span>;<span class="variable">$i</span>&lt;<span class="title function_ invoke__">count</span>(<span class="variable">$a</span>);<span class="variable">$i</span>++){</span><br><span class="line">	        <span class="variable">$c</span>[<span class="variable">$i</span>][<span class="string">'time'</span>]=<span class="variable">$a</span>[<span class="variable">$i</span>][<span class="number">0</span>];</span><br><span class="line">	        <span class="variable">$c</span>[<span class="variable">$i</span>][<span class="string">'text'</span>]=<span class="variable">$a</span>[<span class="variable">$i</span>][<span class="number">2</span>];</span><br><span class="line">	        <span class="keyword">unset</span>(<span class="variable">$c</span>[<span class="variable">$i</span>][<span class="number">0</span>]);</span><br><span class="line">	        <span class="keyword">unset</span>(<span class="variable">$c</span>[<span class="variable">$i</span>][<span class="number">3</span>]);</span><br><span class="line">        }</span><br><span class="line">        <span class="variable">$c</span>[<span class="number">0</span>][<span class="string">'text'</span>]==<span class="literal">null</span> ? <span class="variable">$highlight</span> = <span class="string">'[]'</span> : <span class="variable">$highlight</span> = <span class="title function_ invoke__">json_encode</span>(<span class="variable">$c</span>,JSON_NUMERIC_CHECK);</span><br><span class="line">        <span class="variable">$text</span>[<span class="number">4</span>] == <span class="string">' '</span>?<span class="variable">$tooltip</span> = <span class="string">'无字幕'</span> : <span class="variable">$tooltip</span> = <span class="string">'默认字幕'</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'</span></span><br><span class="line"><span class="string">    &lt;div class="iframe_video artplayer artplayer-'</span>.<span class="variable">$text</span>[<span class="number">3</span>].<span class="string">'"&gt;&lt;/div&gt;</span></span><br><span class="line"><span class="string">    &lt;script&gt;</span></span><br><span class="line"><span class="string">        var '</span>.<span class="variable">$text</span>[<span class="number">3</span>].<span class="string">' = new Artplayer({</span></span><br><span class="line"><span class="string">            container: ".artplayer-'</span>.<span class="variable">$text</span>[<span class="number">3</span>].<span class="string">'",</span></span><br><span class="line"><span class="string">            url: "'</span>.<span class="variable">$text</span>[<span class="number">2</span>].<span class="string">'",</span></span><br><span class="line"><span class="string">            title: "'</span>.<span class="variable">$text</span>[<span class="number">1</span>].<span class="string">'",</span></span><br><span class="line"><span class="string">            poster: "'</span>.<span class="variable">$text</span>[<span class="number">5</span>].<span class="string">'",</span></span><br><span class="line"><span class="string">            subtitle: {</span></span><br><span class="line"><span class="string">                url: "'</span>.<span class="variable">$text</span>[<span class="number">4</span>].<span class="string">'",</span></span><br><span class="line"><span class="string">            },            </span></span><br><span class="line"><span class="string">            volume: 0.5,</span></span><br><span class="line"><span class="string">            muted: false,</span></span><br><span class="line"><span class="string">            autoplay: false,</span></span><br><span class="line"><span class="string">            pip: true,</span></span><br><span class="line"><span class="string">            autoSize: true,</span></span><br><span class="line"><span class="string">            autoMini: false,</span></span><br><span class="line"><span class="string">            screenshot: true,</span></span><br><span class="line"><span class="string">            setting: true,</span></span><br><span class="line"><span class="string">            loop: true,</span></span><br><span class="line"><span class="string">            flip: true,</span></span><br><span class="line"><span class="string">            playbackRate: true,</span></span><br><span class="line"><span class="string">            aspectRatio: true,</span></span><br><span class="line"><span class="string">            fullscreen: true,</span></span><br><span class="line"><span class="string">            fullscreenWeb: true,</span></span><br><span class="line"><span class="string">            subtitleOffset: true,</span></span><br><span class="line"><span class="string">            miniProgressBar: true,</span></span><br><span class="line"><span class="string">            mutex: true,</span></span><br><span class="line"><span class="string">            backdrop: true,</span></span><br><span class="line"><span class="string">            playsInline: true,</span></span><br><span class="line"><span class="string">            autoPlayback: true,</span></span><br><span class="line"><span class="string">            theme: "#23ade5",</span></span><br><span class="line"><span class="string">            lang: navigator.language.toLowerCase(),</span></span><br><span class="line"><span class="string">            whitelist: ["*"],</span></span><br><span class="line"><span class="string">            moreVideoAttr: {</span></span><br><span class="line"><span class="string">                crossOrigin: "anonymous",</span></span><br><span class="line"><span class="string">            },</span></span><br><span class="line"><span class="string">            settings: [{</span></span><br><span class="line"><span class="string">                width: 200,</span></span><br><span class="line"><span class="string">                html: "字幕",</span></span><br><span class="line"><span class="string">                tooltip: "'</span>.<span class="variable">$tooltip</span>.<span class="string">'",</span></span><br><span class="line"><span class="string">                selector: [{</span></span><br><span class="line"><span class="string">                    html: "Display",</span></span><br><span class="line"><span class="string">                    tooltip: "显示",</span></span><br><span class="line"><span class="string">                    switch: true,</span></span><br><span class="line"><span class="string">                    onSwitch: function (item) {</span></span><br><span class="line"><span class="string">                        item.tooltip = item.switch ? "关闭" : "显示";</span></span><br><span class="line"><span class="string">                        '</span>.<span class="variable">$text</span>[<span class="number">3</span>].<span class="string">'.subtitle.show = !item.switch;</span></span><br><span class="line"><span class="string">                        return !item.switch;</span></span><br><span class="line"><span class="string">                    },</span></span><br><span class="line"><span class="string">                }],</span></span><br><span class="line"><span class="string">                onSelect: function(item) {</span></span><br><span class="line"><span class="string">                    art.subtitle.switch(item.url, {</span></span><br><span class="line"><span class="string">                        name: item.html,</span></span><br><span class="line"><span class="string">                    });</span></span><br><span class="line"><span class="string">                    return item.html;</span></span><br><span class="line"><span class="string">                },</span></span><br><span class="line"><span class="string">            }, ],</span></span><br><span class="line"><span class="string">            highlight: '</span>.<span class="variable">$highlight</span>.<span class="string">'</span></span><br><span class="line"><span class="string">        });</span></span><br><span class="line"><span class="string">    &lt;/script&gt;'</span>;</span><br><span class="line">    }, <span class="variable">$text</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$text</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// 重写文章图片加载</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">PostImage</span>(<span class="params"><span class="variable">$text</span></span>)</span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="variable">$text</span> = <span class="title function_ invoke__">preg_replace_callback</span>(<span class="string">'/&lt;img src=\"(.*?)"\ alt=\"(.*?)"\&gt;/ism'</span>, function (<span class="variable">$text</span>) {</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'&lt;img title="'</span>.<span class="variable">$text</span>[<span class="number">2</span>].<span class="string">'" alt="'</span>.<span class="variable">$text</span>[<span class="number">2</span>].<span class="string">'" data-lazy-src="'</span>.<span class="variable">$text</span>[<span class="number">1</span>].<span class="string">'" src="'</span>.<span class="title function_ invoke__">GetLazyLoad</span>().<span class="string">'" /&gt;'</span>;</span><br><span class="line">    }, <span class="variable">$text</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$text</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">themeInit</span>(<span class="params"><span class="variable">$archive</span></span>) </span>{</span><br><span class="line">    <span class="keyword">if</span>(<span class="title class_">Helper</span>::<span class="title function_ invoke__">options</span>()-&gt;EnablePjax == <span class="string">"on"</span>){</span><br><span class="line">    <span class="title class_">Helper</span>::<span class="title function_ invoke__">options</span>()-&gt;commentsAntiSpam = <span class="literal">false</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$archive</span>-&gt;<span class="title function_ invoke__">is</span>(<span class="string">'single'</span>)) {</span><br><span class="line">        <span class="variable">$archive</span>-&gt;content = <span class="title function_ invoke__">createCatalog</span>(<span class="variable">$archive</span>-&gt;content);</span><br><span class="line">        <span class="variable">$archive</span>-&gt;content = <span class="title function_ invoke__">ParseCode</span>(<span class="variable">$archive</span>-&gt;content);</span><br><span class="line">    }</span><br><span class="line">    <span class="variable">$loginStatus</span> = <span class="variable">$archive</span>-&gt;<span class="title function_ invoke__">widget</span>(<span class="string">'Widget_User'</span>)-&gt;<span class="title function_ invoke__">hasLogin</span>();</span><br><span class="line">    <span class="keyword">if</span>(<span class="title class_">Helper</span>::<span class="title function_ invoke__">options</span>()-&gt;siteKey !== <span class="string">""</span> &amp;&amp; <span class="title class_">Helper</span>::<span class="title function_ invoke__">options</span>()-&gt;secretKey !==<span class="string">""</span> &amp;&amp; !<span class="variable">$loginStatus</span>){</span><br><span class="line">        <span class="title function_ invoke__">comments_filter</span>(<span class="variable">$archive</span>); </span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span> (<span class="title class_">Helper</span>::<span class="title function_ invoke__">options</span>()-&gt;hcaptchaSecretKey !== <span class="string">""</span> &amp;&amp; <span class="title class_">Helper</span>::<span class="title function_ invoke__">options</span>()-&gt;hcaptchaAPIKey !== <span class="string">""</span> &amp;&amp; !<span class="variable">$loginStatus</span>) {</span><br><span class="line">        <span class="title function_ invoke__">hcaptcha_filter</span>(<span class="variable">$archive</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$archive</span>-&gt;<span class="title function_ invoke__">is</span>(<span class="string">'index'</span>)) {</span><br><span class="line">        <span class="comment">// echo '&lt;script src="'..'"&gt;&lt;/script&gt;';        </span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 判断时间区间</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * 使用方法  if(timeZone($this-&gt;date-&gt;timeStamp)) echo 'ok';</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">timeZone</span>(<span class="params"><span class="variable">$from</span></span>)</span>{</span><br><span class="line"><span class="variable">$now</span> = <span class="keyword">new</span> <span class="title class_">Typecho_Date</span>(<span class="title class_">Typecho_Date</span>::<span class="title function_ invoke__">gmtTime</span>());</span><br><span class="line"><span class="keyword">return</span> <span class="variable">$now</span>-&gt;timeStamp - <span class="variable">$from</span> &lt; <span class="number">24</span>*<span class="number">60</span>*<span class="number">60</span> ? <span class="literal">true</span> : <span class="literal">false</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 获取标签数目</span></span><br><span class="line"><span class="comment">* </span></span><br><span class="line"><span class="comment">* 语法: &lt;?php echo tagsNum(); ?&gt;</span></span><br><span class="line"><span class="comment">* </span></span><br><span class="line"><span class="comment">* <span class="doctag">@access</span> protected</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return</span> integer</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">tagsNum</span>(<span class="params"><span class="variable">$display</span> = <span class="literal">true</span></span>)</span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="variable">$db</span> = <span class="title class_">Typecho_Db</span>::<span class="title function_ invoke__">get</span>();</span><br><span class="line">        <span class="variable">$total_tags</span> = <span class="variable">$db</span>-&gt;<span class="title function_ invoke__">fetchObject</span>(<span class="variable">$db</span>-&gt;<span class="title function_ invoke__">select</span>(<span class="keyword">array</span>(<span class="string">'COUNT(mid)'</span> =&gt; <span class="string">'num'</span>))</span><br><span class="line">              -&gt;<span class="keyword">from</span>(<span class="string">'table.metas'</span>)</span><br><span class="line">              -&gt;<span class="title function_ invoke__">where</span>(<span class="string">'table.metas.type = ?'</span>, <span class="string">'tag'</span>))-&gt;num;</span><br><span class="line">        <span class="keyword">if</span>(<span class="variable">$display</span>) {</span><br><span class="line">            <span class="keyword">echo</span> <span class="variable">$total_tags</span>;</span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            <span class="keyword">return</span> <span class="variable">$total_tags</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//获取Gravatar头像 QQ邮箱取用qq头像</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getGravatar</span>(<span class="params"><span class="variable">$email</span>,<span class="variable">$name</span>, <span class="variable">$comments_a</span>,<span class="variable">$s</span> = <span class="number">96</span>, <span class="variable">$d</span> = <span class="string">'mp'</span>, <span class="variable">$r</span> = <span class="string">'g'</span></span>)</span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line"><span class="title function_ invoke__">preg_match_all</span>(<span class="string">'/((\d)*)@qq.com/'</span>, <span class="variable">$email</span>, <span class="variable">$vai</span>);</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">empty</span>(<span class="variable">$vai</span>[<span class="string">'1'</span>][<span class="string">'0'</span>])) {</span><br><span class="line">    <span class="comment">// $hasGravatar = hasGravatar($email);</span></span><br><span class="line">    <span class="comment">// if($hasGravatar){</span></span><br><span class="line">        <span class="comment">// $url = 'https://gravatar.loli.net/avatar/';</span></span><br><span class="line">        <span class="variable">$url</span> = <span class="title class_">Helper</span>::<span class="title function_ invoke__">options</span>()-&gt;GravatarSelect;</span><br><span class="line">        <span class="variable">$url</span> .= <span class="title function_ invoke__">md5</span>(<span class="title function_ invoke__">strtolower</span>(<span class="title function_ invoke__">trim</span>(<span class="variable">$email</span>)));</span><br><span class="line">        <span class="variable">$url</span> .= <span class="string">"?s=<span class="subst">$s</span>&amp;d=<span class="subst">$d</span>&amp;r=<span class="subst">$r</span>"</span>;</span><br><span class="line">        <span class="variable">$imga</span> = <span class="string">'&lt;img '</span>.<span class="variable">$comments_a</span>.<span class="string">' src="'</span>.<span class="title function_ invoke__">GetLazyLoad</span>().<span class="string">'" data-lazy-src="'</span>.<span class="variable">$url</span>.<span class="string">'" &gt;'</span>;</span><br><span class="line">    <span class="comment">// }else{</span></span><br><span class="line">    <span class="comment">//     $imga = '&lt;img avatar="'.$name.'" color '.$comments_a.'&gt;';</span></span><br><span class="line">    <span class="comment">//     }</span></span><br><span class="line">}<span class="keyword">else</span>{</span><br><span class="line">    <span class="variable">$qquser</span> = <span class="variable">$vai</span>[<span class="string">'1'</span>][<span class="string">'0'</span>];</span><br><span class="line">    <span class="variable">$db</span>=<span class="title class_">Typecho_Db</span>::<span class="title function_ invoke__">get</span>();</span><br><span class="line">    <span class="keyword">if</span> (!<span class="title function_ invoke__">array_key_exists</span>(<span class="string">'qqk'</span>, <span class="variable">$db</span>-&gt;<span class="title function_ invoke__">fetchRow</span>(<span class="variable">$db</span>-&gt;<span class="title function_ invoke__">select</span>()-&gt;<span class="keyword">from</span>(<span class="string">'table.comments'</span>)))) {</span><br><span class="line">        <span class="variable">$db</span>-&gt;<span class="title function_ invoke__">query</span>(<span class="string">'ALTER TABLE `'</span>.<span class="variable">$db</span>-&gt;<span class="title function_ invoke__">getPrefix</span>().<span class="string">'comments` ADD `qqk` varchar(64) DEFAULT NULL;'</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="variable">$dbk</span> = <span class="variable">$db</span>-&gt;<span class="title function_ invoke__">fetchRow</span>(<span class="variable">$db</span>-&gt;<span class="title function_ invoke__">select</span>(<span class="string">'qqk'</span>)-&gt;<span class="keyword">from</span>(<span class="string">'table.comments'</span>)-&gt;<span class="title function_ invoke__">where</span>(<span class="string">'mail=?'</span>,<span class="variable">$email</span>))[<span class="string">'qqk'</span>];</span><br><span class="line">    <span class="keyword">if</span>(<span class="variable">$dbk</span> == <span class="literal">NULL</span>){</span><br><span class="line">        <span class="variable">$geturl</span> = <span class="string">'https://ptlogin2.qq.com/getface?&amp;imgtype=1&amp;uin='</span>.<span class="variable">$qquser</span>;</span><br><span class="line">        <span class="variable">$qqurl</span> = <span class="title function_ invoke__">file_get_contents</span>(<span class="variable">$geturl</span>);</span><br><span class="line">        <span class="variable">$str1</span> = <span class="title function_ invoke__">explode</span>(<span class="string">'sdk&amp;k='</span>, <span class="variable">$qqurl</span>);</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$str1</span>[<span class="number">1</span>])){</span><br><span class="line">            <span class="variable">$str2</span> = <span class="title function_ invoke__">explode</span>(<span class="string">'&amp;t='</span>,<span class="variable">$str1</span>[<span class="number">1</span>]);</span><br><span class="line">            <span class="variable">$k</span> = <span class="variable">$str2</span>[<span class="number">0</span>];</span><br><span class="line">            <span class="variable">$db</span>-&gt;<span class="title function_ invoke__">query</span>(<span class="variable">$db</span>-&gt;<span class="title function_ invoke__">update</span>(<span class="string">'table.comments'</span>)-&gt;<span class="title function_ invoke__">rows</span>(<span class="keyword">array</span>(<span class="string">'qqk'</span> =&gt; <span class="variable">$k</span>))-&gt;<span class="title function_ invoke__">where</span>(<span class="string">'mail=?'</span>,<span class="variable">$email</span>));</span><br><span class="line">        }</span><br><span class="line">        <span class="variable">$url</span> = <span class="string">'https://q1.qlogo.cn/headimg_dl?dst_uin='</span>.<span class="variable">$qquser</span>.<span class="string">'&amp;spec=100'</span>;</span><br><span class="line">    }<span class="keyword">else</span>{</span><br><span class="line">        <span class="variable">$url</span> = <span class="string">'https://q1.qlogo.cn/g?b=qq&amp;k='</span>.<span class="variable">$dbk</span>.<span class="string">'&amp;s=100'</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="variable">$imga</span> = <span class="string">'&lt;img '</span>.<span class="variable">$comments_a</span>.<span class="string">' src="'</span>.<span class="title function_ invoke__">GetLazyLoad</span>().<span class="string">'" data-lazy-src="'</span>.<span class="variable">$url</span>.<span class="string">'" &gt;'</span>;</span><br><span class="line">}</span><br><span class="line"><span class="keyword">return</span>  <span class="variable">$imga</span>;</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 获取浏览器信息</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getBrowser</span>(<span class="params"><span class="variable">$agent</span></span>)</span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_ invoke__">preg_match</span>(<span class="string">'/MSIE\s([^\s|;]+)/i'</span>, <span class="variable">$agent</span>, <span class="variable">$regs</span>)) {</span><br><span class="line">        <span class="variable">$outputer</span> = <span class="string">'&lt;i class="fab fa-internet-explorer"&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;Internet Explore'</span>;</span><br><span class="line">    } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="title function_ invoke__">preg_match</span>(<span class="string">'/FireFox\/([^\s]+)/i'</span>, <span class="variable">$agent</span>, <span class="variable">$regs</span>)) {</span><br><span class="line">      <span class="variable">$str1</span> = <span class="title function_ invoke__">explode</span>(<span class="string">'Firefox/'</span>, <span class="variable">$regs</span>[<span class="number">0</span>]);</span><br><span class="line">        <span class="variable">$outputer</span> = <span class="string">'&lt;i class="fab fa-firefox-browser"&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;FireFox'</span>;</span><br><span class="line">    } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="title function_ invoke__">preg_match</span>(<span class="string">'/Maxthon([\d]*)\/([^\s]+)/i'</span>, <span class="variable">$agent</span>, <span class="variable">$regs</span>)) {</span><br><span class="line">      <span class="variable">$str1</span> = <span class="title function_ invoke__">explode</span>(<span class="string">'Maxthon/'</span>, <span class="variable">$agent</span>);</span><br><span class="line">        <span class="variable">$outputer</span> = <span class="string">'&lt;i class="iconfont icon-maxthon"&gt;&lt;/i&gt;&amp;nbsp遨游'</span>;</span><br><span class="line">    } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="title function_ invoke__">preg_match</span>(<span class="string">'#360([a-zA-Z0-9.]+)#i'</span>, <span class="variable">$agent</span>, <span class="variable">$regs</span>)) {</span><br><span class="line"><span class="variable">$outputer</span> = <span class="string">'&lt;i class="iconfont icon-chrome"&gt;&lt;/i&gt;&amp;nbsp;360极速浏览器'</span>;</span><br><span class="line">    } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="title function_ invoke__">preg_match</span>(<span class="string">'/Edg([\d]*)\/([^\s]+)/i'</span>, <span class="variable">$agent</span>, <span class="variable">$regs</span>)) {</span><br><span class="line">        <span class="variable">$str1</span> = <span class="title function_ invoke__">explode</span>(<span class="string">'Edge/'</span>, <span class="variable">$regs</span>[<span class="number">0</span>]);</span><br><span class="line">        <span class="variable">$outputer</span> = <span class="string">'&lt;i class="fab fa-edge"&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;MicroSoft Edge'</span>;</span><br><span class="line">    } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="title function_ invoke__">preg_match</span>(<span class="string">'/UC/i'</span>, <span class="variable">$agent</span>)) {</span><br><span class="line">              <span class="variable">$str1</span> = <span class="title function_ invoke__">explode</span>(<span class="string">'rowser/'</span>,  <span class="variable">$agent</span>);</span><br><span class="line">        <span class="variable">$outputer</span> = <span class="string">'&lt;i class="iconfont icon-UCliulanqi"&gt;&lt;/i&gt;&amp;nbsp;UC浏览器'</span>;</span><br><span class="line">    }  <span class="keyword">else</span> <span class="keyword">if</span> (<span class="title function_ invoke__">preg_match</span>(<span class="string">'/QQ/i'</span>, <span class="variable">$agent</span>, <span class="variable">$regs</span>)||<span class="title function_ invoke__">preg_match</span>(<span class="string">'/QQBrowser\/([^\s]+)/i'</span>, <span class="variable">$agent</span>, <span class="variable">$regs</span>)) {</span><br><span class="line">                  <span class="variable">$str1</span> = <span class="title function_ invoke__">explode</span>(<span class="string">'rowser/'</span>,  <span class="variable">$agent</span>);</span><br><span class="line">        <span class="variable">$outputer</span> = <span class="string">'&lt;i class="iconfont icon-QQliulanqi"&gt;&lt;/i&gt;&amp;nbsp;QQ浏览器'</span>;</span><br><span class="line">    } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="title function_ invoke__">preg_match</span>(<span class="string">'/UBrowser/i'</span>, <span class="variable">$agent</span>, <span class="variable">$regs</span>)) {</span><br><span class="line">              <span class="variable">$str1</span> = <span class="title function_ invoke__">explode</span>(<span class="string">'rowser/'</span>,  <span class="variable">$agent</span>);</span><br><span class="line">        <span class="variable">$outputer</span> = <span class="string">'&lt;i class="iconfont icon-UCliulanqi"&gt;&lt;/i&gt;&amp;nbsp;UC浏览器'</span>;</span><br><span class="line">    }  <span class="keyword">else</span> <span class="keyword">if</span> (<span class="title function_ invoke__">preg_match</span>(<span class="string">'/Opera[\s|\/]([^\s]+)|OPR/i'</span>, <span class="variable">$agent</span>, <span class="variable">$regs</span>)) {</span><br><span class="line">        <span class="variable">$outputer</span> = <span class="string">'&lt;i class="fab fa-opera"&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;Opera'</span>;</span><br><span class="line">    } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="title function_ invoke__">preg_match</span>(<span class="string">'/YaBrowser/i'</span>, <span class="variable">$agent</span>, <span class="variable">$regs</span>)) {</span><br><span class="line">         <span class="variable">$str1</span> = <span class="title function_ invoke__">explode</span>(<span class="string">'Version/'</span>,  <span class="variable">$agent</span>);</span><br><span class="line">        <span class="variable">$outputer</span> = <span class="string">'&lt;i class="fab fa-yandex-international"&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;Yandex'</span>;</span><br><span class="line">    }<span class="keyword">else</span> <span class="keyword">if</span> (<span class="title function_ invoke__">preg_match</span>(<span class="string">'/Quark/i'</span>, <span class="variable">$agent</span>, <span class="variable">$regs</span>)) {</span><br><span class="line">         <span class="variable">$str1</span> = <span class="title function_ invoke__">explode</span>(<span class="string">'Version/'</span>,  <span class="variable">$agent</span>);</span><br><span class="line">        <span class="variable">$outputer</span> = <span class="string">'&lt;i class="iconfont icon-quark"&gt;&lt;/i&gt;&amp;nbsp;Quark'</span>;</span><br><span class="line">    }<span class="keyword">else</span> <span class="keyword">if</span> (<span class="title function_ invoke__">preg_match</span>(<span class="string">'/XiaoMi/i'</span>, <span class="variable">$agent</span>, <span class="variable">$regs</span>)) {</span><br><span class="line"><span class="variable">$outputer</span> = <span class="string">'&lt;i class="iconfont icon-XiaoMi"&gt;&lt;/i&gt;&amp;nbsp;小米浏览器'</span>;}</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (<span class="title function_ invoke__">preg_match</span>(<span class="string">'/Chrome([\d]*)\/([^\s]+)/i'</span>, <span class="variable">$agent</span>, <span class="variable">$regs</span>)) {</span><br><span class="line"><span class="variable">$str1</span> = <span class="title function_ invoke__">explode</span>(<span class="string">'Chrome/'</span>, <span class="variable">$agent</span>);</span><br><span class="line">        <span class="variable">$outputer</span> = <span class="string">'&lt;i class="fab fa-chrome""&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;Google Chrome'</span>;</span><br><span class="line">    } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="title function_ invoke__">preg_match</span>(<span class="string">'/safari\/([^\s]+)/i'</span>, <span class="variable">$agent</span>, <span class="variable">$regs</span>)) {</span><br><span class="line">         <span class="variable">$str1</span> = <span class="title function_ invoke__">explode</span>(<span class="string">'Version/'</span>,  <span class="variable">$agent</span>);</span><br><span class="line">        <span class="variable">$outputer</span> = <span class="string">'&lt;i class="fab fa-safari"&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;Safari'</span>;</span><br><span class="line">    } </span><br><span class="line">    <span class="keyword">else</span>{</span><br><span class="line">        <span class="variable">$outputer</span> = <span class="string">'&lt;i class="fab fa-chrome"&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;Google Chrome'</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$outputer</span>;</span><br><span class="line">}</span><br><span class="line"><span class="comment">// 获取操作系统信息</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getOs</span>(<span class="params"><span class="variable">$agent</span></span>)</span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="variable">$os</span> = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_ invoke__">preg_match</span>(<span class="string">'/win/i'</span>, <span class="variable">$agent</span>)) {</span><br><span class="line">        <span class="keyword">if</span> (<span class="title function_ invoke__">preg_match</span>(<span class="string">'/nt 6.0/i'</span>, <span class="variable">$agent</span>)) {</span><br><span class="line">            <span class="variable">$os</span> = <span class="string">'&amp;nbsp;&amp;nbsp;&lt;i class="iconfont icon-windows"&gt;&lt;/i&gt;&amp;nbsp;Windows Vista&amp;nbsp;/&amp;nbsp;'</span>;</span><br><span class="line">        } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="title function_ invoke__">preg_match</span>(<span class="string">'/nt 6.1/i'</span>, <span class="variable">$agent</span>)) {</span><br><span class="line">            <span class="variable">$os</span> = <span class="string">'&amp;nbsp;&amp;nbsp;&lt;i class="iconfont icon-windows"&gt;&lt;/i&gt;&amp;nbsp;Windows 7&amp;nbsp;/&amp;nbsp;'</span>;</span><br><span class="line">        } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="title function_ invoke__">preg_match</span>(<span class="string">'/nt 6.2/i'</span>, <span class="variable">$agent</span>)) {</span><br><span class="line">            <span class="variable">$os</span> = <span class="string">'&amp;nbsp;&amp;nbsp;&lt;i class="fab fa-windows"&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;Windows 8&amp;nbsp;/&amp;nbsp;'</span>;</span><br><span class="line">        } <span class="keyword">else</span> <span class="keyword">if</span>(<span class="title function_ invoke__">preg_match</span>(<span class="string">'/nt 6.3/i'</span>, <span class="variable">$agent</span>)) {</span><br><span class="line">            <span class="variable">$os</span> = <span class="string">'&amp;nbsp;&amp;nbsp;&lt;i class="fab fa-windows"&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;Windows 8.1&amp;nbsp;/&amp;nbsp;'</span>;</span><br><span class="line">        } <span class="keyword">else</span> <span class="keyword">if</span>(<span class="title function_ invoke__">preg_match</span>(<span class="string">'/nt 5.1/i'</span>, <span class="variable">$agent</span>)) {</span><br><span class="line">            <span class="variable">$os</span> = <span class="string">'&amp;nbsp;&amp;nbsp;&lt;i class="iconfont icon-windows"&gt;&lt;/i&gt;&amp;nbsp;Windows XP&amp;nbsp;/&amp;nbsp;'</span>;</span><br><span class="line">        } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="title function_ invoke__">preg_match</span>(<span class="string">'/nt 10.0/i'</span>, <span class="variable">$agent</span>)) {</span><br><span class="line">            <span class="variable">$os</span> = <span class="string">'&amp;nbsp;&amp;nbsp;&lt;i class="fab fa-windows"&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;Windows 10&amp;nbsp;/&amp;nbsp;'</span>;</span><br><span class="line">        }<span class="keyword">else</span> <span class="keyword">if</span> (<span class="title function_ invoke__">preg_match</span>(<span class="string">'/nt 11.0/i'</span>, <span class="variable">$agent</span>)) {</span><br><span class="line">            <span class="variable">$os</span> = <span class="string">'&amp;nbsp;&amp;nbsp;&lt;i class="fab fa-windows"&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;Windows 11&amp;nbsp;/&amp;nbsp;'</span>;</span><br><span class="line">        }<span class="keyword">else</span>{</span><br><span class="line">            <span class="variable">$os</span> = <span class="string">'&amp;nbsp;&amp;nbsp;&lt;i class="fab fa-windows"&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;Windows X64&amp;nbsp;/&amp;nbsp;'</span>;</span><br><span class="line">        }</span><br><span class="line">    } </span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (<span class="title function_ invoke__">preg_match</span>(<span class="string">'/android/i'</span>, <span class="variable">$agent</span>)) {</span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_ invoke__">preg_match</span>(<span class="string">'/android 9/i'</span>, <span class="variable">$agent</span>)) {</span><br><span class="line">            <span class="variable">$os</span> = <span class="string">'&amp;nbsp;&amp;nbsp;&lt;i class="fab fa-android"&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;Android Pie&amp;nbsp;/&amp;nbsp;'</span>;</span><br><span class="line">        }<span class="keyword">else</span> <span class="keyword">if</span> (<span class="title function_ invoke__">preg_match</span>(<span class="string">'/android 4/i'</span>, <span class="variable">$agent</span>)) {</span><br><span class="line">            <span class="variable">$os</span> = <span class="string">'&amp;nbsp;&amp;nbsp;&lt;i class="fab fa-android"&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;Android ICS&amp;nbsp;/&amp;nbsp;'</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (<span class="title function_ invoke__">preg_match</span>(<span class="string">'/android 5/i'</span>, <span class="variable">$agent</span>)) {</span><br><span class="line">            <span class="variable">$os</span> = <span class="string">'&amp;nbsp;&amp;nbsp;&lt;i class="fab fa-android"&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;Android Lollipop&amp;nbsp;/&amp;nbsp;'</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (<span class="title function_ invoke__">preg_match</span>(<span class="string">'/android 6/i'</span>, <span class="variable">$agent</span>)) {</span><br><span class="line">            <span class="variable">$os</span> = <span class="string">'&amp;nbsp;&amp;nbsp;&lt;i class="fab fa-android"&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;Android M&amp;nbsp;/&amp;nbsp;'</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (<span class="title function_ invoke__">preg_match</span>(<span class="string">'/android 7/i'</span>, <span class="variable">$agent</span>)) {</span><br><span class="line">            <span class="variable">$os</span> = <span class="string">'&amp;nbsp;&amp;nbsp;&lt;i class="fab fa-android"&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;Android Nougat&amp;nbsp;/&amp;nbsp;'</span>;</span><br><span class="line">        }<span class="keyword">else</span> <span class="keyword">if</span> (<span class="title function_ invoke__">preg_match</span>(<span class="string">'/android 8/i'</span>, <span class="variable">$agent</span>)) {</span><br><span class="line">            <span class="variable">$os</span> = <span class="string">'&amp;nbsp;&amp;nbsp;&lt;i class="fab fa-android"&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;Android Oreo&amp;nbsp;/&amp;nbsp;'</span>;</span><br><span class="line">        }<span class="keyword">else</span> <span class="keyword">if</span> (<span class="title function_ invoke__">preg_match</span>(<span class="string">'/android 10/i'</span>, <span class="variable">$agent</span>)) {</span><br><span class="line">            <span class="variable">$os</span> = <span class="string">'&amp;nbsp;&amp;nbsp;&lt;i class="fab fa-android"&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;Android Q&amp;nbsp;/&amp;nbsp;'</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (<span class="title function_ invoke__">preg_match</span>(<span class="string">'/android 11/i'</span>, <span class="variable">$agent</span>)) {</span><br><span class="line">            <span class="variable">$os</span> = <span class="string">'&amp;nbsp;&amp;nbsp;&lt;i class="fab fa-android"&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;Android 11&amp;nbsp;/&amp;nbsp;'</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (<span class="title function_ invoke__">preg_match</span>(<span class="string">'/android 12/i'</span>, <span class="variable">$agent</span>)) {</span><br><span class="line">            <span class="variable">$os</span> = <span class="string">'&amp;nbsp;&amp;nbsp;&lt;i class="fab fa-android"&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;Android 12&amp;nbsp;/&amp;nbsp;'</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (<span class="title function_ invoke__">preg_match</span>(<span class="string">'/android 13/i'</span>, <span class="variable">$agent</span>)) {</span><br><span class="line">            <span class="variable">$os</span> = <span class="string">'&amp;nbsp;&amp;nbsp;&lt;i class="fab fa-android"&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;Android 13&amp;nbsp;/&amp;nbsp;'</span>;</span><br><span class="line">        }        </span><br><span class="line">        <span class="keyword">else</span>{</span><br><span class="line">            <span class="variable">$os</span> = <span class="string">'&amp;nbsp;&amp;nbsp;&lt;i class="fab fa-android"&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;Android&amp;nbsp;/&amp;nbsp;'</span>;</span><br><span class="line">    }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (<span class="title function_ invoke__">preg_match</span>(<span class="string">'/ubuntu/i'</span>, <span class="variable">$agent</span>)) {</span><br><span class="line">        <span class="variable">$os</span> = <span class="string">'&amp;nbsp;&amp;nbsp;&lt;i class="fab fa-ubuntu"&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;Ubuntu&amp;nbsp;/&amp;nbsp;'</span>;</span><br><span class="line">    }<span class="keyword">else</span> <span class="keyword">if</span> (<span class="title function_ invoke__">preg_match</span>(<span class="string">'/Arch/i'</span>, <span class="variable">$agent</span>)) {</span><br><span class="line">        <span class="variable">$os</span> = <span class="string">'&amp;nbsp;&amp;nbsp;&lt;i class="iconfont icon-Arch-Linux"&gt;&lt;/i&gt;&amp;nbsp;Arch Linux&amp;nbsp;/&amp;nbsp;'</span>;</span><br><span class="line">    }<span class="keyword">else</span> <span class="keyword">if</span> (<span class="title function_ invoke__">preg_match</span>(<span class="string">'/manjaro/i'</span>, <span class="variable">$agent</span>)) {</span><br><span class="line">        <span class="variable">$os</span> = <span class="string">'&amp;nbsp;&amp;nbsp;&lt;i class="iconfont icon-manjaro"&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;Manjaro&amp;nbsp;/&amp;nbsp;'</span>;</span><br><span class="line">    }<span class="keyword">else</span> <span class="keyword">if</span> (<span class="title function_ invoke__">preg_match</span>(<span class="string">'/debian/i'</span>, <span class="variable">$agent</span>)) {</span><br><span class="line">        <span class="variable">$os</span> = <span class="string">'&amp;nbsp;&amp;nbsp;&lt;i class="iconfont icon-debianos"&gt;&lt;/i&gt;&amp;nbsp;Debian&amp;nbsp;/&amp;nbsp;'</span>;</span><br><span class="line">    }<span class="keyword">else</span> <span class="keyword">if</span> (<span class="title function_ invoke__">preg_match</span>(<span class="string">'/linux/i'</span>, <span class="variable">$agent</span>)) {</span><br><span class="line">        <span class="variable">$os</span> = <span class="string">'&amp;nbsp;&amp;nbsp;&lt;i class="fab fa-linux"&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;Linux&amp;nbsp;/&amp;nbsp;'</span>;</span><br><span class="line">    }<span class="keyword">else</span> <span class="keyword">if</span> (<span class="title function_ invoke__">preg_match</span>(<span class="string">'/iPad/i'</span>, <span class="variable">$agent</span>)) {</span><br><span class="line">        <span class="variable">$os</span> = <span class="string">'&amp;nbsp;&amp;nbsp;&lt;i class="fab fa-apple"&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;iOS(iPad)&amp;nbsp;/&amp;nbsp;'</span>;</span><br><span class="line">    }<span class="keyword">else</span> <span class="keyword">if</span> (<span class="title function_ invoke__">preg_match</span>(<span class="string">'/iPhone/i'</span>, <span class="variable">$agent</span>)) {</span><br><span class="line">        <span class="variable">$os</span> = <span class="string">'&amp;nbsp;&amp;nbsp;&lt;i class="fab fa-apple"&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;iOS(iPhone)&amp;nbsp;/&amp;nbsp;'</span>;</span><br><span class="line">    }<span class="keyword">else</span> <span class="keyword">if</span> (<span class="title function_ invoke__">preg_match</span>(<span class="string">'/mac/i'</span>, <span class="variable">$agent</span>)) {</span><br><span class="line">        <span class="variable">$os</span> = <span class="string">'&amp;nbsp;&amp;nbsp;&lt;i class="fab fa-apple"&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;MacOS&amp;nbsp;/&amp;nbsp;'</span>;</span><br><span class="line">    }<span class="keyword">else</span> <span class="keyword">if</span> (<span class="title function_ invoke__">preg_match</span>(<span class="string">'/fusion/i'</span>, <span class="variable">$agent</span>)) {</span><br><span class="line">        <span class="variable">$os</span> = <span class="string">'&amp;nbsp;&amp;nbsp;&lt;i class="fab fa-android"&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;Android&amp;nbsp;/&amp;nbsp;'</span>;</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        <span class="variable">$os</span> = <span class="string">'&amp;nbsp;&amp;nbsp;&lt;i class="fab fa-linux"&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;Linux&amp;nbsp;/&amp;nbsp;'</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$os</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">commentRank</span>(<span class="params"><span class="variable">$widget</span>, <span class="variable">$email</span> = <span class="literal">NULL</span></span>)      </span></span><br><span class="line"><span class="function"></span>{      </span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">empty</span>(<span class="variable">$email</span>)) <span class="keyword">return</span>;      </span><br><span class="line">    <span class="variable">$txt</span> = <span class="title class_">Helper</span>::<span class="title function_ invoke__">options</span>()-&gt;CustomAuthenticated;</span><br><span class="line">    <span class="keyword">if</span>(<span class="variable">$txt</span> == <span class="string">""</span>){</span><br><span class="line">        <span class="variable">$txt</span> = <span class="string">'x||x'</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="variable">$string_arr</span> = <span class="title function_ invoke__">explode</span>(<span class="string">"\r\n"</span>, <span class="variable">$txt</span>);</span><br><span class="line">    <span class="variable">$long</span> = <span class="title function_ invoke__">count</span>(<span class="variable">$string_arr</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="variable">$i</span> = <span class="number">0</span>; <span class="variable">$i</span> &lt; <span class="variable">$long</span>; <span class="variable">$i</span>++) {</span><br><span class="line">        <span class="variable">$mailList</span>[] =  <span class="title function_ invoke__">explode</span>(<span class="string">"||"</span>, <span class="variable">$string_arr</span>[<span class="variable">$i</span>])[<span class="number">0</span>];</span><br><span class="line">        <span class="variable">$authList</span>[] =  <span class="title function_ invoke__">explode</span>(<span class="string">"||"</span>, <span class="variable">$string_arr</span>[<span class="variable">$i</span>])[<span class="number">1</span>];</span><br><span class="line">    }</span><br><span class="line">    <span class="variable">$all</span> = <span class="title function_ invoke__">array_combine</span>(<span class="variable">$mailList</span>,<span class="variable">$authList</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$widget</span>-&gt;authorId == <span class="variable">$widget</span>-&gt;ownerId) {</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">'&lt;span class="vtag vmaster"&gt;博主&lt;/span&gt;'</span>;      </span><br><span class="line">    } </span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (<span class="title function_ invoke__">in_array</span>(<span class="variable">$email</span>, <span class="variable">$mailList</span>)) {</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">'&lt;span class="vtag vauth"&gt;'</span>.<span class="variable">$all</span>[<span class="variable">$email</span>].<span class="string">'&lt;/span&gt;'</span>;</span><br><span class="line">      </span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">else</span>{</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">'&lt;span class="vtag vvisitor"&gt;访客&lt;/span&gt;'</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">//获取评论的锚点链接</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">get_comment_at</span>(<span class="params"><span class="variable">$coid</span></span>)</span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="variable">$db</span>   = <span class="title class_">Typecho_Db</span>::<span class="title function_ invoke__">get</span>();</span><br><span class="line">    <span class="variable">$prow</span> = <span class="variable">$db</span>-&gt;<span class="title function_ invoke__">fetchRow</span>(<span class="variable">$db</span>-&gt;<span class="title function_ invoke__">select</span>(<span class="string">'parent,status'</span>)-&gt;<span class="keyword">from</span>(<span class="string">'table.comments'</span>)</span><br><span class="line">        -&gt;<span class="title function_ invoke__">where</span>(<span class="string">'coid = ?'</span>, <span class="variable">$coid</span>));<span class="comment">//当前评论</span></span><br><span class="line">    <span class="variable">$mail</span> = <span class="string">""</span>;</span><br><span class="line">    <span class="variable">$parent</span> = @<span class="variable">$prow</span>[<span class="string">'parent'</span>];</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$parent</span> != <span class="string">"0"</span>) {<span class="comment">//子评论</span></span><br><span class="line">        <span class="variable">$arow</span> = <span class="variable">$db</span>-&gt;<span class="title function_ invoke__">fetchRow</span>(<span class="variable">$db</span>-&gt;<span class="title function_ invoke__">select</span>(<span class="string">'author,status,mail'</span>)-&gt;<span class="keyword">from</span>(<span class="string">'table.comments'</span>)</span><br><span class="line">            -&gt;<span class="title function_ invoke__">where</span>(<span class="string">'coid = ?'</span>, <span class="variable">$parent</span>));<span class="comment">//查询该条评论的父评论的信息</span></span><br><span class="line">        @<span class="variable">$author</span> = @<span class="variable">$arow</span>[<span class="string">'author'</span>];<span class="comment">//作者名称</span></span><br><span class="line">        <span class="variable">$mail</span> = @<span class="variable">$arow</span>[<span class="string">'mail'</span>];</span><br><span class="line">        <span class="keyword">if</span>(@<span class="variable">$author</span> &amp;&amp; <span class="variable">$arow</span>[<span class="string">'status'</span>] == <span class="string">"approved"</span>){<span class="comment">//父评论作者存在且父评论已经审核通过</span></span><br><span class="line">            <span class="keyword">if</span> (@<span class="variable">$prow</span>[<span class="string">'status'</span>] == <span class="string">"waiting"</span>){</span><br><span class="line">                <span class="keyword">echo</span> <span class="string">'&lt;p class="commentReview"&gt;（评论审核中）)&lt;/p&gt;'</span>;</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">'&lt;a onclick="b(this);return false;" href="#comment-'</span> . <span class="variable">$parent</span> . <span class="string">'"&gt;@'</span> . <span class="variable">$author</span> . <span class="string">'&lt;/a&gt;'</span>;</span><br><span class="line">        }<span class="keyword">else</span>{<span class="comment">//父评论作者不存在或者父评论没有审核通过</span></span><br><span class="line">            <span class="keyword">if</span> (@<span class="variable">$prow</span>[<span class="string">'status'</span>] == <span class="string">"waiting"</span>){</span><br><span class="line">                <span class="keyword">echo</span> <span class="string">'&lt;p class="commentReview"&gt;（评论审核中）)&lt;/p&gt;'</span>;</span><br><span class="line">            }<span class="keyword">else</span>{</span><br><span class="line">                <span class="keyword">echo</span> <span class="string">''</span>;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">    } <span class="keyword">else</span> {<span class="comment">//母评论，无需输出锚点链接</span></span><br><span class="line">        <span class="keyword">if</span> (@<span class="variable">$prow</span>[<span class="string">'status'</span>] == <span class="string">"waiting"</span>){</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">'&lt;p class="commentReview"&gt;（评论审核中）)&lt;/p&gt;'</span>;</span><br><span class="line">        }<span class="keyword">else</span>{</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">''</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 重写评论显示函数</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">threadedComments</span>(<span class="params"><span class="variable">$comments</span>, <span class="variable">$options</span></span>) </span>{</span><br><span class="line">    <span class="variable">$commentClass</span> = <span class="string">''</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$comments</span>-&gt;authorId) {</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$comments</span>-&gt;authorId == <span class="variable">$comments</span>-&gt;ownerId) {</span><br><span class="line">            <span class="variable">$commentClass</span> .= <span class="string">' comment-by-author'</span>;</span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            <span class="variable">$commentClass</span> .= <span class="string">' comment-by-user'</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="variable">$commentLevelClass</span> = <span class="variable">$comments</span>-&gt;levels &gt; <span class="number">0</span> ? <span class="string">' comment-child'</span> : <span class="string">' comment-parent'</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">&lt;li id=<span class="string">"li-&lt;?php <span class="subst">$comments</span>-&gt;theId(); ?&gt;"</span> <span class="class"><span class="keyword">class</span>="<span class="title">comment</span>-<span class="title">body</span>&lt;?<span class="title">php</span> </span></span><br><span class="line"><span class="class"><span class="title">if</span> ($<span class="title">comments</span>-&gt;<span class="title">levels</span> &gt; 0) </span>{</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">' comment-child'</span>;</span><br><span class="line">    <span class="variable">$comments</span>-&gt;<span class="title function_ invoke__">levelsAlt</span>(<span class="string">' comment-level-odd'</span>, <span class="string">' comment-level-even'</span>);</span><br><span class="line">} <span class="keyword">else</span> {</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">' comment-parent'</span>;</span><br><span class="line">}</span><br><span class="line"><span class="variable">$comments</span>-&gt;<span class="title function_ invoke__">alt</span>(<span class="string">' comment-odd'</span>, <span class="string">' comment-even'</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$commentClass</span>;</span><br><span class="line"><span class="meta">?&gt;</span><span class="string">"&gt;</span></span><br><span class="line"><span class="string">    &lt;div id="</span><span class="meta">&lt;?php</span> <span class="variable">$comments</span>-&gt;<span class="title function_ invoke__">theId</span>(); <span class="meta">?&gt;</span><span class="string">"&gt;</span></span><br><span class="line"><span class="string">        &lt;div class="</span>comment-author<span class="string">"&gt;</span></span><br><span class="line"><span class="string">        &lt;?php <span class="subst">$email</span>=<span class="subst">$comments</span>-&gt;mail;<span class="subst">$name</span>=<span class="subst">$comments</span>-&gt;author; <span class="subst">$comments_a</span> = 'class="</span>vimg<span class="string">" style="</span>border-radius: <span class="number">50</span>%;<span class="string">"';echo getGravatar(<span class="subst">$email</span>,<span class="subst">$name</span>,<span class="subst">$comments_a</span>);?&gt;</span></span><br><span class="line"><span class="string">            &lt;cite class="</span>vnick<span class="string">"&gt;&lt;?php <span class="subst">$comments</span>-&gt;author(); ?&gt;&lt;/cite&gt;</span></span><br><span class="line"><span class="string">            &lt;?php commentRank(<span class="subst">$comments</span>, <span class="subst">$comments</span>-&gt;mail); ?&gt;</span></span><br><span class="line"><span class="string">            </span></span><br><span class="line"><span class="string">        &lt;/div&gt;</span></span><br><span class="line"><span class="string">        &lt;div class="</span>vhead<span class="string">"&gt;</span></span><br><span class="line"><span class="string">            &lt;b&gt;&lt;?php <span class="subst">$parentMail</span> = get_comment_at(<span class="subst">$comments</span>-&gt;coid)?&gt;&lt;?php echo <span class="subst">$parentMail</span>;?&gt;&lt;/b&gt;</span></span><br><span class="line"><span class="string">            &lt;a class="</span>vtime<span class="string">" href="</span><span class="meta">&lt;?php</span> <span class="variable">$comments</span>-&gt;<span class="title function_ invoke__">permalink</span>(); <span class="meta">?&gt;</span><span class="string">"&gt;&lt;?php <span class="subst">$comments</span>-&gt;date('Y-m-d H:i'); ?&gt;&lt;/a&gt;</span></span><br><span class="line"><span class="string">            &lt;?php if(Helper::options()-&gt;CloseComments == 'off'): ?&gt;</span></span><br><span class="line"><span class="string">            &lt;span class="</span>comment-reply<span class="string">"&gt;&lt;?php <span class="subst">$comments</span>-&gt;reply(); ?&gt;&lt;/span&gt;</span></span><br><span class="line"><span class="string">            &lt;?php endif ?&gt;</span></span><br><span class="line"><span class="string">        &lt;/div&gt;</span></span><br><span class="line"><span class="string">        &lt;div class="</span>comment-content<span class="string">"&gt;&lt;?php <span class="subst">$comments</span>-&gt;content(); ?&gt;&lt;/div&gt;</span></span><br><span class="line"><span class="string">        &lt;span class="</span>comment-ua<span class="string">"&gt;&lt;?php getOs(<span class="subst">$comments</span>-&gt;agent); ?&gt;&lt;?php getBrowser(<span class="subst">$comments</span>-&gt;agent); ?&gt;&lt;/span&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">&lt;?php if (<span class="subst">$comments</span>-&gt;children) { ?&gt;</span></span><br><span class="line"><span class="string">    &lt;div class="</span>comment-children<span class="string">"&gt;</span></span><br><span class="line"><span class="string">        &lt;?php <span class="subst">$comments</span>-&gt;threadedComments(<span class="subst">$options</span>); ?&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">&lt;?php } ?&gt;</span></span><br><span class="line"><span class="string">&lt;/li&gt;</span></span><br><span class="line"><span class="string">&lt;?php } </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">// 主页封面</span></span><br><span class="line"><span class="string">function img_postthemb(<span class="subst">$thiz</span>,<span class="subst">$default_img</span>){</span></span><br><span class="line"><span class="string">        <span class="subst">$content</span> = <span class="subst">$thiz</span>-&gt;content;</span></span><br><span class="line"><span class="string">        <span class="subst">$ret</span> = preg_match("</span>/\&lt;img.*?src\=\<span class="string">"(.*?)\"[^&gt;]*&gt;/i"</span>, <span class="variable">$content</span>, <span class="variable">$thumbUrl</span>);</span><br><span class="line">        <span class="keyword">if</span>(<span class="variable">$ret</span> === <span class="number">1</span> &amp;&amp; <span class="title function_ invoke__">count</span>(<span class="variable">$thumbUrl</span>) == <span class="number">2</span>){</span><br><span class="line">                <span class="keyword">return</span> <span class="variable">$thumbUrl</span>[<span class="number">1</span>];</span><br><span class="line">        }<span class="keyword">else</span>{</span><br><span class="line">                <span class="keyword">return</span> <span class="variable">$default_img</span>=<span class="string">"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg"</span>;</span><br><span class="line">         }         </span><br><span class="line">} </span><br><span class="line">   </span><br><span class="line"><span class="comment">//  输出标签  </span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">printTag</span>(<span class="params"><span class="variable">$that</span></span>) </span>{ <span class="meta">?&gt;</span></span><br><span class="line">        <span class="meta">&lt;?php</span> <span class="keyword">if</span> (<span class="title function_ invoke__">count</span>(<span class="variable">$that</span>-&gt;tags) &gt; <span class="number">0</span>): <span class="meta">?&gt;</span></span><br><span class="line">            <span class="meta">&lt;?php</span> <span class="keyword">foreach</span>( <span class="variable">$that</span>-&gt;tags <span class="keyword">as</span> <span class="variable">$tags</span>): <span class="meta">?&gt;</span></span><br><span class="line">            &lt;a href=<span class="string">"&lt;?php print(<span class="subst">$tags</span>['permalink']) ?&gt;"</span> <span class="class"><span class="keyword">class</span>="<span class="title">post</span>-<span class="title">meta__tags</span>"&gt;&lt;<span class="title">span</span>&gt;&lt;?<span class="title">php</span> <span class="title">print</span>($<span class="title">tags</span>['<span class="title">name</span>']) ?&gt;&lt;/<span class="title">span</span>&gt;&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line"><span class="class">            &lt;?<span class="title">php</span> <span class="title">endforeach</span>;?&gt;</span></span><br><span class="line"><span class="class">        &lt;?<span class="title">php</span> <span class="title">else</span>: ?&gt;</span></span><br><span class="line"><span class="class">            &lt;<span class="title">a</span> <span class="title">class</span>="<span class="title">post</span>-<span class="title">meta__tags</span>"&gt;&lt;<span class="title">span</span>&gt;无标签&lt;/<span class="title">span</span>&gt;&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line"><span class="class">        &lt;?<span class="title">php</span> <span class="title">endif</span>;?&gt;</span></span><br><span class="line"><span class="class">&lt;?<span class="title">php</span> }</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">//当前人数</span></span><br><span class="line"><span class="class"><span class="title">function</span> <span class="title">onlinePeople</span>()</span>{</span><br><span class="line">   <span class="variable">$online_log</span> = <span class="string">"usr/themes/butterfly/online.dat"</span>; <span class="comment">//保存人数的文件到根目录,</span></span><br><span class="line">   <span class="variable">$timeout</span> = <span class="number">30</span>;<span class="comment">//30秒内没动作者,认为掉线</span></span><br><span class="line">   <span class="keyword">if</span>(!<span class="title function_ invoke__">file_exists</span>(<span class="variable">$online_log</span>) ){</span><br><span class="line">       <span class="title function_ invoke__">fopen</span>(<span class="variable">$online_log</span>, <span class="string">"w"</span>);</span><br><span class="line">   }</span><br><span class="line">   <span class="variable">$entries</span> = <span class="title function_ invoke__">file</span>(<span class="variable">$online_log</span>);</span><br><span class="line">   <span class="variable">$temp</span> = <span class="keyword">array</span>();</span><br><span class="line">   <span class="keyword">for</span> (<span class="variable">$i</span>=<span class="number">0</span>;<span class="variable">$i</span>&lt;<span class="title function_ invoke__">count</span>(<span class="variable">$entries</span>);<span class="variable">$i</span>++){</span><br><span class="line">       <span class="variable">$entry</span> = <span class="title function_ invoke__">explode</span>(<span class="string">","</span>,<span class="title function_ invoke__">trim</span>(<span class="variable">$entries</span>[<span class="variable">$i</span>]));</span><br><span class="line">       <span class="keyword">if</span>((<span class="variable">$entry</span>[<span class="number">0</span>] != <span class="title function_ invoke__">getenv</span>(<span class="string">'REMOTE_ADDR'</span>)) &amp;&amp; (<span class="variable">$entry</span>[<span class="number">1</span>] &gt; <span class="title function_ invoke__">time</span>())) {</span><br><span class="line">           <span class="title function_ invoke__">array_push</span>(<span class="variable">$temp</span>,<span class="variable">$entry</span>[<span class="number">0</span>].<span class="string">","</span>.<span class="variable">$entry</span>[<span class="number">1</span>].<span class="string">"\n"</span>); <span class="comment">//取出其他浏览者的信息,并去掉超时者,保存进$temp</span></span><br><span class="line">           }</span><br><span class="line">   }</span><br><span class="line">   <span class="title function_ invoke__">array_push</span>(<span class="variable">$temp</span>,<span class="title function_ invoke__">getenv</span>(<span class="string">'REMOTE_ADDR'</span>).<span class="string">","</span>.(<span class="title function_ invoke__">time</span>() + (<span class="variable">$timeout</span>)).<span class="string">"\n"</span>); <span class="comment">//更新浏览者的时间</span></span><br><span class="line">   <span class="variable">$slzxrs</span> = <span class="title function_ invoke__">count</span>(<span class="variable">$temp</span>); <span class="comment">//计算在线人数</span></span><br><span class="line">   <span class="variable">$entries</span> = <span class="title function_ invoke__">implode</span>(<span class="string">""</span>,<span class="variable">$temp</span>);</span><br><span class="line">    <span class="comment">//写入文件</span></span><br><span class="line">    <span class="variable">$fp</span> = <span class="title function_ invoke__">fopen</span>(<span class="variable">$online_log</span>,<span class="string">"w"</span>);</span><br><span class="line">    <span class="title function_ invoke__">flock</span>(<span class="variable">$fp</span>,LOCK_EX); <span class="comment">//flock() 不能在NFS以及其他的一些网络文件系统中正常工作</span></span><br><span class="line">    <span class="title function_ invoke__">fputs</span>(<span class="variable">$fp</span>,<span class="variable">$entries</span>);</span><br><span class="line">    <span class="title function_ invoke__">flock</span>(<span class="variable">$fp</span>,LOCK_UN);</span><br><span class="line">    <span class="title function_ invoke__">fclose</span>(<span class="variable">$fp</span>);</span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$slzxrs</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 无插件阅读数</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">get_post_view</span>(<span class="params"><span class="variable">$archive</span></span>)</span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="variable">$db</span> = <span class="title class_">Typecho_Db</span>::<span class="title function_ invoke__">get</span>();</span><br><span class="line">    <span class="variable">$cid</span> = <span class="variable">$archive</span>-&gt;cid;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="title function_ invoke__">array_key_exists</span>(<span class="string">'views'</span>, <span class="variable">$db</span>-&gt;<span class="title function_ invoke__">fetchRow</span>(<span class="variable">$db</span>-&gt;<span class="title function_ invoke__">select</span>()-&gt;<span class="keyword">from</span>(<span class="string">'table.contents'</span>)))) {</span><br><span class="line">        <span class="variable">$db</span>-&gt;<span class="title function_ invoke__">query</span>(<span class="string">'ALTER TABLE `'</span>.<span class="variable">$db</span>-&gt;<span class="title function_ invoke__">getPrefix</span>().<span class="string">'contents` ADD `views` INT(10) DEFAULT 0;'</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="variable">$exist</span> = <span class="variable">$db</span>-&gt;<span class="title function_ invoke__">fetchRow</span>(<span class="variable">$db</span>-&gt;<span class="title function_ invoke__">select</span>(<span class="string">'views'</span>)-&gt;<span class="keyword">from</span>(<span class="string">'table.contents'</span>)-&gt;<span class="title function_ invoke__">where</span>(<span class="string">'cid = ?'</span>, <span class="variable">$cid</span>))[<span class="string">'views'</span>];</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$archive</span>-&gt;<span class="title function_ invoke__">is</span>(<span class="string">'single'</span>)) {</span><br><span class="line">        <span class="variable">$cookie</span> = <span class="title class_">Typecho_Cookie</span>::<span class="title function_ invoke__">get</span>(<span class="string">'contents_views'</span>);</span><br><span class="line">        <span class="variable">$cookie</span> = <span class="variable">$cookie</span> ? <span class="title function_ invoke__">explode</span>(<span class="string">','</span>, <span class="variable">$cookie</span>) : <span class="keyword">array</span>();</span><br><span class="line">        <span class="keyword">if</span> (!<span class="title function_ invoke__">in_array</span>(<span class="variable">$cid</span>, <span class="variable">$cookie</span>)) {</span><br><span class="line">            <span class="variable">$db</span>-&gt;<span class="title function_ invoke__">query</span>(<span class="variable">$db</span>-&gt;<span class="title function_ invoke__">update</span>(<span class="string">'table.contents'</span>)</span><br><span class="line">                -&gt;<span class="title function_ invoke__">rows</span>(<span class="keyword">array</span>(<span class="string">'views'</span> =&gt; (<span class="keyword">int</span>)<span class="variable">$exist</span>+<span class="number">1</span>))</span><br><span class="line">                -&gt;<span class="title function_ invoke__">where</span>(<span class="string">'cid = ?'</span>, <span class="variable">$cid</span>));</span><br><span class="line">            <span class="variable">$exist</span> = (<span class="keyword">int</span>)<span class="variable">$exist</span>+<span class="number">1</span>;</span><br><span class="line">            <span class="title function_ invoke__">array_push</span>(<span class="variable">$cookie</span>, <span class="variable">$cid</span>);</span><br><span class="line">            <span class="variable">$cookie</span> = <span class="title function_ invoke__">implode</span>(<span class="string">','</span>, <span class="variable">$cookie</span>);</span><br><span class="line">            <span class="title class_">Typecho_Cookie</span>::<span class="title function_ invoke__">set</span>(<span class="string">'contents_views'</span>, <span class="variable">$cookie</span>);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$exist</span> == <span class="number">0</span> ? <span class="string">'0'</span>:<span class="string">' '</span>.<span class="variable">$exist</span>;</span><br><span class="line">}</span><br><span class="line"><span class="comment">//总访问量</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">theAllViews</span>(<span class="params"></span>)</span>{</span><br><span class="line">    <span class="variable">$db</span> = <span class="title class_">Typecho_Db</span>::<span class="title function_ invoke__">get</span>();</span><br><span class="line">        <span class="keyword">if</span> (!<span class="title function_ invoke__">array_key_exists</span>(<span class="string">'views'</span>, <span class="variable">$db</span>-&gt;<span class="title function_ invoke__">fetchRow</span>(<span class="variable">$db</span>-&gt;<span class="title function_ invoke__">select</span>()-&gt;<span class="keyword">from</span>(<span class="string">'table.contents'</span>)))) {</span><br><span class="line">        <span class="variable">$db</span>-&gt;<span class="title function_ invoke__">query</span>(<span class="string">'ALTER TABLE `'</span>.<span class="variable">$db</span>-&gt;<span class="title function_ invoke__">getPrefix</span>().<span class="string">'contents` ADD `views` INT(10) DEFAULT 0;'</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="variable">$row</span> = <span class="variable">$db</span>-&gt;<span class="title function_ invoke__">fetchAll</span>(<span class="variable">$db</span>-&gt;<span class="title function_ invoke__">select</span>(<span class="string">'SUM(views)'</span>)-&gt;<span class="keyword">from</span>(<span class="string">'table.contents'</span>));</span><br><span class="line">    <span class="keyword">echo</span> <span class="title function_ invoke__">array_values</span>(<span class="variable">$row</span>[<span class="number">0</span>])[<span class="number">0</span>];</span><br><span class="line">}</span><br><span class="line"><span class="comment">//  回复可见       </span></span><br><span class="line"><span class="title class_">Typecho_Plugin</span>::<span class="title function_ invoke__">factory</span>(<span class="string">'Widget_Abstract_Contents'</span>)-&gt;excerptEx = <span class="keyword">array</span>(<span class="string">'myyodux'</span>,<span class="string">'one'</span>);</span><br><span class="line"><span class="title class_">Typecho_Plugin</span>::<span class="title function_ invoke__">factory</span>(<span class="string">'Widget_Abstract_Contents'</span>)-&gt;contentEx = <span class="keyword">array</span>(<span class="string">'myyodux'</span>,<span class="string">'one'</span>);</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">myyodux</span> </span>{</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">one</span>(<span class="params"><span class="variable">$con</span>,<span class="variable">$obj</span>,<span class="variable">$text</span></span>)</span></span><br><span class="line"><span class="function">    </span>{</span><br><span class="line">      <span class="variable">$text</span> = <span class="keyword">empty</span>(<span class="variable">$text</span>)?<span class="variable">$con</span>:<span class="variable">$text</span>;</span><br><span class="line">      <span class="keyword">if</span>(!<span class="variable">$obj</span>-&gt;<span class="title function_ invoke__">is</span>(<span class="string">'single'</span>)){</span><br><span class="line">      <span class="variable">$text</span> = <span class="title function_ invoke__">preg_replace</span>(<span class="string">"/\[hide\](.*?)\[\/hide\]/sm"</span>,<span class="string">''</span>,<span class="variable">$text</span>);</span><br><span class="line">    <span class="comment">//   $text = preg_replace("/\n\s*){3,}/sm",' ',$text);</span></span><br><span class="line">      }</span><br><span class="line">      <span class="keyword">return</span> <span class="variable">$text</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 显示上一篇</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">* 如果没有下一篇,返回null</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">thePrevCid</span>(<span class="params"><span class="variable">$widget</span>, <span class="variable">$default</span> = <span class="literal">NULL</span></span>) </span>{</span><br><span class="line">  <span class="variable">$db</span> = <span class="title class_">Typecho_Db</span>::<span class="title function_ invoke__">get</span>();</span><br><span class="line">  <span class="variable">$sql</span> = <span class="variable">$db</span>-&gt;<span class="title function_ invoke__">select</span>()-&gt;<span class="keyword">from</span>(<span class="string">'table.contents'</span>)</span><br><span class="line">  -&gt;<span class="title function_ invoke__">where</span>(<span class="string">'table.contents.created &lt; ?'</span>, <span class="variable">$widget</span>-&gt;created)</span><br><span class="line">  -&gt;<span class="title function_ invoke__">where</span>(<span class="string">'table.contents.status = ?'</span>, <span class="string">'publish'</span>)</span><br><span class="line">  -&gt;<span class="title function_ invoke__">where</span>(<span class="string">'table.contents.type = ?'</span>, <span class="variable">$widget</span>-&gt;type)</span><br><span class="line">  -&gt;<span class="title function_ invoke__">where</span>(<span class="string">'table.contents.password IS NULL'</span>)</span><br><span class="line">  -&gt;<span class="title function_ invoke__">order</span>(<span class="string">'table.contents.created'</span>, <span class="title class_">Typecho_Db</span>::<span class="variable constant_">SORT_DESC</span>)</span><br><span class="line">  -&gt;<span class="title function_ invoke__">limit</span>(<span class="number">1</span>);</span><br><span class="line">  <span class="variable">$content</span> = <span class="variable">$db</span>-&gt;<span class="title function_ invoke__">fetchRow</span>(<span class="variable">$sql</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (<span class="variable">$content</span>) {</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$content</span>[<span class="string">"cid"</span>];</span><br><span class="line">  } <span class="keyword">else</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$default</span>;</span><br><span class="line">  }</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 获取下一篇文章mid</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">* 如果没有下一篇,返回null</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">theNextCid</span>(<span class="params"><span class="variable">$widget</span>, <span class="variable">$default</span> = <span class="literal">NULL</span></span>) </span>{</span><br><span class="line">  <span class="variable">$db</span> = <span class="title class_">Typecho_Db</span>::<span class="title function_ invoke__">get</span>();</span><br><span class="line">  <span class="variable">$sql</span> = <span class="variable">$db</span>-&gt;<span class="title function_ invoke__">select</span>()-&gt;<span class="keyword">from</span>(<span class="string">'table.contents'</span>)</span><br><span class="line">  -&gt;<span class="title function_ invoke__">where</span>(<span class="string">'table.contents.created &gt; ?'</span>, <span class="variable">$widget</span>-&gt;created)</span><br><span class="line">  -&gt;<span class="title function_ invoke__">where</span>(<span class="string">'table.contents.status = ?'</span>, <span class="string">'publish'</span>)</span><br><span class="line">  -&gt;<span class="title function_ invoke__">where</span>(<span class="string">'table.contents.type = ?'</span>, <span class="variable">$widget</span>-&gt;type)</span><br><span class="line">  -&gt;<span class="title function_ invoke__">where</span>(<span class="string">'table.contents.password IS NULL'</span>)</span><br><span class="line">  -&gt;<span class="title function_ invoke__">order</span>(<span class="string">'table.contents.created'</span>, <span class="title class_">Typecho_Db</span>::<span class="variable constant_">SORT_ASC</span>)</span><br><span class="line">  -&gt;<span class="title function_ invoke__">limit</span>(<span class="number">1</span>);</span><br><span class="line">  <span class="variable">$content</span> = <span class="variable">$db</span>-&gt;<span class="title function_ invoke__">fetchRow</span>(<span class="variable">$sql</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (<span class="variable">$content</span>) {</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$content</span>[<span class="string">"cid"</span>];</span><br><span class="line">  } <span class="keyword">else</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$default</span>;</span><br><span class="line">  }</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="comment">//调用博主最近文章更新时间</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">get_last_update</span>(<span class="params"></span>)</span>{</span><br><span class="line">    <span class="variable">$num</span> = <span class="string">'1'</span>;</span><br><span class="line">    <span class="variable">$type</span> = <span class="string">'post'</span>;</span><br><span class="line">    <span class="variable">$status</span> = <span class="string">'publish'</span>;</span><br><span class="line">    <span class="variable">$now</span> = <span class="title function_ invoke__">time</span>();</span><br><span class="line">    <span class="variable">$db</span> = <span class="title class_">Typecho_Db</span>::<span class="title function_ invoke__">get</span>();</span><br><span class="line">    <span class="variable">$prefix</span> = <span class="variable">$db</span>-&gt;<span class="title function_ invoke__">getPrefix</span>();</span><br><span class="line">    <span class="variable">$create</span> = <span class="variable">$db</span>-&gt;<span class="title function_ invoke__">fetchRow</span>(<span class="variable">$db</span>-&gt;<span class="title function_ invoke__">select</span>(<span class="string">'created'</span>)-&gt;<span class="keyword">from</span>(<span class="string">'table.contents'</span>)-&gt;<span class="title function_ invoke__">where</span>(<span class="string">'table.contents.type=? and status=?'</span>,<span class="variable">$type</span>,<span class="variable">$status</span>)-&gt;<span class="title function_ invoke__">order</span>(<span class="string">'created'</span>,<span class="title class_">Typecho_Db</span>::<span class="variable constant_">SORT_DESC</span>)-&gt;<span class="title function_ invoke__">limit</span>(<span class="variable">$num</span>));</span><br><span class="line">    <span class="variable">$update</span> = <span class="variable">$db</span>-&gt;<span class="title function_ invoke__">fetchRow</span>(<span class="variable">$db</span>-&gt;<span class="title function_ invoke__">select</span>(<span class="string">'modified'</span>)-&gt;<span class="keyword">from</span>(<span class="string">'table.contents'</span>)-&gt;<span class="title function_ invoke__">where</span>(<span class="string">'table.contents.type=? and status=?'</span>,<span class="variable">$type</span>,<span class="variable">$status</span>)-&gt;<span class="title function_ invoke__">order</span>(<span class="string">'modified'</span>,<span class="title class_">Typecho_Db</span>::<span class="variable constant_">SORT_DESC</span>)-&gt;<span class="title function_ invoke__">limit</span>(<span class="variable">$num</span>));</span><br><span class="line">    <span class="keyword">if</span>(<span class="variable">$create</span>&gt;=<span class="variable">$update</span>){</span><br><span class="line">      <span class="keyword">echo</span> <span class="title class_">Typecho_I18n</span>::<span class="title function_ invoke__">dateWord</span>(<span class="keyword">isset</span>(<span class="variable">$create</span>[<span class="string">'created'</span>]), <span class="variable">$now</span>);</span><br><span class="line">    }<span class="keyword">else</span>{</span><br><span class="line">        <span class="variable">$lastday</span> = <span class="title function_ invoke__">floor</span>(<span class="title function_ invoke__">date</span>(<span class="variable">$now</span>-<span class="variable">$update</span>[<span class="string">'modified'</span>])/<span class="number">86400</span>);</span><br><span class="line">        <span class="keyword">if</span>(<span class="variable">$lastday</span>&gt;<span class="number">365</span>){<span class="variable">$lastyear</span> = <span class="title function_ invoke__">floor</span>(<span class="title function_ invoke__">date</span>(<span class="variable">$now</span>-<span class="variable">$update</span>[<span class="string">'modified'</span>])/<span class="number">30758400</span>);<span class="keyword">echo</span> <span class="variable">$lastyear</span> . <span class="string">" 年前"</span> ;</span><br><span class="line">        }  <span class="keyword">elseif</span>(<span class="variable">$lastday</span> &gt; <span class="number">30</span>){<span class="variable">$lastmom</span> = <span class="title function_ invoke__">floor</span>(<span class="title function_ invoke__">date</span>(<span class="variable">$now</span>-<span class="variable">$update</span>[<span class="string">'modified'</span>])/<span class="number">2592000</span>);<span class="keyword">echo</span> <span class="variable">$lastmom</span> .<span class="string">" 个月前"</span> ;</span><br><span class="line">        }<span class="keyword">elseif</span>(<span class="variable">$lastday</span> &lt; <span class="number">1</span>){<span class="variable">$lasthour</span> = <span class="title function_ invoke__">floor</span>(<span class="title function_ invoke__">date</span>(<span class="variable">$now</span>-<span class="variable">$update</span>[<span class="string">'modified'</span>])/<span class="number">3600</span>);</span><br><span class="line">            <span class="keyword">if</span>(<span class="variable">$lasthour</span>&lt;<span class="number">1</span>){<span class="variable">$lastmin</span> = <span class="title function_ invoke__">floor</span>(<span class="title function_ invoke__">date</span>(<span class="variable">$now</span>-<span class="variable">$update</span>[<span class="string">'modified'</span>])/<span class="number">60</span>);</span><br><span class="line">                <span class="keyword">if</span>(<span class="variable">$lastmin</span> &lt; <span class="number">1</span>){<span class="variable">$lastsecd</span> = <span class="title function_ invoke__">floor</span>(<span class="title function_ invoke__">date</span>(<span class="variable">$now</span>-<span class="variable">$update</span>[<span class="string">'modified'</span>])); <span class="keyword">echo</span> <span class="variable">$lastsecd</span> .<span class="string">" 秒前"</span> ;}</span><br><span class="line">                <span class="keyword">else</span>{<span class="keyword">echo</span> <span class="variable">$lastmin</span> .<span class="string">" 分钟前"</span> ;}</span><br><span class="line">            }<span class="keyword">else</span>{<span class="keyword">echo</span> <span class="variable">$lasthour</span> .<span class="string">" 小时前"</span> ;}</span><br><span class="line">        }<span class="keyword">else</span>{<span class="keyword">echo</span> <span class="variable">$lastday</span>.<span class="string">" 天前"</span>;}}</span><br><span class="line">}</span><br><span class="line"><span class="comment">//文章阅读时间统计</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">art_time</span> (<span class="params"><span class="variable">$cid</span></span>)</span>{</span><br><span class="line">    <span class="variable">$db</span>=<span class="title class_">Typecho_Db</span>::<span class="variable constant_">get</span> ();</span><br><span class="line">    <span class="variable">$rs</span>=<span class="variable">$db</span>-&gt;<span class="title function_ invoke__">fetchRow</span> (<span class="variable">$db</span>-&gt;<span class="title function_ invoke__">select</span> (<span class="string">'table.contents.text'</span>)-&gt;<span class="keyword">from</span> (<span class="string">'table.contents'</span>)-&gt;<span class="title function_ invoke__">where</span> (<span class="string">'table.contents.cid=?'</span>,<span class="variable">$cid</span>)-&gt;<span class="title function_ invoke__">order</span> (<span class="string">'table.contents.cid'</span>,<span class="title class_">Typecho_Db</span>::<span class="variable constant_">SORT_ASC</span>)-&gt;<span class="title function_ invoke__">limit</span> (<span class="number">1</span>));</span><br><span class="line">    <span class="variable">$text</span> = <span class="title function_ invoke__">preg_replace</span>(<span class="string">"/[^\x{4e00}-\x{9fa5}]/u"</span>, <span class="string">""</span>, <span class="variable">$rs</span>[<span class="string">'text'</span>]);</span><br><span class="line">    <span class="variable">$text_word</span> = <span class="title function_ invoke__">mb_strlen</span>(<span class="variable">$text</span>,<span class="string">'utf-8'</span>);</span><br><span class="line">    <span class="keyword">echo</span> <span class="title function_ invoke__">ceil</span>(<span class="variable">$text_word</span> / <span class="number">400</span>);</span><br><span class="line">}</span><br><span class="line"><span class="comment">// 自定义编辑器</span></span><br><span class="line"><span class="title class_">Typecho_Plugin</span>::<span class="title function_ invoke__">factory</span>(<span class="string">'admin/write-post.php'</span>)-&gt;bottom = <span class="keyword">array</span>(<span class="string">'editor'</span>, <span class="string">'reset'</span>);</span><br><span class="line"><span class="title class_">Typecho_Plugin</span>::<span class="title function_ invoke__">factory</span>(<span class="string">'admin/write-page.php'</span>)-&gt;bottom = <span class="keyword">array</span>(<span class="string">'editor'</span>, <span class="string">'reset'</span>);</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">editor</span></span></span><br><span class="line"><span class="class"></span>{</span><br><span class="line">  <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">reset</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>{</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"&lt;script src='"</span> . <span class="title class_">Helper</span>::<span class="title function_ invoke__">options</span>()-&gt;themeUrl . <span class="string">'/edit/extend.js?v1.6.3'</span> . <span class="string">"'&gt;&lt;/script&gt;"</span>;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"&lt;link rel='stylesheet' href='"</span> . <span class="title class_">Helper</span>::<span class="title function_ invoke__">options</span>()-&gt;themeUrl . <span class="string">'/edit/edit.css?v1.6.3'</span> . <span class="string">"'&gt;"</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"><span class="comment">/* 判断是否是移动端 */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isMobile</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable">$_SERVER</span>[<span class="string">'HTTP_X_WAP_PROFILE'</span>]))</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable">$_SERVER</span>[<span class="string">'HTTP_VIA'</span>])) {</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_ invoke__">stristr</span>(<span class="variable">$_SERVER</span>[<span class="string">'HTTP_VIA'</span>], <span class="string">"wap"</span>) ? <span class="literal">true</span> : <span class="literal">false</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable">$_SERVER</span>[<span class="string">'HTTP_USER_AGENT'</span>])) {</span><br><span class="line">        <span class="variable">$clientkeywords</span> = <span class="keyword">array</span>(<span class="string">'nokia'</span>, <span class="string">'sony'</span>, <span class="string">'ericsson'</span>, <span class="string">'mot'</span>, <span class="string">'samsung'</span>, <span class="string">'htc'</span>, <span class="string">'sgh'</span>, <span class="string">'lg'</span>, <span class="string">'sharp'</span>, <span class="string">'sie-'</span>, <span class="string">'philips'</span>, <span class="string">'panasonic'</span>, <span class="string">'alcatel'</span>, <span class="string">'lenovo'</span>, <span class="string">'iphone'</span>, <span class="string">'ipod'</span>, <span class="string">'blackberry'</span>, <span class="string">'meizu'</span>, <span class="string">'android'</span>, <span class="string">'netfront'</span>, <span class="string">'symbian'</span>, <span class="string">'ucweb'</span>, <span class="string">'windowsce'</span>, <span class="string">'palm'</span>, <span class="string">'operamini'</span>, <span class="string">'operamobi'</span>, <span class="string">'openwave'</span>, <span class="string">'nexusone'</span>, <span class="string">'cldc'</span>, <span class="string">'midp'</span>, <span class="string">'wap'</span>, <span class="string">'mobile'</span>);</span><br><span class="line">        <span class="keyword">if</span> (<span class="title function_ invoke__">preg_match</span>(<span class="string">"/("</span> . <span class="title function_ invoke__">implode</span>(<span class="string">'|'</span>, <span class="variable">$clientkeywords</span>) . <span class="string">")/i"</span>, <span class="title function_ invoke__">strtolower</span>(<span class="variable">$_SERVER</span>[<span class="string">'HTTP_USER_AGENT'</span>])))</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable">$_SERVER</span>[<span class="string">'HTTP_ACCEPT'</span>])) {</span><br><span class="line">        <span class="keyword">if</span> ((<span class="title function_ invoke__">strpos</span>(<span class="variable">$_SERVER</span>[<span class="string">'HTTP_ACCEPT'</span>], <span class="string">'vnd.wap.wml'</span>) !== <span class="literal">false</span>) &amp;&amp; (<span class="title function_ invoke__">strpos</span>(<span class="variable">$_SERVER</span>[<span class="string">'HTTP_ACCEPT'</span>], <span class="string">'text/html'</span>) === <span class="literal">false</span> || (<span class="title function_ invoke__">strpos</span>(<span class="variable">$_SERVER</span>[<span class="string">'HTTP_ACCEPT'</span>], <span class="string">'vnd.wap.wml'</span>) &lt; <span class="title function_ invoke__">strpos</span>(<span class="variable">$_SERVER</span>[<span class="string">'HTTP_ACCEPT'</span>], <span class="string">'text/html'</span>)))) {</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">RunTime</span>(<span class="params"></span>)</span>{</span><br><span class="line">    <span class="variable">$site_create_time</span> = <span class="title function_ invoke__">strtotime</span>(<span class="title class_">Helper</span>::<span class="title function_ invoke__">options</span>()-&gt;buildtime);</span><br><span class="line">    <span class="variable">$time</span> = <span class="title function_ invoke__">time</span>() - <span class="variable">$site_create_time</span>;</span><br><span class="line">    <span class="keyword">if</span>(<span class="title function_ invoke__">is_numeric</span>(<span class="variable">$time</span>)){</span><br><span class="line">        <span class="keyword">if</span>(<span class="variable">$time</span> &gt;= <span class="number">86400</span>){</span><br><span class="line">            <span class="variable">$days</span> = <span class="title function_ invoke__">floor</span>(<span class="variable">$time</span>/<span class="number">86400</span>);</span><br><span class="line">            <span class="variable">$time</span> = (<span class="variable">$time</span>%<span class="number">86400</span>);</span><br><span class="line">            <span class="keyword">echo</span> <span class="variable">$days</span>.<span class="string">' 天'</span>;</span><br><span class="line">        }<span class="keyword">else</span>{</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">'1 天'</span>;</span><br><span class="line">        }</span><br><span class="line">        </span><br><span class="line">    }<span class="keyword">else</span>{</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">''</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">RecapOutPut</span>(<span class="params"><span class="variable">$login</span></span>) </span>{</span><br><span class="line">		<span class="variable">$siteKey</span> = <span class="title class_">Helper</span>::<span class="title function_ invoke__">options</span>()-&gt;siteKey;</span><br><span class="line">		<span class="variable">$secretKey</span> = <span class="title class_">Helper</span>::<span class="title function_ invoke__">options</span>()-&gt;secretKey;</span><br><span class="line">		<span class="keyword">if</span> (<span class="variable">$siteKey</span> !== <span class="string">""</span> &amp;&amp; <span class="variable">$secretKey</span> !== <span class="string">""</span> &amp;&amp; !<span class="variable">$login</span>) {</span><br><span class="line">		    <span class="keyword">echo</span> <span class="string">'&lt;script src="https://recaptcha.net/recaptcha/api.js" async defer data-no-instant&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="string">                              &lt;div class="g-recaptcha" data-sitekey='</span> . <span class="variable">$siteKey</span> . <span class="string">'&gt;&lt;/div&gt;'</span>;</span><br><span class="line">      	}		</span><br><span class="line">      	<span class="keyword">if</span> (<span class="title class_">Helper</span>::<span class="title function_ invoke__">options</span>()-&gt;hcaptchaSecretKey !== <span class="string">""</span> &amp;&amp; <span class="title class_">Helper</span>::<span class="title function_ invoke__">options</span>()-&gt;hcaptchaAPIKey !== <span class="string">""</span> &amp;&amp; !<span class="variable">$login</span>) {</span><br><span class="line">		    <span class="keyword">echo</span> <span class="string">'&lt;script src="https://www.hCaptcha.com/1/api.js" async defer&gt;&lt;/script&gt;&lt;div class="h-captcha" data-sitekey='</span>. <span class="title class_">Helper</span>::<span class="title function_ invoke__">options</span>()-&gt;hcaptchaSecretKey .<span class="string">'&gt;&lt;/div&gt;'</span>;</span><br><span class="line">      	}</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">comments_filter</span>(<span class="params"><span class="variable">$comment</span></span>) </span>{</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable">$_REQUEST</span>[<span class="string">'text'</span>]) != <span class="literal">null</span>) {</span><br><span class="line">        <span class="keyword">if</span>(<span class="variable">$_POST</span>[<span class="string">'g-recaptcha-response'</span>] == <span class="literal">null</span>) {</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Typecho_Widget_Exception</span>(<span class="title function_ invoke__">_t</span>(<span class="string">'人机验证失败,确认你加载了谷歌人机验证并通过验证'</span>));</span><br><span class="line">        }<span class="keyword">else</span> {</span><br><span class="line">		<span class="variable">$siteKey</span> = <span class="title class_">Helper</span>::<span class="title function_ invoke__">options</span>()-&gt;siteKey;</span><br><span class="line">		<span class="variable">$secretKey</span> = <span class="title class_">Helper</span>::<span class="title function_ invoke__">options</span>()-&gt;secretKey;</span><br><span class="line">			<span class="function"><span class="keyword">function</span> <span class="title">getCaptcha</span>(<span class="params"><span class="variable">$recaptcha_response</span>, <span class="variable">$secretKey</span></span>) </span>{</span><br><span class="line">				<span class="variable">$response</span> = <span class="title function_ invoke__">file_get_contents</span>(<span class="string">"https://recaptcha.net/recaptcha/api/siteverify?secret="</span>.<span class="variable">$secretKey</span>.<span class="string">"&amp;response="</span>.<span class="variable">$recaptcha_response</span>);</span><br><span class="line">				<span class="variable">$response</span> = <span class="title function_ invoke__">json_decode</span>(<span class="variable">$response</span>);</span><br><span class="line">				<span class="keyword">return</span> <span class="variable">$response</span>;</span><br><span class="line">			}</span><br><span class="line">			<span class="variable">$resp</span> = <span class="title function_ invoke__">getCaptcha</span>(<span class="variable">$_POST</span>[<span class="string">'g-recaptcha-response'</span>], <span class="variable">$secretKey</span>);</span><br><span class="line">			</span><br><span class="line">			<span class="keyword">if</span> (<span class="variable">$resp</span>-&gt;success == <span class="literal">true</span>) {</span><br><span class="line">				<span class="keyword">return</span> <span class="variable">$comments</span>;</span><br><span class="line">			} <span class="keyword">else</span> {</span><br><span class="line">            <span class="keyword">switch</span> (<span class="variable">$resp</span>-&gt;error-codes) {</span><br><span class="line">			<span class="keyword">case</span> <span class="string">'{[0] =&gt; "timeout-or-duplicate"}'</span>:</span><br><span class="line">				<span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Typecho_Widget_Exception</span>(<span class="title function_ invoke__">_t</span>(<span class="string">'验证时间超过2分钟或连续重复发言！'</span>));</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			<span class="keyword">case</span> <span class="string">'{[0] =&gt; "invalid-input-secret"}'</span>:</span><br><span class="line">				<span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Typecho_Widget_Exception</span>(<span class="title function_ invoke__">_t</span>(<span class="string">'博主填了无效的siteKey或者secretKey...'</span>));</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> <span class="string">'{[0] =&gt; "bad-request"}'</span>:</span><br><span class="line">                                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Typecho_Widget_Exception</span>(<span class="title function_ invoke__">_t</span>(<span class="string">'请求错误！请检查网络'</span>));</span><br><span class="line">                                <span class="keyword">break</span>;</span><br><span class="line">			<span class="keyword">default</span>:</span><br><span class="line">				<span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Typecho_Widget_Exception</span>(<span class="title function_ invoke__">_t</span>(<span class="string">'很遗憾，您被当成了机器人...'</span>));</span><br><span class="line">			}</span><br><span class="line">			}</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$comment</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">hcaptcha_filter</span>(<span class="params"><span class="variable">$comment</span></span>)</span>{</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable">$_REQUEST</span>[<span class="string">'text'</span>]) != <span class="literal">null</span>) {</span><br><span class="line">    <span class="keyword">if</span>(<span class="variable">$_POST</span>[<span class="string">'h-captcha-response'</span>] == <span class="literal">null</span>) {</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Typecho_Widget_Exception</span>(<span class="title function_ invoke__">_t</span>(<span class="string">'人机验证失败,确认你加载了hcaptcha人机验证并通过验证'</span>));</span><br><span class="line">    }<span class="keyword">else</span>{</span><br><span class="line">     <span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$_POST</span>[<span class="string">'h-captcha-response'</span>]) &amp;&amp; !<span class="keyword">empty</span>(<span class="variable">$_POST</span>[<span class="string">'h-captcha-response'</span>])){</span><br><span class="line">         <span class="variable">$secret</span> = <span class="title class_">Helper</span>::<span class="title function_ invoke__">options</span>()-&gt;hcaptchaAPIKey;</span><br><span class="line">         <span class="variable">$verifyResponse</span> = <span class="title function_ invoke__">file_get_contents</span>(<span class="string">'https://hcaptcha.com/siteverify?secret='</span>.<span class="variable">$secret</span>.<span class="string">'&amp;response='</span>.<span class="variable">$_POST</span>[<span class="string">'h-captcha-response'</span>].<span class="string">'&amp;remoteip='</span>.<span class="variable">$_SERVER</span>[<span class="string">'REMOTE_ADDR'</span>]);</span><br><span class="line">         <span class="variable">$responseData</span> = <span class="title function_ invoke__">json_decode</span>(<span class="variable">$verifyResponse</span>);</span><br><span class="line">         <span class="keyword">if</span>(<span class="variable">$responseData</span>-&gt;success == <span class="literal">true</span>)</span><br><span class="line">         {</span><br><span class="line">             <span class="keyword">return</span> <span class="variable">$comments</span>;</span><br><span class="line">         }<span class="keyword">else</span>{</span><br><span class="line">             <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Typecho_Widget_Exception</span>(<span class="title function_ invoke__">_t</span>(<span class="variable">$responseData</span>-&gt;error-codes));</span><br><span class="line">         }</span><br><span class="line">     }        </span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="keyword">return</span> <span class="variable">$comment</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// 微博热搜</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">weibohot</span>(<span class="params"></span>)</span>{</span><br><span class="line"><span class="variable">$api</span> = <span class="title function_ invoke__">file_get_contents</span>(<span class="string">'https://weibo.com/ajax/side/hotSearch'</span>);</span><br><span class="line"><span class="variable">$data</span> = <span class="title function_ invoke__">json_decode</span>(<span class="variable">$api</span>,<span class="literal">true</span>)[<span class="string">'data'</span>][<span class="string">'realtime'</span>];</span><br><span class="line"></span><br><span class="line"><span class="variable">$jyzy</span> = <span class="keyword">array</span>(</span><br><span class="line">	<span class="string">'电影'</span> =&gt; <span class="string">'影'</span>,</span><br><span class="line">	<span class="string">'剧集'</span> =&gt; <span class="string">'剧'</span>,</span><br><span class="line">	<span class="string">'综艺'</span> =&gt; <span class="string">'综'</span>,</span><br><span class="line">	<span class="string">'音乐'</span> =&gt; <span class="string">'音'</span>,</span><br><span class="line">	<span class="string">'盛典'</span> =&gt; <span class="string">'盛'</span>,</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="variable">$hotness</span> = <span class="keyword">array</span>(</span><br><span class="line">    <span class="string">'爆'</span> =&gt; <span class="string">'weibo-boom'</span>,</span><br><span class="line">    <span class="string">'热'</span> =&gt; <span class="string">'weibo-hot'</span>,</span><br><span class="line">    <span class="string">'沸'</span> =&gt; <span class="string">'weibo-boil'</span>,</span><br><span class="line">    <span class="string">'新'</span> =&gt; <span class="string">'weibo-new'</span>,</span><br><span class="line">    <span class="string">'荐'</span> =&gt; <span class="string">'weibo-recommend'</span>,</span><br><span class="line">    <span class="string">'音'</span> =&gt; <span class="string">'weibo-jyzy'</span>,</span><br><span class="line">    <span class="string">'影'</span> =&gt; <span class="string">'weibo-jyzy'</span>,</span><br><span class="line">    <span class="string">'剧'</span> =&gt; <span class="string">'weibo-jyzy'</span>,</span><br><span class="line">    <span class="string">'综'</span> =&gt; <span class="string">'weibo-jyzy'</span>,</span><br><span class="line">    <span class="string">'盛'</span> =&gt; <span class="string">'weibo-jyzy'</span>,</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line"><span class="keyword">foreach</span>(<span class="variable">$data</span> <span class="keyword">as</span> <span class="variable">$item</span>){</span><br><span class="line">	<span class="variable">$hot</span> = <span class="string">'荐'</span>;</span><br><span class="line">	<span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$item</span>[<span class="string">'is_ad'</span>])){</span><br><span class="line">		<span class="keyword">continue</span>;</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$item</span>[<span class="string">'is_boom'</span>])){</span><br><span class="line">		<span class="variable">$hot</span> = <span class="string">'爆'</span>;</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$item</span>[<span class="string">'is_hot'</span>])){</span><br><span class="line">		<span class="variable">$hot</span> = <span class="string">'热'</span>;</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$item</span>[<span class="string">'is_fei'</span>])){</span><br><span class="line">		<span class="variable">$hot</span> = <span class="string">'沸'</span>;</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$item</span>[<span class="string">'is_new'</span>])){</span><br><span class="line">		<span class="variable">$hot</span> = <span class="string">'新'</span>;</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$item</span>[<span class="string">'flag_desc'</span>])){</span><br><span class="line">		<span class="variable">$hot</span> = <span class="variable">$jyzy</span>[<span class="variable">$item</span>[<span class="string">'flag_desc'</span>]];</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">echo</span> <span class="string">'&lt;div class="weibo-list-item"&gt;&lt;div class="weibo-hotness '</span>.<span class="variable">$hotness</span>[<span class="variable">$hot</span>].<span class="string">'"&gt;'</span>.<span class="variable">$hot</span>.<span class="string">'&lt;/div&gt;&lt;span class="weibo-title"&gt;&lt;a title="'</span>.<span class="variable">$item</span>[<span class="string">'note'</span>].<span class="string">'" href="https://s.weibo.com/weibo?q=%23'</span> . <span class="variable">$item</span>[<span class="string">'word'</span>] . <span class="string">'%23" target="_blank" rel="external nofollow noreferrer" style="color:#a08ed5"&gt;'</span>.<span class="variable">$item</span>[<span class="string">'note'</span>].<span class="string">'&lt;/a&gt;&lt;/span&gt;&lt;div class="weibo-num"&gt;&lt;span&gt;'</span>.<span class="variable">$item</span>[<span class="string">'num'</span>].<span class="string">'&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;'</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>footer.php</p><figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> <span class="keyword">if</span> (!<span class="title function_ invoke__">defined</span>(<span class="string">'__TYPECHO_ROOT_DIR__'</span>)) <span class="keyword">exit</span>; <span class="meta">?&gt;</span></span><br><span class="line"><span class="meta">&lt;?php</span> <span class="keyword">if</span>(!<span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">page404</span>()): <span class="meta">?&gt;</span></span><br><span class="line">&lt;footer id=<span class="string">"footer"</span>&gt;</span><br><span class="line">    &lt;div id=<span class="string">"footer-wrap"</span>&gt;&lt;div <span class="class"><span class="keyword">class</span>="<span class="title">copyright</span>"&gt;   </span></span><br><span class="line"><span class="class">    &lt;<span class="title">div</span> <span class="title">class</span>="<span class="title">copyright</span>"&gt;©&lt;?<span class="title">php</span> <span class="title">echo</span> <span class="title">date</span>('<span class="title">Y</span>'); ?&gt; <span class="title">By</span> &lt;?<span class="title">php</span> $<span class="title">this</span>-&gt;<span class="title">author</span>(); ?&gt;&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;<span class="title">div</span> <span class="title">class</span>="<span class="title">framework</span>-<span class="title">info</span>"&gt;</span></span><br><span class="line"><span class="class">        &lt;<span class="title">span</span>&gt;由&lt;/<span class="title">span</span>&gt;</span></span><br><span class="line"><span class="class">        &lt;<span class="title">a</span> <span class="title">target</span>="<span class="title">_blank</span>" <span class="title">href</span>="<span class="title">http</span>://<span class="title">www</span>.<span class="title">typecho</span>.<span class="title">org</span>"&gt;<span class="title">Typecho</span>&lt;/<span class="title">a</span>&gt;&lt;<span class="title">span</span>&gt; 强力驱动&lt;/<span class="title">span</span>&gt;</span></span><br><span class="line"><span class="class">        &lt;<span class="title">span</span> <span class="title">class</span>="<span class="title">footer</span>-<span class="title">separator</span>"&gt;|&lt;/<span class="title">span</span>&gt;</span></span><br><span class="line"><span class="class">        &lt;<span class="title">span</span>&gt;主题&lt;/<span class="title">span</span>&gt;</span></span><br><span class="line"><span class="class">        &lt;<span class="title">a</span> <span class="title">id</span>="<span class="title">btheme</span>" <span class="title">target</span>="<span class="title">_blank</span>" <span class="title">href</span>="<span class="title">https</span>://<span class="title">github</span>.<span class="title">com</span>/<span class="title">wehaox</span>/<span class="title">Typecho</span>-<span class="title">Butterfly</span>"&gt;<span class="title">Butterfly</span>&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line"><span class="class">        &lt;/<span class="title">br</span>&gt;&lt;?<span class="title">php</span> <span class="title">if</span>($<span class="title">this</span>-&gt;<span class="title">options</span>-&gt;<span class="title">gxbeian</span> != ""): ?&gt;</span></span><br><span class="line"><span class="class">        备案号:&lt;<span class="title">a</span> <span class="title">href</span>="//<span class="title">beian</span>.<span class="title">miit</span>.<span class="title">gov</span>.<span class="title">cn</span>"&gt;&lt;?<span class="title">php</span> $<span class="title">this</span>-&gt;<span class="title">options</span>-&gt;<span class="title">gxbeian</span>(); ?&gt;&lt;/<span class="title">a</span>&gt; | </span></span><br><span class="line"><span class="class">        &lt;?<span class="title">php</span> <span class="title">endif</span>; ?&gt;</span></span><br><span class="line"><span class="class">        &lt;?<span class="title">php</span> <span class="title">if</span>($<span class="title">this</span>-&gt;<span class="title">options</span>-&gt;<span class="title">gabeian</span> != ""): </span></span><br><span class="line"><span class="class">    <span class="title">if</span> (<span class="title">is_string</span>($<span class="title">this</span>-&gt;<span class="title">options</span>-&gt;<span class="title">gabeian</span>) || !<span class="title">empty</span>($<span class="title">this</span>-&gt;<span class="title">options</span>-&gt;<span class="title">gabeian</span>)):</span></span><br><span class="line"><span class="class">    $<span class="title">gabeian1</span> = $<span class="title">gabeian2</span> = '';</span></span><br><span class="line"><span class="class">    <span class="title">if</span> (<span class="title">is_string</span>($<span class="title">this</span>-&gt;<span class="title">options</span>-&gt;<span class="title">gabeian</span>) || !<span class="title">empty</span>($<span class="title">this</span>-&gt;<span class="title">options</span>-&gt;<span class="title">gabeian</span>))</span>{</span><br><span class="line">    <span class="keyword">for</span> (<span class="variable">$i</span> = <span class="number">0</span>; <span class="variable">$i</span> &lt; <span class="title function_ invoke__">strlen</span>(<span class="variable">$this</span>-&gt;options-&gt;gabeian); <span class="variable">$i</span>++) {</span><br><span class="line">    <span class="variable">$char</span> = <span class="title function_ invoke__">substr</span>(<span class="variable">$this</span>-&gt;options-&gt;gabeian, <span class="variable">$i</span>, <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_ invoke__">ctype_digit</span>(<span class="variable">$char</span>)) {</span><br><span class="line">    <span class="variable">$gabeian1</span>=<span class="title function_ invoke__">substr</span>(<span class="variable">$this</span>-&gt;options-&gt;gabeian, <span class="number">0</span>, <span class="variable">$i</span>);</span><br><span class="line">    <span class="variable">$gabeian2</span>=<span class="title function_ invoke__">substr</span>(<span class="variable">$this</span>-&gt;options-&gt;gabeian, <span class="variable">$i</span>, <span class="title function_ invoke__">strlen</span>(<span class="variable">$this</span>-&gt;options-&gt;gabeian)-<span class="variable">$i</span>-<span class="number">3</span>);</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">        }</span><br><span class="line">      } </span><br><span class="line">    }</span><br><span class="line">    <span class="meta">?&gt;</span></span><br><span class="line">        &lt;img src=<span class="string">"https://static.nuoyis.com/lib/blog/typecho/themes/butterfly/images/beian.png"</span>&gt;<span class="meta">&lt;?=</span><span class="variable">$gabeian1</span>; <span class="meta">?&gt;</span>&lt;a href=<span class="string">"//www.beian.gov.cn/portal/registerSystemInfo?recordcode=&lt;?=<span class="subst">$gabeian2</span> ?&gt;"</span>&gt;<span class="meta">&lt;?=</span><span class="variable">$gabeian2</span> <span class="meta">?&gt;</span>&lt;/a&gt;号 | </span><br><span class="line">        <span class="meta">&lt;?php</span> <span class="keyword">endif</span>; <span class="meta">?&gt;</span></span><br><span class="line">        <span class="meta">&lt;?php</span> <span class="keyword">endif</span>; <span class="meta">?&gt;</span></span><br><span class="line">        <span class="meta">&lt;?php</span> <span class="keyword">if</span>(<span class="variable language_">$this</span>-&gt;options-&gt;moebeian != <span class="string">""</span>): </span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_ invoke__">is_string</span>(<span class="variable">$this</span>-&gt;options-&gt;moebeian) || !<span class="keyword">empty</span>(<span class="variable language_">$this</span>-&gt;options-&gt;moebeian)):</span><br><span class="line">    <span class="variable">$moebeian1</span> = <span class="variable">$moebeian2</span> = <span class="string">''</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_ invoke__">is_string</span>(<span class="variable">$this</span>-&gt;options-&gt;moebeian) || !<span class="keyword">empty</span>(<span class="variable language_">$this</span>-&gt;options-&gt;moebeian)){</span><br><span class="line">    <span class="keyword">for</span> (<span class="variable">$i</span> = <span class="number">0</span>; <span class="variable">$i</span> &lt; <span class="title function_ invoke__">strlen</span>(<span class="variable">$this</span>-&gt;options-&gt;moebeian); <span class="variable">$i</span>++) {</span><br><span class="line">    <span class="variable">$char</span> = <span class="title function_ invoke__">substr</span>(<span class="variable">$this</span>-&gt;options-&gt;moebeian, <span class="variable">$i</span>, <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_ invoke__">ctype_digit</span>(<span class="variable">$char</span>)) {</span><br><span class="line">    <span class="variable">$moebeian1</span>=<span class="title function_ invoke__">substr</span>(<span class="variable">$this</span>-&gt;options-&gt;moebeian, <span class="number">0</span>, <span class="variable">$i</span>);</span><br><span class="line">    <span class="variable">$moebeian2</span>=<span class="title function_ invoke__">substr</span>(<span class="variable">$this</span>-&gt;options-&gt;moebeian, <span class="variable">$i</span>, <span class="title function_ invoke__">strlen</span>(<span class="variable">$this</span>-&gt;options-&gt;moebeian)-<span class="variable">$i</span>-<span class="number">3</span>);</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">        }</span><br><span class="line">      } </span><br><span class="line">    }</span><br><span class="line">        <span class="meta">?&gt;</span></span><br><span class="line">        <span class="meta">&lt;?=</span><span class="variable">$moebeian1</span>; <span class="meta">?&gt;</span>&lt;a href=<span class="string">"https://icp.gov.moe/?keyword=&lt;?=<span class="subst">$moebeian2</span>; ?&gt;"</span> target=<span class="string">"_blank"</span>&gt;<span class="meta">&lt;?=</span><span class="variable">$moebeian2</span>; <span class="meta">?&gt;</span>&lt;/a&gt;号</span><br><span class="line">        <span class="meta">&lt;?php</span> <span class="keyword">endif</span>; <span class="meta">?&gt;</span></span><br><span class="line">        <span class="meta">&lt;?php</span> <span class="keyword">endif</span>; <span class="meta">?&gt;</span></span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">        &lt;div <span class="class"><span class="keyword">class</span>="<span class="title">footer_custom_text</span>"&gt;&lt;?<span class="title">php</span> $<span class="title">this</span>-&gt;<span class="title">options</span>-&gt;<span class="title">Customfooter</span>() ?&gt;&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">&lt;/<span class="title">footer</span>&gt;</span></span><br><span class="line"><span class="class">&lt;?<span class="title">php</span> <span class="title">endif</span> ?&gt;</span></span><br><span class="line"><span class="class">&lt;?<span class="title">php</span> $<span class="title">this</span>-&gt;<span class="title">footer</span>(); ?&gt;</span></span><br><span class="line"><span class="class">&lt;<span class="title">style</span> <span class="title">type</span>="<span class="title">text</span>/<span class="title">css</span>" <span class="title">data</span>-<span class="title">typed</span>-<span class="title">js</span>-<span class="title">css</span>="<span class="title">true</span>"&gt;</span></span><br><span class="line"><span class="class">        .<span class="title">typed</span>-<span class="title">cursor</span></span>{</span><br><span class="line">          opacity: <span class="number">1</span>;</span><br><span class="line">        }</span><br><span class="line">        .typed-cursor.typed-cursor--blink{</span><br><span class="line">          animation: typedjsBlink <span class="number">0.7</span>s infinite;</span><br><span class="line">          -webkit-animation: typedjsBlink <span class="number">0.7</span>s infinite;</span><br><span class="line">                  animation: typedjsBlink <span class="number">0.7</span>s infinite;</span><br><span class="line">        }</span><br><span class="line">        @keyframes typedjsBlink{</span><br><span class="line">          <span class="number">50</span>% { opacity: <span class="number">0.0</span>; }</span><br><span class="line">        }</span><br><span class="line">        @-webkit-keyframes typedjsBlink{</span><br><span class="line">          <span class="number">0</span>% { opacity: <span class="number">1</span>; }</span><br><span class="line">          <span class="number">50</span>% { opacity: <span class="number">0.0</span>; }</span><br><span class="line">          <span class="number">100</span>% { opacity: <span class="number">1</span>; }</span><br><span class="line">        }</span><br><span class="line"> &lt;/style&gt;</span><br><span class="line"><span class="meta">&lt;?php</span> <span class="keyword">if</span> (<span class="variable language_">$this</span>-&gt;options-&gt;showFramework == <span class="string">'off'</span>): <span class="meta">?&gt;</span></span><br><span class="line">&lt;style&gt;.framework-info{display:none}&lt;/style&gt;</span><br><span class="line"><span class="meta">&lt;?php</span> <span class="keyword">endif</span>; <span class="meta">?&gt;</span></span><br><span class="line"><span class="meta">&lt;?php</span> <span class="keyword">if</span> (<span class="variable language_">$this</span>-&gt;options-&gt;CursorEffects !== <span class="string">'off'</span> &amp;&amp;<span class="variable language_">$this</span>-&gt;options-&gt;CursorEffects == <span class="string">'heart'</span>) : <span class="meta">?&gt;</span></span><br><span class="line">    <span class="meta">&lt;?php</span> <span class="keyword">if</span>(<span class="variable language_">$this</span>-&gt;options-&gt;StaticFile == <span class="string">'CDN'</span> &amp;&amp; <span class="variable language_">$this</span>-&gt;options-&gt;CDNURL == <span class="string">''</span>): <span class="meta">?&gt;</span></span><br><span class="line">    &lt;script id=<span class="string">"click-heart"</span> src=<span class="string">"https://&lt;?php <span class="subst">$this</span>-&gt;options-&gt;jsdelivrLink() ?&gt;/npm/butterfly-extsrc@1/dist/click-heart.min.js"</span> async=<span class="string">"async"</span> mobile=<span class="string">"false"</span>&gt;&lt;/script&gt;</span><br><span class="line">    <span class="meta">&lt;?php</span> <span class="keyword">elseif</span>(<span class="variable language_">$this</span>-&gt;options-&gt;StaticFile == <span class="string">'CDN'</span> &amp;&amp; <span class="variable language_">$this</span>-&gt;options-&gt;CDNURL !== <span class="string">''</span>): <span class="meta">?&gt;</span></span><br><span class="line">     &lt;script id=<span class="string">"click-heart"</span> src=<span class="string">"&lt;?php <span class="subst">$this</span>-&gt;options-&gt;CDNURL() ?&gt;/static/js/click-heart.min.js"</span> async=<span class="string">"async"</span> mobile=<span class="string">"false"</span>&gt;&lt;/script&gt;</span><br><span class="line">    <span class="meta">&lt;?php</span> <span class="keyword">else</span> : <span class="meta">?&gt;</span> </span><br><span class="line">        &lt;script id=<span class="string">"click-heart"</span> src=<span class="string">"&lt;?php <span class="subst">$this</span>-&gt;options-&gt;themeUrl('/static/js/click-heart.min.js'); ?&gt;"</span> async=<span class="string">"async"</span> mobile=<span class="string">"false"</span>&gt;&lt;/script&gt;</span><br><span class="line">    <span class="meta">&lt;?php</span> <span class="keyword">endif</span>; <span class="meta">?&gt;</span></span><br><span class="line"><span class="meta">&lt;?php</span> <span class="keyword">elseif</span> (<span class="variable language_">$this</span>-&gt;options-&gt;CursorEffects !== <span class="string">'off'</span> &amp;&amp;<span class="variable language_">$this</span>-&gt;options-&gt;CursorEffects == <span class="string">'fireworks'</span>) : <span class="meta">?&gt;</span></span><br><span class="line">&lt;canvas <span class="class"><span class="keyword">class</span>="<span class="title">fireworks</span>"&gt;&lt;/<span class="title">canvas</span>&gt;</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">    &lt;?<span class="title">php</span> <span class="title">if</span>($<span class="title">this</span>-&gt;<span class="title">options</span>-&gt;<span class="title">StaticFile</span> == '<span class="title">CDN</span>' &amp;&amp; $<span class="title">this</span>-&gt;<span class="title">options</span>-&gt;<span class="title">CDNURL</span> == ''): ?&gt;</span></span><br><span class="line"><span class="class">        &lt;<span class="title">script</span> <span class="title">id</span>="<span class="title">fireworks</span>" <span class="title">src</span>="<span class="title">https</span>://&lt;?<span class="title">php</span> $<span class="title">this</span>-&gt;<span class="title">options</span>-&gt;<span class="title">jsdelivrLink</span>() ?&gt;/<span class="title">npm</span>/<span class="title">butterfly</span>-<span class="title">extsrc</span>@1.1.0/<span class="title">dist</span>/<span class="title">fireworks</span>.<span class="title">min</span>.<span class="title">js</span>" <span class="title">async</span>="<span class="title">async</span>" <span class="title">mobile</span>="<span class="title">false</span>"&gt;&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;?<span class="title">php</span> <span class="title">elseif</span>($<span class="title">this</span>-&gt;<span class="title">options</span>-&gt;<span class="title">StaticFile</span> == '<span class="title">CDN</span>' &amp;&amp; $<span class="title">this</span>-&gt;<span class="title">options</span>-&gt;<span class="title">CDNURL</span> !== ''): ?&gt;</span></span><br><span class="line"><span class="class">        &lt;<span class="title">script</span> <span class="title">id</span>="<span class="title">fireworks</span>" <span class="title">src</span>="&lt;?<span class="title">php</span> $<span class="title">this</span>-&gt;<span class="title">options</span>-&gt;<span class="title">CDNURL</span>() ?&gt;/<span class="title">static</span>/<span class="title">js</span>/<span class="title">fireworks</span>.<span class="title">min</span>.<span class="title">js</span>" <span class="title">async</span>="<span class="title">async</span>" <span class="title">mobile</span>="<span class="title">false</span>"&gt;&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;?<span class="title">php</span> <span class="title">else</span> : ?&gt; </span></span><br><span class="line"><span class="class">        &lt;<span class="title">script</span> <span class="title">id</span>="<span class="title">fireworks</span>" <span class="title">src</span>="&lt;?<span class="title">php</span> $<span class="title">this</span>-&gt;<span class="title">options</span>-&gt;<span class="title">themeUrl</span>('/<span class="title">static</span>/<span class="title">js</span>/<span class="title">fireworks</span>.<span class="title">min</span>.<span class="title">js</span>'); ?&gt;" <span class="title">async</span>="<span class="title">async</span>" <span class="title">mobile</span>="<span class="title">false</span>"&gt;&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;?<span class="title">php</span> <span class="title">endif</span>; ?&gt;</span></span><br><span class="line"><span class="class">&lt;?<span class="title">php</span> <span class="title">endif</span>; ?&gt;</span></span><br><span class="line"><span class="class">&lt;?<span class="title">php</span> <span class="title">if</span> ($<span class="title">this</span>-&gt;<span class="title">options</span>-&gt;<span class="title">ShowLive2D</span> !== '<span class="title">off</span>' &amp;&amp; !<span class="title">isMobile</span>()) : ?&gt;</span></span><br><span class="line"><span class="class">    &lt;?<span class="title">php</span> <span class="title">if</span>($<span class="title">this</span>-&gt;<span class="title">options</span>-&gt;<span class="title">StaticFile</span> == '<span class="title">CDN</span>' &amp;&amp; $<span class="title">this</span>-&gt;<span class="title">options</span>-&gt;<span class="title">CDNURL</span> == ''): ?&gt;</span></span><br><span class="line"><span class="class">        &lt;<span class="title">script</span> <span class="title">src</span>="<span class="title">https</span>://&lt;?<span class="title">php</span> $<span class="title">this</span>-&gt;<span class="title">options</span>-&gt;<span class="title">jsdelivrLink</span>() ?&gt;/<span class="title">gh</span>/<span class="title">stevenjoezhang</span>/<span class="title">live2d</span>-<span class="title">widget</span>@<span class="title">latest</span>/<span class="title">autoload</span>.<span class="title">js</span>"&gt;&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;?<span class="title">php</span> <span class="title">elseif</span>($<span class="title">this</span>-&gt;<span class="title">options</span>-&gt;<span class="title">StaticFile</span> == '<span class="title">CDN</span>' &amp;&amp; $<span class="title">this</span>-&gt;<span class="title">options</span>-&gt;<span class="title">CDNURL</span> !== ''): ?&gt;    </span></span><br><span class="line"><span class="class">        &lt;<span class="title">script</span> <span class="title">src</span>="&lt;?<span class="title">php</span> $<span class="title">this</span>-&gt;<span class="title">options</span>-&gt;<span class="title">CDNURL</span>() ?&gt;/<span class="title">static</span>/<span class="title">js</span>/<span class="title">autoload</span>.<span class="title">js</span>"&gt;&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="class">   &lt;?<span class="title">php</span> <span class="title">else</span> : ?&gt; </span></span><br><span class="line"><span class="class">        &lt;<span class="title">script</span> <span class="title">src</span>="&lt;?<span class="title">php</span> $<span class="title">this</span>-&gt;<span class="title">options</span>-&gt;<span class="title">themeUrl</span>('/<span class="title">static</span>/<span class="title">js</span>/<span class="title">autoload</span>.<span class="title">js</span>'); ?&gt;"&gt;&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="class">       &lt;?<span class="title">php</span> <span class="title">endif</span>; ?&gt;    </span></span><br><span class="line"><span class="class">&lt;?<span class="title">php</span> <span class="title">endif</span>; ?&gt;</span></span><br><span class="line"><span class="class">&lt;<span class="title">script</span> <span class="title">type</span>="<span class="title">text</span>/<span class="title">javascript</span>" <span class="title">src</span>="&lt;?<span class="title">php</span> $<span class="title">this</span>-&gt;<span class="title">options</span>-&gt;<span class="title">themeUrl</span>('<span class="title">js</span>/<span class="title">custom</span>.<span class="title">main</span>.<span class="title">js</span>'); ?&gt;"&gt;&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="class">&lt;<span class="title">script</span>&gt;&lt;?<span class="title">php</span> $<span class="title">this</span>-&gt;<span class="title">options</span>-&gt;<span class="title">CustomScript</span>() ?&gt;&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="class"> &lt;?<span class="title">php</span> $<span class="title">this</span>-&gt;<span class="title">options</span>-&gt;<span class="title">CustomBodyEnd</span>() ?&gt;</span></span><br><span class="line"><span class="class">&lt;!--搜索  --&gt;</span></span><br><span class="line"><span class="class">&lt;<span class="title">div</span> <span class="title">id</span>="<span class="title">local</span>-<span class="title">search</span>"&gt;</span></span><br><span class="line"><span class="class">  &lt;<span class="title">div</span> <span class="title">class</span>="<span class="title">search</span>-<span class="title">dialog</span>"&gt;</span></span><br><span class="line"><span class="class">    &lt;<span class="title">nav</span> <span class="title">class</span>="<span class="title">search</span>-<span class="title">nav</span>"&gt;</span></span><br><span class="line"><span class="class">      &lt;<span class="title">span</span> <span class="title">class</span>="<span class="title">search</span>-<span class="title">dialog</span>-<span class="title">title</span>"&gt;本地搜索&lt;/<span class="title">span</span>&gt;</span></span><br><span class="line"><span class="class">      &lt;<span class="title">span</span> <span class="title">id</span>="<span class="title">loading</span>-<span class="title">status</span>"&gt;&lt;/<span class="title">span</span>&gt;</span></span><br><span class="line"><span class="class">      &lt;<span class="title">button</span> <span class="title">class</span>="<span class="title">search</span>-<span class="title">close</span>-<span class="title">button</span>"&gt;</span></span><br><span class="line"><span class="class">        &lt;<span class="title">i</span> <span class="title">class</span>="<span class="title">fas</span> <span class="title">fa</span>-<span class="title">times</span>"&gt;&lt;/<span class="title">i</span>&gt;</span></span><br><span class="line"><span class="class">      &lt;/<span class="title">button</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;/<span class="title">nav</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;<span class="title">div</span> <span class="title">class</span>="<span class="title">search</span>-<span class="title">wrap</span>" <span class="title">style</span>="<span class="title">display</span>: <span class="title">block</span>;"&gt;</span></span><br><span class="line"><span class="class">      &lt;<span class="title">div</span> <span class="title">id</span>="<span class="title">local</span>-<span class="title">search</span>-<span class="title">input</span>"&gt;</span></span><br><span class="line"><span class="class">        &lt;<span class="title">form</span> <span class="title">class</span>="<span class="title">local</span>-<span class="title">search</span>-<span class="title">box</span>" <span class="title">method</span>="<span class="title">post</span>" <span class="title">action</span>="&lt;?<span class="title">php</span> $<span class="title">this</span>-&gt;<span class="title">options</span>-&gt;<span class="title">siteUrl</span>(); ?&gt;" <span class="title">role</span>="<span class="title">search</span>" <span class="title">id</span>="<span class="title">search</span>"&gt;</span></span><br><span class="line"><span class="class">          &lt;<span class="title">label</span> <span class="title">for</span>="<span class="title">s</span>" <span class="title">class</span>="<span class="title">sr</span>-<span class="title">only</span>"&gt;&lt;?<span class="title">php</span> <span class="title">_e</span>('搜索关键字'); ?&gt;&lt;/<span class="title">label</span>&gt;</span></span><br><span class="line"><span class="class">          &lt;<span class="title">input</span> <span class="title">type</span>="<span class="title">text</span>"  <span class="title">name</span>="<span class="title">s</span>"  <span class="title">placeholder</span>="回车查询" <span class="title">required</span>="<span class="title">required</span>"&gt;&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">      &lt;/<span class="title">form</span>&gt;</span></span><br><span class="line"><span class="class">      &lt;<span class="title">hr</span>&gt;</span></span><br><span class="line"><span class="class">      &lt;<span class="title">div</span> <span class="title">id</span>="<span class="title">local</span>-<span class="title">search</span>-<span class="title">results</span>"&gt;&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">  &lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">  &lt;<span class="title">div</span> <span class="title">id</span>="<span class="title">search</span>-<span class="title">mask</span>" <span class="title">style</span>=""&gt;&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">&lt;!--搜索<span class="title">end</span>  --&gt;</span></span><br><span class="line"><span class="class">&lt;<span class="title">div</span> <span class="title">class</span>="<span class="title">js</span>-<span class="title">pjax</span>"&gt;</span></span><br><span class="line"><span class="class">&lt;?<span class="title">php</span> <span class="title">if</span> ($<span class="title">this</span>-&gt;<span class="title">is</span>('<span class="title">post</span>') || $<span class="title">this</span>-&gt;<span class="title">is</span>('<span class="title">page</span>')): ?&gt;</span></span><br><span class="line"><span class="class">&lt;<span class="title">script</span> <span class="title">src</span>="&lt;?<span class="title">php</span> $<span class="title">this</span>-&gt;<span class="title">options</span>-&gt;<span class="title">themeUrl</span>('<span class="title">js</span>/<span class="title">comjs</span>.<span class="title">js</span>?<span class="title">v1</span>.4.3'); ?&gt;"&gt;&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="class">&lt;?<span class="title">php</span> <span class="title">endif</span> ?&gt;</span></span><br><span class="line"><span class="class">&lt;?<span class="title">php</span> <span class="title">if</span> (!<span class="title">empty</span>($<span class="title">this</span>-&gt;<span class="title">options</span>-&gt;<span class="title">beautifyBlock</span>) &amp;&amp; <span class="title">in_array</span>('<span class="title">showButterflyClock</span>',$<span class="title">this</span>-&gt;<span class="title">options</span>-&gt;<span class="title">beautifyBlock</span>)): ?&gt;</span></span><br><span class="line"><span class="class">&lt;<span class="title">script</span> <span class="title">data</span>-<span class="title">pjax</span>&gt;<span class="title">function</span> <span class="title">butterfly_clock_anzhiyu_injector_config</span>() </span>{</span><br><span class="line"><span class="keyword">var</span> a = document.<span class="title function_ invoke__">getElementsByClassName</span>(<span class="string">"sticky_layout"</span>)[<span class="number">0</span>];</span><br><span class="line">a &amp;&amp; a.<span class="title function_ invoke__">insertAdjacentHTML</span>(<span class="string">"afterbegin"</span>, <span class="string">'&lt;div class="card-widget card-clock"&gt;&lt;div class="card-glass"&gt;&lt;div class="card-background"&gt;&lt;div class="card-content"&gt;&lt;div id="hexo_electric_clock"&gt;&lt;img class="entered loading" id="card-clock-loading" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu/lib/loading.gif" style="height: 120px; width: 100%;" data-ll-status="loading"/&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;'</span>)}</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> elist = <span class="string">"null"</span>.<span class="title function_ invoke__">split</span>(<span class="string">","</span>), cpage = location.pathname, epage = <span class="string">"all"</span>, </span><br><span class="line">qweather_key = <span class="string">"&lt;?php <span class="subst">$this</span>-&gt;options-&gt;qweather_key() ?&gt;"</span>, </span><br><span class="line">gaud_map_key = <span class="string">"&lt;?php <span class="subst">$this</span>-&gt;options-&gt;gaud_map_key() ?&gt;"</span>, </span><br><span class="line">baidu_ak_key = <span class="string">"undefined"</span>, flag = <span class="number">0</span>,</span><br><span class="line">clock_rectangle = <span class="string">"112.6534116,27.96920845"</span>, clock_default_rectangle_enable = <span class="string">"false"</span>, i = <span class="number">0</span>; i &lt; elist.length; i++) cpage.<span class="title function_ invoke__">includes</span>(elist[i]) &amp;&amp; flag++;</span><br><span class="line">      <span class="string">"all"</span> === epage &amp;&amp; <span class="number">0</span> == flag ? <span class="title function_ invoke__">butterfly_clock_anzhiyu_injector_config</span>() : epage === cpage &amp;&amp; <span class="title function_ invoke__">butterfly_clock_anzhiyu_injector_config</span>()&lt;/script&gt;</span><br><span class="line">&lt;script src=<span class="string">"https://widget.qweather.net/simple/static/js/he-simple-common.js?v=2.0"</span>&gt;&lt;/script&gt;</span><br><span class="line">&lt;script data-pjax src=<span class="string">"https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu/lib/clock.min.js"</span>&gt;&lt;/script&gt;</span><br><span class="line">&lt;link rel=<span class="string">"stylesheet"</span> href=<span class="string">"https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu/lib/clock.min.css"</span>&gt;</span><br><span class="line"><span class="meta">&lt;?php</span> <span class="keyword">endif</span> <span class="meta">?&gt;</span></span><br><span class="line"><span class="meta">&lt;?php</span> <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">header</span>(<span class="string">'commentReply=1&amp;description=0&amp;keywords=0&amp;generator=0&amp;template=0&amp;pingback=0&amp;xmlrpc=0&amp;wlw=0&amp;rss2=0&amp;rss1=0&amp;antiSpam=0&amp;atom'</span>); <span class="meta">?&gt;</span></span><br><span class="line"><span class="meta">&lt;?php</span> <span class="keyword">if</span> (<span class="variable language_">$this</span>-&gt;options-&gt;NewTabLink == <span class="string">'on'</span>): <span class="meta">?&gt;</span></span><br><span class="line">&lt;script&gt;$(document).<span class="title function_ invoke__">ready</span>(function(){<span class="keyword">var</span> a=document.<span class="title function_ invoke__">getElementsByTagName</span>(<span class="string">"a"</span>);<span class="keyword">for</span>(let i=<span class="number">0</span>;i&lt;a.length;i++){let domain=document.domain;let url=a[i].href;<span class="keyword">if</span>(<span class="title function_ invoke__">typeof</span>(url)!=<span class="string">"undefined"</span>&amp;&amp;url.length!=<span class="number">0</span>&amp;&amp;url.<span class="keyword">match</span>(domain)==<span class="literal">null</span>&amp;&amp;url!=<span class="string">"javascript:void(0);"</span>){a[i].<span class="title function_ invoke__">setAttribute</span>(<span class="string">"target"</span>,<span class="string">"_BLANK"</span>)}}});&lt;/script&gt;</span><br><span class="line"><span class="meta">&lt;?php</span> <span class="keyword">endif</span>; <span class="meta">?&gt;</span>        </span><br><span class="line"><span class="meta">&lt;?php</span> <span class="keyword">if</span>(<span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">is</span>(<span class="string">'index'</span>)): <span class="meta">?&gt;</span></span><br><span class="line">&lt;script type=<span class="string">"text/javascript"</span> src=<span class="string">"&lt;?php <span class="subst">$this</span>-&gt;options-&gt;themeUrl('js/wehao.js?v1.7.0'); ?&gt;"</span>&gt;&lt;/script&gt;</span><br><span class="line">&lt;style&gt;<span class="comment">#page-header:not(.not-top-img):before {background-color: rgba(0,0,0,0);}&lt;/style&gt;</span></span><br><span class="line">&lt;!--打字--&gt;</span><br><span class="line"><span class="meta">&lt;?php</span> <span class="keyword">if</span> (<span class="title function_ invoke__">is_array</span>(<span class="variable">$this</span>-&gt;options-&gt;beautifyBlock) &amp;&amp; <span class="title function_ invoke__">in_array</span>(<span class="string">'ShowTopimg'</span>,<span class="variable">$this</span>-&gt;options-&gt;beautifyBlock)): <span class="meta">?&gt;</span></span><br><span class="line">   <span class="meta">&lt;?php</span> <span class="keyword">if</span>(!<span class="keyword">empty</span>(<span class="variable language_">$this</span>-&gt;options-&gt;CustomSubtitle)): <span class="meta">?&gt;</span></span><br><span class="line">      &lt;script&gt;</span><br><span class="line"> <span class="function"><span class="keyword">function</span> <span class="title">subtitleType</span>(<span class="params"></span>) </span>{</span><br><span class="line"><span class="keyword">if</span> (<span class="literal">true</span>) {</span><br><span class="line"><span class="keyword">var</span> typed = <span class="keyword">new</span> <span class="title class_">Typed</span>(<span class="string">"#subtitle"</span>, {</span><br><span class="line">strings: <span class="string">"&lt;?php <span class="subst">$this</span>-&gt;options-&gt;CustomSubtitle()?&gt;"</span>.<span class="title function_ invoke__">split</span>(<span class="string">","</span>),</span><br><span class="line">startDelay: <span class="number">300</span>,</span><br><span class="line">typeSpeed: <span class="number">150</span>,</span><br><span class="line">loop: <span class="meta">&lt;?php</span> <span class="variable language_">$this</span>-&gt;options-&gt;<span class="title function_ invoke__">SubtitleLoop</span>() <span class="meta">?&gt;</span>,</span><br><span class="line">backSpeed: <span class="number">50</span></span><br><span class="line">})</span><br><span class="line">}</span><br><span class="line">}</span><br><span class="line"><span class="string">"function"</span>==typeof Typed?<span class="title function_ invoke__">subtitleType</span>():<span class="title function_ invoke__">getScript</span>(<span class="string">"/usr/themes/butterfly/js/typed.min.js"</span>)</span><br><span class="line">.<span class="title function_ invoke__">then</span>(subtitleType)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">   <span class="meta">&lt;?php</span> <span class="keyword">else</span>: <span class="meta">?&gt;</span></span><br><span class="line">      &lt;script&gt;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">subtitleType</span>(<span class="params"></span>)</span>{</span><br><span class="line"><span class="title function_ invoke__">fetch</span>(<span class="string">"https://v1.hitokoto.cn"</span>).<span class="title function_ invoke__">then</span>(t=&gt;t.<span class="title function_ invoke__">json</span>()).<span class="title function_ invoke__">then</span>(t=&gt;{</span><br><span class="line">o=<span class="number">0</span>==<span class="string">""</span>.length?<span class="keyword">new</span> <span class="title class_">Array</span>:<span class="string">" "</span>.<span class="title function_ invoke__">split</span>(<span class="string">","</span>);</span><br><span class="line">o.<span class="title function_ invoke__">unshift</span>(t.hitokoto),</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Typed</span>(<span class="string">"#subtitle"</span>,{</span><br><span class="line">    <span class="attr">strings</span>:o,</span><br><span class="line">    <span class="attr">startDelay</span>:<span class="number">300</span>,</span><br><span class="line">    <span class="attr">typeSpeed</span>:<span class="number">150</span>,</span><br><span class="line">    <span class="attr">loop</span>: &lt;?php <span class="variable">$this</span>-&gt;options-&gt;<span class="title function_ invoke__">SubtitleLoop</span>() ?&gt;,</span><br><span class="line">    <span class="attr">backSpeed</span>:<span class="number">50</span></span><br><span class="line">      }</span><br><span class="line">  )}</span><br><span class="line">)}</span><br><span class="line"><span class="string">"function"</span>==typeof Typed?<span class="title function_ invoke__">subtitleType</span>():<span class="title function_ invoke__">getScript</span>(<span class="string">"/usr/themes/butterfly/js/typed.min.js"</span>)</span><br><span class="line">.<span class="title function_ invoke__">then</span>(subtitleType)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">    <span class="meta">&lt;?php</span> <span class="keyword">endif</span> <span class="meta">?&gt;</span></span><br><span class="line">    <span class="meta">&lt;?php</span> <span class="keyword">endif</span><span class="meta">?&gt;</span></span><br><span class="line">&lt;!--打字end--&gt;</span><br><span class="line">&lt;!--判断主页end--&gt;</span><br><span class="line"><span class="meta">&lt;?php</span> <span class="keyword">endif</span><span class="meta">?&gt;</span></span><br><span class="line"><span class="meta">&lt;?php</span> <span class="keyword">if</span>(!<span class="keyword">empty</span>(<span class="variable language_">$this</span>-&gt;options-&gt;slide_cids) &amp;&amp; <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">is</span>(<span class="string">'index'</span>)):<span class="meta">?&gt;</span></span><br><span class="line">&lt;script data-pjax&gt;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">butterfly_swiper_injector_config</span>(<span class="params"></span>) </span>{</span><br><span class="line"><span class="keyword">var</span> parent_div_git = document.<span class="title function_ invoke__">getElementById</span>(<span class="string">'recent-posts'</span>);</span><br><span class="line"><span class="keyword">var</span> item_html = `&lt;div <span class="class"><span class="keyword">class</span>="<span class="title">recent</span>-<span class="title">post</span>-<span class="title">item</span>" <span class="title">style</span>="<span class="title">height</span>: <span class="title">auto</span>;<span class="title">width</span>: 100%"&gt;&lt;<span class="title">div</span> <span class="title">class</span>="<span class="title">blog</span>-<span class="title">slider</span> <span class="title">swiper</span>-<span class="title">container</span>-<span class="title">fade</span> <span class="title">swiper</span>-<span class="title">container</span>-<span class="title">horizontal</span>" <span class="title">id</span>="<span class="title">swiper_container</span>"&gt;&lt;<span class="title">div</span> <span class="title">class</span>="<span class="title">blog</span>-<span class="title">slider__wrp</span> <span class="title">swiper</span>-<span class="title">wrapper</span>" <span class="title">style</span>="<span class="title">transition</span>-<span class="title">duration</span>: 0<span class="title">ms</span>;"&gt;</span></span><br><span class="line"><span class="class">&lt;?<span class="title">php</span> </span></span><br><span class="line"><span class="class">$<span class="title">slide_cids</span>=$<span class="title">this</span>-&gt;<span class="title">options</span>-&gt;<span class="title">slide_cids</span>;</span></span><br><span class="line"><span class="class">$<span class="title">cid</span> = <span class="title">explode</span>(',', <span class="title">strtr</span>($<span class="title">slide_cids</span>, ' ', ','));</span></span><br><span class="line"><span class="class">$<span class="title">num</span>=<span class="title">count</span>($<span class="title">cid</span>);</span></span><br><span class="line"><span class="class">$<span class="title">html</span>="";</span></span><br><span class="line"><span class="class"><span class="title">for</span>($<span class="title">i</span>=0;$<span class="title">i</span>&lt;$<span class="title">num</span>;$<span class="title">i</span>++)</span>{</span><br><span class="line"><span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">widget</span>(<span class="string">'Widget_Archive@post'</span>.<span class="variable">$i</span>, <span class="string">'pageSize=1&amp;type=post'</span>, <span class="string">'cid='</span>.<span class="variable">$cid</span>[<span class="variable">$i</span>])-&gt;<span class="title function_ invoke__">to</span>(<span class="variable">$ji</span>);</span><br><span class="line"><span class="variable">$html</span>=<span class="variable">$html</span>.<span class="string">'&lt;div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"&gt;&lt;a class="blog-slider__img" href="'</span>.<span class="variable">$ji</span>-&gt;permalink.<span class="string">'" alt=""&gt;&lt;img width="48" height="48" src="'</span>.<span class="title function_ invoke__">get_ArticleThumbnail</span>(<span class="variable">$ji</span>).<span class="string">'" alt="" /&gt;&lt;/a&gt;&lt;div class="blog-slider__content"&gt;&lt;span class="blog-slider__code"&gt;'</span>.<span class="title function_ invoke__">date</span>(<span class="string">'Y-m-d'</span>, <span class="variable">$ji</span>-&gt;modified).<span class="string">'&lt;/span&gt;&lt;a class="blog-slider__title" href="'</span>.<span class="variable">$ji</span>-&gt;permalink.<span class="string">'" alt="'</span>.<span class="variable">$ji</span>-&gt;title.<span class="string">'"&gt;'</span>.<span class="variable">$ji</span>-&gt;title.<span class="string">'&lt;/a&gt;&lt;div class="blog-slider__text"&gt;'</span>.<span class="variable">$ji</span>-&gt;title.<span class="string">'&lt;/div&gt;&lt;a class="blog-slider__button" href="'</span>.<span class="variable">$ji</span>-&gt;permalink.<span class="string">'" alt=""&gt;详情&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;'</span>;}<span class="keyword">echo</span> <span class="variable">$html</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">&lt;/div&gt;&lt;div <span class="class"><span class="keyword">class</span>="<span class="title">blog</span>-<span class="title">slider__pagination</span> <span class="title">swiper</span>-<span class="title">pagination</span>-<span class="title">clickable</span> <span class="title">swiper</span>-<span class="title">pagination</span>-<span class="title">bullets</span>"&gt;&lt;/<span class="title">div</span>&gt;&lt;/<span class="title">div</span>&gt;&lt;/<span class="title">div</span>&gt;`;</span></span><br><span class="line"><span class="class"><span class="title">parent_div_git</span>.<span class="title">innerHTML</span>=<span class="title">item_html</span>+<span class="title">parent_div_git</span>.<span class="title">innerHTML</span> // 无报错，但不影响使用(支持<span class="title">pjax</span>跳转)</span></span><br><span class="line"><span class="class">// <span class="title">parent_div_git</span>.<span class="title">insertAdjacentHTML</span>("<span class="title">afterbegin</span>", <span class="title">item_html</span>) // 有报错，但不影响使用(支持<span class="title">pjax</span>跳转)</span></span><br><span class="line"><span class="class">}</span></span><br><span class="line"><span class="class"><span class="title">if</span> (<span class="title">document</span>.<span class="title">getElementById</span>('<span class="title">recent</span>-<span class="title">posts</span>') &amp;&amp; (<span class="title">location</span>.<span class="title">pathname</span> === '<span class="title">all</span>' || '<span class="title">all</span>' === '<span class="title">all</span>')) </span>{</span><br><span class="line"><span class="title function_ invoke__">butterfly_swiper_injector_config</span>()}</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;script  src=<span class="string">"https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.js"</span>&gt;&lt;/script&gt;</span><br><span class="line">&lt;script data-pjax src=<span class="string">"https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper_init.js"</span>&gt;&lt;/script&gt;</span><br><span class="line">&lt;link rel=<span class="string">"stylesheet"</span> href=<span class="string">"https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiperstyle.css"</span>&gt;</span><br><span class="line">&lt;link rel=<span class="string">"stylesheet"</span> href=<span class="string">"https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.css"</span>&gt;</span><br><span class="line"><span class="meta">&lt;?php</span> <span class="keyword">endif</span><span class="meta">?&gt;</span></span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;!--js-pjax end--&gt;</span><br><span class="line">&lt;div id=<span class="string">"rightside"</span> style=<span class="string">""</span>&gt;</span><br><span class="line">	&lt;div id=<span class="string">"rightside-config-hide"</span> <span class="class"><span class="keyword">class</span>=""&gt;</span></span><br><span class="line"><span class="class">	    &lt;<span class="title">button</span> <span class="title">id</span>="<span class="title">font</span>-<span class="title">plus</span>" <span class="title">type</span>="<span class="title">button</span>" <span class="title">title</span>="放大字体"&gt;&lt;<span class="title">i</span> <span class="title">class</span>="<span class="title">fas</span> <span class="title">fa</span>-<span class="title">plus</span>"&gt;&lt;/<span class="title">i</span>&gt;&lt;/<span class="title">button</span>&gt;	    </span></span><br><span class="line"><span class="class">	    &lt;<span class="title">button</span> <span class="title">id</span>="<span class="title">font</span>-<span class="title">minus</span>" <span class="title">type</span>="<span class="title">button</span>" <span class="title">title</span>="缩小字体"&gt;&lt;<span class="title">i</span> <span class="title">class</span>="<span class="title">fas</span> <span class="title">fa</span>-<span class="title">minus</span>"&gt;&lt;/<span class="title">i</span>&gt;&lt;/<span class="title">button</span>&gt;	    </span></span><br><span class="line"><span class="class">	    &lt;?<span class="title">php</span> <span class="title">if</span> ($<span class="title">this</span>-&gt;<span class="title">is</span>('<span class="title">post</span>')): ?&gt;</span></span><br><span class="line"><span class="class">	    &lt;<span class="title">button</span> <span class="title">id</span>="<span class="title">readmode</span>" <span class="title">type</span>="<span class="title">button</span>" <span class="title">title</span>="阅读模式"&gt;</span></span><br><span class="line"><span class="class">	        &lt;<span class="title">i</span> <span class="title">class</span>="<span class="title">fas</span> <span class="title">fa</span>-<span class="title">book</span>-<span class="title">open</span>"&gt;&lt;/<span class="title">i</span>&gt;</span></span><br><span class="line"><span class="class">	    &lt;/<span class="title">button</span>&gt;</span></span><br><span class="line"><span class="class">	    &lt;?<span class="title">php</span> <span class="title">endif</span> ?&gt;</span></span><br><span class="line"><span class="class">		&lt;<span class="title">button</span> <span class="title">id</span>="<span class="title">translateLink</span>" <span class="title">type</span>="<span class="title">button</span>" <span class="title">title</span>="简繁转换"&gt;</span></span><br><span class="line"><span class="class">			繁</span></span><br><span class="line"><span class="class">		&lt;/<span class="title">button</span>&gt;</span></span><br><span class="line"><span class="class">		&lt;<span class="title">button</span> <span class="title">id</span>="<span class="title">darkmode</span>" <span class="title">type</span>="<span class="title">button</span>" <span class="title">title</span>="浅色和深色模式转换"&gt;</span></span><br><span class="line"><span class="class">			&lt;<span class="title">i</span> <span class="title">class</span>="<span class="title">fas</span> <span class="title">fa</span>-<span class="title">adjust</span>"&gt;</span></span><br><span class="line"><span class="class">			&lt;/<span class="title">i</span>&gt;</span></span><br><span class="line"><span class="class">		&lt;/<span class="title">button</span>&gt;</span></span><br><span class="line"><span class="class">		&lt;<span class="title">button</span> <span class="title">id</span>="<span class="title">hide</span>-<span class="title">aside</span>-<span class="title">btn</span>" <span class="title">type</span>="<span class="title">button</span>" <span class="title">title</span>="单栏和双栏切换"&gt;</span></span><br><span class="line"><span class="class">			&lt;<span class="title">i</span> <span class="title">class</span>="<span class="title">fas</span> <span class="title">fa</span>-<span class="title">arrows</span>-<span class="title">alt</span>-<span class="title">h</span>"&gt;</span></span><br><span class="line"><span class="class">			&lt;/<span class="title">i</span>&gt;</span></span><br><span class="line"><span class="class">		&lt;/<span class="title">button</span>&gt;</span></span><br><span class="line"><span class="class">	&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">	&lt;<span class="title">div</span> <span class="title">id</span>="<span class="title">rightside</span>-<span class="title">config</span>-<span class="title">show</span>"&gt;</span></span><br><span class="line"><span class="class">		&lt;<span class="title">button</span> <span class="title">id</span>="<span class="title">rightside_config</span>" <span class="title">type</span>="<span class="title">button</span>" <span class="title">title</span>="设置"&gt;</span></span><br><span class="line"><span class="class">			&lt;<span class="title">i</span> <span class="title">class</span>="<span class="title">fas</span> <span class="title">fa</span>-<span class="title">cog</span> <span class="title">fa</span>-<span class="title">spin</span>"&gt;</span></span><br><span class="line"><span class="class">			&lt;/<span class="title">i</span>&gt;</span></span><br><span class="line"><span class="class">		&lt;/<span class="title">button</span>&gt;</span></span><br><span class="line"><span class="class">		&lt;?<span class="title">php</span> <span class="title">if</span> ($<span class="title">this</span>-&gt;<span class="title">is</span>('<span class="title">post</span>')): ?&gt;</span></span><br><span class="line"><span class="class">		&lt;<span class="title">button</span> <span class="title">class</span>="<span class="title">close</span>" <span class="title">id</span>="<span class="title">mobile</span>-<span class="title">toc</span>-<span class="title">button</span>" <span class="title">type</span>="<span class="title">button</span>" <span class="title">title</span>="目录"&gt;</span></span><br><span class="line"><span class="class">			&lt;<span class="title">i</span> <span class="title">class</span>="<span class="title">fas</span> <span class="title">fa</span>-<span class="title">list</span>-<span class="title">ul</span>"&gt;</span></span><br><span class="line"><span class="class">			&lt;/<span class="title">i</span>&gt;</span></span><br><span class="line"><span class="class">		&lt;/<span class="title">button</span>&gt;</span></span><br><span class="line"><span class="class">		&lt;?<span class="title">php</span> <span class="title">endif</span> ?&gt;</span></span><br><span class="line"><span class="class">		&lt;?<span class="title">php</span> <span class="title">if</span>($<span class="title">this</span>-&gt;<span class="title">is</span>('<span class="title">post</span>') &amp;&amp; $<span class="title">this</span>-&gt;<span class="title">allow</span>('<span class="title">comment</span>') || $<span class="title">this</span>-&gt;<span class="title">is</span>('<span class="title">page</span>') &amp;&amp; $<span class="title">this</span>-&gt;<span class="title">allow</span>('<span class="title">comment</span>')): ?&gt;</span></span><br><span class="line"><span class="class">		&lt;<span class="title">a</span> <span class="title">id</span>="<span class="title">to_comment</span>" <span class="title">href</span>="#<span class="title">comments</span>" <span class="title">title</span>="直达评论"&gt;</span></span><br><span class="line"><span class="class">			&lt;<span class="title">i</span> <span class="title">class</span>="<span class="title">fas</span> <span class="title">fa</span>-<span class="title">comments</span>"&gt;</span></span><br><span class="line"><span class="class">			&lt;/<span class="title">i</span>&gt;</span></span><br><span class="line"><span class="class">		&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line"><span class="class">		&lt;?<span class="title">php</span> <span class="title">endif</span> ?&gt;</span></span><br><span class="line"><span class="class">		&lt;<span class="title">button</span> <span class="title">id</span>="<span class="title">go</span>-<span class="title">up</span>" <span class="title">type</span>="<span class="title">button</span>" <span class="title">title</span>="回到頂部" <span class="title">class</span>="<span class="title">show</span>-<span class="title">percent</span>"&gt;</span></span><br><span class="line"><span class="class">			&lt;<span class="title">span</span> <span class="title">class</span>="<span class="title">scroll</span>-<span class="title">percent</span>"&gt;&lt;/<span class="title">span</span>&gt;</span></span><br><span class="line"><span class="class">			&lt;<span class="title">i</span> <span class="title">class</span>="<span class="title">fas</span> <span class="title">fa</span>-<span class="title">arrow</span>-<span class="title">up</span>"&gt;</span></span><br><span class="line"><span class="class">			&lt;/<span class="title">i</span>&gt;</span></span><br><span class="line"><span class="class">		&lt;/<span class="title">button</span>&gt;</span></span><br><span class="line"><span class="class">	&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">&lt;!--<span class="title">pjax</span>--&gt;</span></span><br><span class="line"><span class="class">&lt;?<span class="title">php</span> <span class="title">if</span>($<span class="title">this</span>-&gt;<span class="title">options</span>-&gt;<span class="title">EnablePjax</span> === '<span class="title">on</span>') : ?&gt;</span></span><br><span class="line"><span class="class">&lt;?<span class="title">php</span> <span class="title">if</span>($<span class="title">this</span>-&gt;<span class="title">options</span>-&gt;<span class="title">StaticFile</span> == '<span class="title">CDN</span>' &amp;&amp; $<span class="title">this</span>-&gt;<span class="title">options</span>-&gt;<span class="title">CDNURL</span> == ''): ?&gt;</span></span><br><span class="line"><span class="class">&lt;<span class="title">link</span> <span class="title">rel</span>="<span class="title">stylesheet</span>" <span class="title">href</span>="<span class="title">https</span>://&lt;?<span class="title">php</span> $<span class="title">this</span>-&gt;<span class="title">options</span>-&gt;<span class="title">jsdelivrLink</span>() ?&gt;/<span class="title">gh</span>/<span class="title">rstacruz</span>/<span class="title">nprogress</span>@<span class="title">master</span>/<span class="title">nprogress</span>.<span class="title">css</span>"&gt;</span></span><br><span class="line"><span class="class">&lt;<span class="title">script</span> <span class="title">src</span>="<span class="title">https</span>://&lt;?<span class="title">php</span> $<span class="title">this</span>-&gt;<span class="title">options</span>-&gt;<span class="title">jsdelivrLink</span>() ?&gt;/<span class="title">gh</span>/<span class="title">rstacruz</span>/<span class="title">nprogress</span>@<span class="title">master</span>/<span class="title">nprogress</span>.<span class="title">js</span>"&gt;&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="class">&lt;<span class="title">script</span> <span class="title">src</span>="<span class="title">https</span>://&lt;?<span class="title">php</span> $<span class="title">this</span>-&gt;<span class="title">options</span>-&gt;<span class="title">jsdelivrLink</span>() ?&gt;/<span class="title">npm</span>/<span class="title">pjax</span>/<span class="title">pjax</span>.<span class="title">min</span>.<span class="title">js</span>"&gt;&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="class">&lt;?<span class="title">php</span> <span class="title">elseif</span>($<span class="title">this</span>-&gt;<span class="title">options</span>-&gt;<span class="title">StaticFile</span> == '<span class="title">CDN</span>' &amp;&amp; $<span class="title">this</span>-&gt;<span class="title">options</span>-&gt;<span class="title">CDNURL</span> !== ''): ?&gt;</span></span><br><span class="line"><span class="class">&lt;<span class="title">link</span> <span class="title">rel</span>="<span class="title">stylesheet</span>" <span class="title">href</span>="<span class="title">https</span>://<span class="title">lib</span>.<span class="title">baomitu</span>.<span class="title">com</span>/<span class="title">nprogress</span>/0.2.0/<span class="title">nprogress</span>.<span class="title">css</span>"&gt;</span></span><br><span class="line"><span class="class">&lt;<span class="title">script</span> <span class="title">src</span>="<span class="title">https</span>://<span class="title">lib</span>.<span class="title">baomitu</span>.<span class="title">com</span>/<span class="title">nprogress</span>/0.2.0/<span class="title">nprogress</span>.<span class="title">js</span>"&gt;&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="class">&lt;<span class="title">script</span> <span class="title">src</span>="&lt;?<span class="title">php</span> $<span class="title">this</span>-&gt;<span class="title">options</span>-&gt;<span class="title">CDNURL</span>() ?&gt;/<span class="title">static</span>/<span class="title">js</span>/<span class="title">pjax</span>.<span class="title">min</span>.<span class="title">js</span>"&gt;&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="class">&lt;?<span class="title">php</span> <span class="title">else</span>: ?&gt;</span></span><br><span class="line"><span class="class">&lt;<span class="title">link</span> <span class="title">rel</span>="<span class="title">stylesheet</span>" <span class="title">href</span>="&lt;?<span class="title">php</span> $<span class="title">this</span>-&gt;<span class="title">options</span>-&gt;<span class="title">themeUrl</span>('<span class="title">static</span>/<span class="title">css</span>/<span class="title">nprogress</span>.<span class="title">css</span>'); ?&gt;"&gt;</span></span><br><span class="line"><span class="class">&lt;<span class="title">script</span> <span class="title">src</span>="&lt;?<span class="title">php</span> $<span class="title">this</span>-&gt;<span class="title">options</span>-&gt;<span class="title">themeUrl</span>('<span class="title">static</span>/<span class="title">js</span>/<span class="title">nprogress</span>.<span class="title">js</span>'); ?&gt;"&gt;&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="class">&lt;<span class="title">script</span> <span class="title">src</span>="&lt;?<span class="title">php</span> $<span class="title">this</span>-&gt;<span class="title">options</span>-&gt;<span class="title">themeUrl</span>('<span class="title">static</span>/<span class="title">js</span>/<span class="title">pjax</span>.<span class="title">min</span>.<span class="title">js</span>'); ?&gt;"&gt;&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="class">&lt;?<span class="title">php</span> <span class="title">endif</span>; ?&gt;</span></span><br><span class="line"><span class="class">&lt;<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">let</span> <span class="title">pjaxSelectors</span> = ["<span class="title">title</span>", "#<span class="title">body</span>-<span class="title">wrap</span>", "#<span class="title">rightside</span>-<span class="title">config</span>-<span class="title">hide</span>", "#<span class="title">rightside</span>-<span class="title">config</span>-<span class="title">show</span>", ".<span class="title">js</span>-<span class="title">pjax</span>"];</span></span><br><span class="line"><span class="class"><span class="title">var</span> <span class="title">pjax</span> = <span class="title">new</span> <span class="title">Pjax</span>(</span>{</span><br><span class="line">    elements: <span class="string">'a:not([target="_blank"])'</span>,</span><br><span class="line">    selectors: pjaxSelectors,</span><br><span class="line">    cacheBust: !<span class="number">1</span>,</span><br><span class="line">    analytics: !<span class="number">1</span>,</span><br><span class="line">    scrollRestoration: !<span class="number">1</span>});</span><br><span class="line">document.<span class="title function_ invoke__">addEventListener</span>(<span class="string">"pjax:send"</span>, (function() {</span><br><span class="line"><span class="keyword">if</span> (window.<span class="title function_ invoke__">removeEventListener</span>(<span class="string">"scroll"</span>, window.tocScrollFn), window.<span class="title function_ invoke__">removeEventListener</span>(<span class="string">"scroll"</span>, scrollCollect), <span class="string">"object"</span> == typeof preloader &amp;&amp; preloader.<span class="title function_ invoke__">initLoading</span>(), window.aplayers)</span><br><span class="line"><span class="keyword">for</span> (let e = <span class="number">0</span>; e &lt; window.aplayers.length; e++) window.aplayers[e].options.fixed || window.aplayers[e].<span class="title function_ invoke__">destroy</span>();<span class="string">"object"</span> == typeof typed &amp;&amp; typed.<span class="title function_ invoke__">destroy</span>();</span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">e</span> = document.body.classList;</span><br><span class="line">e.<span class="title function_ invoke__">contains</span>(<span class="string">"read-mode"</span>) &amp;&amp; e.<span class="title function_ invoke__">remove</span>(<span class="string">"read-mode"</span>)</span><br><span class="line">NProgress.<span class="title function_ invoke__">start</span>();</span><br><span class="line">})),</span><br><span class="line">document.<span class="title function_ invoke__">addEventListener</span>(<span class="string">"pjax:complete"</span>, (function() {</span><br><span class="line">    <span class="meta">&lt;?php</span> <span class="variable language_">$this</span>-&gt;options-&gt;<span class="title function_ invoke__">PjaxCallBack</span>() <span class="meta">?&gt;</span></span><br><span class="line">    NProgress.<span class="title function_ invoke__">done</span>();</span><br><span class="line">    window.<span class="title function_ invoke__">refreshFn</span>(), </span><br><span class="line">    document.<span class="title function_ invoke__">querySelectorAll</span>(<span class="string">"script[data-pjax]"</span>).<span class="title function_ invoke__">forEach</span>(e =&gt; {</span><br><span class="line">        <span class="keyword">const</span> t = document.<span class="title function_ invoke__">createElement</span>(<span class="string">"script"</span>),</span><br><span class="line">        o = e.text || e.textContent || e.innerHTML || <span class="string">""</span>;</span><br><span class="line">        Array.<span class="keyword">from</span>(e.attributes).<span class="title function_ invoke__">forEach</span>(e =&gt; t.<span class="title function_ invoke__">setAttribute</span>(e.name, e.value)), t.<span class="title function_ invoke__">appendChild</span>(document.<span class="title function_ invoke__">createTextNode</span>(o)), e.parentNode.<span class="title function_ invoke__">replaceChild</span>(t, e)}),</span><br><span class="line">    GLOBAL_CONFIG.islazyload &amp;&amp; window.lazyLoadInstance.<span class="title function_ invoke__">update</span>(), <span class="string">"function"</span> == typeof chatBtnFn &amp;&amp; <span class="title function_ invoke__">chatBtnFn</span>(), <span class="string">"function"</span> == typeof panguInit &amp;&amp; <span class="title function_ invoke__">panguInit</span>(), <span class="string">"function"</span> == typeof gtag &amp;&amp; <span class="title function_ invoke__">gtag</span>(<span class="string">"config"</span>, <span class="string">""</span>, </span><br><span class="line">    {<span class="attr">page_path</span>: window.location.pathname}),</span><br><span class="line">    <span class="string">"object"</span> == typeof _hmt &amp;&amp; _hmt.<span class="title function_ invoke__">push</span>([<span class="string">"_trackPageview"</span>, window.location.pathname]), </span><br><span class="line">    <span class="string">"function"</span> == typeof loadMeting &amp;&amp; document.<span class="title function_ invoke__">getElementsByClassName</span>(<span class="string">"aplayer"</span>).length &amp;&amp; <span class="title function_ invoke__">loadMeting</span>(),</span><br><span class="line">    <span class="string">"object"</span> == typeof Prism &amp;&amp; Prism.<span class="title function_ invoke__">highlightAll</span>(), <span class="string">"object"</span> == typeof preloader &amp;&amp; preloader.<span class="title function_ invoke__">endLoading</span>()</span><br><span class="line">})),</span><br><span class="line">document.<span class="title function_ invoke__">addEventListener</span>(<span class="string">"pjax:error"</span>, e =&gt; {</span><br><span class="line">    // <span class="number">404</span> === e.request.status &amp;&amp; pjax.<span class="title function_ invoke__">loadUrl</span>(<span class="string">"/404"</span>);</span><br><span class="line">    <span class="keyword">if</span>(e.request.status === <span class="number">404</span>){</span><br><span class="line">        window.location=<span class="string">"/404"</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span>(e.request.status === <span class="number">403</span>){</span><br><span class="line">        window.location=e.request.responseURL</span><br><span class="line">    }</span><br><span class="line">})</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"><span class="meta">&lt;?php</span> <span class="keyword">endif</span><span class="meta">?&gt;</span></span><br><span class="line"> &lt;!--pjax end--&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></tbody></table></figure><p>前台截图:<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://images.nuoyis.net/blog/typecho/uploads/2023/06/4075210841.png" alt="前台截图"><br>后台截图：<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://images.nuoyis.net/blog/typecho/uploads/2023/06/801339492.png" alt="后台截图"></p></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://blog.nuoyis.net">诺依阁</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://blog.nuoyis.net/posts/c223.html">https://blog.nuoyis.net/posts/c223.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://blog.nuoyis.net" target="_blank">诺依阁的日记簿</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="https://server-api.nuoyis.net/acg/?yasuo=1?1637" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://lib.baomitu.com/butterfly-extsrc/1.1.3/sharejs/dist/css/share.min.css" media="print" onload='this.media="all"'><script src="https://lib.baomitu.com/butterfly-extsrc/1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="ads-wrap"><ins class="adsbygoogle" style="display:block" data-ad-format="fluid" data-ad-layout="in-article" data-ad-client="ca-pub-4015694772463475" data-ad-slot="3926138616"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/2f1c.html" title="Typecho编写的小插件 - htmltomd-批量快速从wordpress迁移后的html格式转成makedown模式"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://server-api.nuoyis.net/acg/?yasuo=1?602" onerror='onerror=null,src="/img/404.jpg"' alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Typecho编写的小插件 - htmltomd-批量快速从wordpress迁移后的html格式转成makedown模式</div></div></a></div><div class="next-post pull-right"><a href="/posts/fdf8.html" title="街电租借充电宝简单测评"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://server-api.nuoyis.net/acg/?yasuo=1?9689" onerror='onerror=null,src="/img/404.jpg"' alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">街电租借充电宝简单测评</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://q.qlogo.cn/headimg_dl?dst_uin=914205978&amp;spec=640&amp;img_type=jpg" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="avatar"></div><div class="author-info__name">诺依阁</div><div class="author-info__description">一个记录技术的日记簿</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">117</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">11</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/nuoyis"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">如果有想学习交流的童鞋可以加入我们的群聊聊天哦,群号:607600879<br>日记簿框架已更换为hexo,如果你需要观看新的文章需要浏览器清除缓存</div></div><div class="card-widget nuoyis-ad" id="nuoyis-ad"><div class="item-headline"><i class="fa-solid fa-rectangle-ad"></i><span>广告</span></div><div class="item-content"><a href="https://blog.nuoyis.net">诺依阁推广</a><br>核心赞助:诺依阁的代理卡铺：<a target="_blank" rel="noopener" href="https://haokawx.lot-ml.com/Product/Index/415968">https://haokawx.lot-ml.com/Product/Index/415968</a><br>赞助商1:雨云四周年活动优惠持续发布<br>现在加入雨云最高享受7折优惠<br>优惠通道 <a target="_blank" href="https://www.rainyun.com/nuoyis_">https://www.rainyun.com/nuoyis_</a><br>注册立即领取无门槛5元代金券<br>赞助商2:<a target="_blank" href="https://www.wivps.com/aff/SPRYLBHY" title="推荐卫云计算">稳定低价高速抗打，就上卫云计算</a><br>赞助商3:<a target="_blank" href="https://idc.yeyuing.cn/aff/PBGQAEYZ" title="推荐二蛋云">稳定低价高速抗打，就上二蛋云</a> <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4015694772463475" data-ad-slot="8371555862" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script><br>注:本站产品推广只是推广,不负任何跑路责任。文章有侵权和不合法内容，<a target="_blank" rel="noopener" href="https://wj.qq.com/s2/12523658/3494/">请点击这里</a></div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/9bb5.html" title="用红帽&amp;amp;红帽衍生发行版 9来优化你的站点吧"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://server-api.nuoyis.net/acg/?yasuo=1?2718" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="用红帽&amp;amp;红帽衍生发行版 9来优化你的站点吧"></a><div class="content"><a class="title" href="/posts/9bb5.html" title="用红帽&amp;amp;红帽衍生发行版 9来优化你的站点吧">用红帽&amp;amp;红帽衍生发行版 9来优化你的站点吧</a><time datetime="2024-07-26T23:05:36.000Z" title="发表于 2024-07-27 07:05:36">2024-07-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/92c1.html" title="RHEL9-Rocky9-Openeuler下载方法"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://server-api.nuoyis.net/acg/?yasuo=1?1534" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="RHEL9-Rocky9-Openeuler下载方法"></a><div class="content"><a class="title" href="/posts/92c1.html" title="RHEL9-Rocky9-Openeuler下载方法">RHEL9-Rocky9-Openeuler下载方法</a><time datetime="2024-07-07T04:04:00.000Z" title="发表于 2024-07-07 12:04:00">2024-07-07</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/6465.html" title="Docker用法合集"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://server-api.nuoyis.net/acg/?yasuo=1?4253" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="Docker用法合集"></a><div class="content"><a class="title" href="/posts/6465.html" title="Docker用法合集">Docker用法合集</a><time datetime="2024-05-23T22:23:00.000Z" title="发表于 2024-05-24 06:23:00">2024-05-24</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/f52a.html" title="以 RHCL9 做路由器分配教程"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://server-api.nuoyis.net/acg/?yasuo=1?5260" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="以 RHCL9 做路由器分配教程"></a><div class="content"><a class="title" href="/posts/f52a.html" title="以 RHCL9 做路由器分配教程">以 RHCL9 做路由器分配教程</a><time datetime="2024-05-10T19:36:00.000Z" title="发表于 2024-05-11 03:36:00">2024-05-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/f02.html" title="RHCL 9 合集"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://server-api.nuoyis.net/acg/?yasuo=1?8671" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="RHCL 9 合集"></a><div class="content"><a class="title" href="/posts/f02.html" title="RHCL 9 合集">RHCL 9 合集</a><time datetime="2024-05-10T01:54:00.000Z" title="发表于 2024-05-10 09:54:00">2024-05-10</time></div></div></div></div><div class="card-widget ads-wrap"><ins class="adsbygoogle" style="display:block" data-ad-format="fluid" data-ad-layout="in-article" data-ad-client="ca-pub-4015694772463475" data-ad-slot="3926138616"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div></div></div></main><footer id="footer" style="background:0 0"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2024 By 诺依阁</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text"><a href="https://www.upyun.com/?utm_source=lianmeng&utm_medium=referral" target="_blank" title="又拍云CDN站长联盟扶持" style="cursor:url(&quot;/usr/plugins/HoerMouse/static/image/dew/link.cur&quot;),pointer"><span class="badge-subject">云存储/CDN提供商</span><span class="badge-value bg-color-tianyi">又拍云</span></a> | <a href="http://www.west.cn/" title="虚拟主机-域名注册-主机租用-服务器租用" target="_blank">云服务器</a> | <a href="https://icp.gov.moe/?keyword=20240331" target="_blank">萌ICP备20240331号</a><br><a href="//beian.miit.gov.cn" target="_blank" title="鄂ICP备2023004941号-2" style="cursor:url(&quot;/usr/plugins/HoerMouse/static/image/dew/link.cur&quot;),pointer"><span class="badge-subject">鄂ICP备</span><span class="badge-value bg-color-tianyi">2023004941号-2</span> </a>| <a href="//www.beian.gov.cn/portal/registerSystemInfo?recordcode=42011702000752" target="_blank" title="鄂公网安备42011702000752号" style="cursor:url(&quot;/usr/plugins/HoerMouse/static/image/dew/link.cur&quot;),pointer"><span class="badge-subject">鄂公网安备</span><span class="badge-value bg-color-tianyi">42011702000752号</span></a><br><a target="_blank" rel="noopener" href="https://www.esoot.com">易搜特收录网 </a>| <a target="_blank" rel="noopener" href="https://www.luoca.net/">雒收录</a> | 本站部分CSS由<a target="_blank" rel="noopener" href="https://lolicon.team/">紗夕里</a>提供<br>全站由<a target="_blank" href="https://www.upyun.com/?utm_source=lianmeng&amp;utm_medium=referral" title="又拍云CDN" alt="又拍云CDN"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://www.nuoyis.net/assets/upyun_logo-CJhLbS30.webp" style="margin-bottom:-10px;margin-left:3px" alt="CDN" width="70" height="35"></a>和<a href="https://www.sctes.com/" target="_blank"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://www.sctes.com/assets/logo.svg" alt="无畏云" width="55" height="24"></a>提供CDN加速/云存储服务</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">簡</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="https://lib.baomitu.com/hexo-theme-butterfly/4.12.0/js/utils.min.js"></script><script src="https://lib.baomitu.com/hexo-theme-butterfly/4.12.0/js/main.min.js"></script><script src="https://lib.baomitu.com/hexo-theme-butterfly/4.12.0/js/tw_cn.min.js"></script><script src="https://lib.baomitu.com/fancyapps-ui/5.0.32/fancybox/fancybox.umd.min.js"></script><script src="https://lib.baomitu.com/vanilla-lazyload/17.8.5/lazyload.iife.min.js"></script><div class="js-pjax"></div><script src="https://server-api.nuoyis.net/live2d/autoload.js"></script><script type="text/javascript" src="https://static.nuoyis.net/private/aboutme/main/js/hua.js"></script><script src="https://lib.baomitu.com/pjax/0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener
  btf.removeGlobalFnEvent('pjax')
  btf.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span> 数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"></div></div><hr><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="https://lib.baomitu.com/hexo-theme-butterfly/4.12.0/js/search/local-search.min.js"></script></div></div></body></html>